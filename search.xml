<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>java面向对象</title>
      <link href="/2022/05/03/2022-5-3-java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"/>
      <url>/2022/05/03/2022-5-3-java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[<h3 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h3><h4 id="类"><a href="#类" class="headerlink" title="类"></a>类</h4><h5 id="成员变量"><a href="#成员变量" class="headerlink" title="成员变量"></a>成员变量</h5><ol><li>类的属性也称为成员变量，可以是任何类型，整个类中均是成员变量的作用范围</li></ol><h5 id="成员方法"><a href="#成员方法" class="headerlink" title="成员方法"></a>成员方法</h5><ol><li>类对象的行为对应着成员方法</li><li>成员方法可以有参数，参数可以为对象也可以为基本数据类型的变量</li><li>成员方法需要返回值时，方法体中使用return关键词，指定后将被终止</li><li>成员方法不需要返回值时，需要使用void关键词表示</li></ol><h5 id="权限修饰符"><a href="#权限修饰符" class="headerlink" title="权限修饰符"></a>权限修饰符</h5><p><img src="https://s2.loli.net/2022/05/04/KN5bC31926tRiXf.png" alt="image-20220504152228310"></p><ul><li>若声明类时不使用权限修饰符，则这个类默认为包存取范围</li><li>即使类里面的成员方法又设置了public权限，但是访问权限依然与类的权限相同</li></ul><h5 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h5><ol><li><p>定义</p><ul><li>成员方法中定义的变量，这个变量就被称为局部变量</li><li>成员方法中的形参也作为一个局部变量</li><li>局部变量在方法执行时创建，方法结束时销毁</li></ul></li><li><p>局部变量的作用域</p><ul><li>在相互不嵌套的作用域中可以同时声明两个名称与类型相同的局部变量</li><li>在相同嵌套的区域中不能这样声明两个名称与类型相同的局部变量，编译器将会报错</li></ul></li></ol><h5 id="this-关键字"><a href="#this-关键字" class="headerlink" title="this 关键字"></a>this 关键字</h5><ol><li>用于表示本类当前的对象，当前对象不是new出来的实体对象，而是当前正在编辑的类，this关键字只能在本类中使用</li><li>this可以调用成员变量和成员方法</li><li>当局部变量或方法参数覆盖了成员变量时，就要添加this关键字来明确引用的是类成员还是局部变量或方法</li><li>this还可以作为方法的返回值，直接在方法体中return this</li></ol><h4 id="类的构造方法"><a href="#类的构造方法" class="headerlink" title="类的构造方法"></a>类的构造方法</h4><h5 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h5><p>​    在类中，除了成员方法外，还有构造方法，构造方法是一个与类同名的方法，对象的创建就是通过构造方法完成的，每当类实例化一个对象时，类都会自动调用构造方法</p><h5 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h5><ul><li>构造方法没有返回值（与成员方法区别在于构造方法不需要void关键字修饰）</li><li>名称与本类名称相同</li><li>在构造方法中可以为成员变量赋值，这样当实例化一个本类对象时，相应的成员变量也将被初始化，如果类中没有构造方法，编译器会自动创建一个不带参数的默认构造方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EggCake</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> eggcake;</span><br><span class="line"><span class="comment">// 有参构造方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">EggCake</span><span class="params">(<span class="keyword">int</span> eggcake)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.eggcake = eggcake;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 无参构造方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">EggCake</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">EggCake cake1 = <span class="keyword">new</span> EggCake();</span><br><span class="line">System.out.println(<span class="string">&quot;顾客不要求加蛋，只会有&quot;</span>+ cake1.eggcake + <span class="string">&quot;个蛋&quot;</span>);</span><br><span class="line">EggCake cake2 = <span class="keyword">new</span> EggCake(<span class="number">2</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;顾客要求加2个蛋，就有&quot;</span>+ cake2.eggcake + <span class="string">&quot;个蛋&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="静态变量和静态方法"><a href="#静态变量和静态方法" class="headerlink" title="静态变量和静态方法"></a>静态变量和静态方法</h4><h5 id="使用-static-关键字创建静态变量和静态方法"><a href="#使用-static-关键字创建静态变量和静态方法" class="headerlink" title="使用 static 关键字创建静态变量和静态方法"></a>使用 static 关键字创建静态变量和静态方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Static</span> </span>&#123;</span><br><span class="line"><span class="comment">// 创建静态变量</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> p =<span class="number">3</span>;</span><br><span class="line"><span class="comment">// 创建静态防范</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;这是一个静态方法&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">// 调用静态变量和静态方法</span></span><br><span class="line">System.out.println(Static.p);</span><br><span class="line">Static.method();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>静态变量与静态方法的作用通常为了提供共享数据或方法，比如数学计算公式</li><li>静态成员同样遵循public/private/protected修饰符的约束</li></ul><h5 id="使用static注意点："><a href="#使用static注意点：" class="headerlink" title="使用static注意点："></a>使用static注意点：</h5><ul><li>静态方法中不可以使用this关键字</li><li>静态方法中不可以调用非静态方法</li><li>局部变量不可以使用static关键字声明</li><li>主方法必须用static声明</li><li>只有内部类可以使用static关键字声明</li></ul><h4 id="类的主方法"><a href="#类的主方法" class="headerlink" title="类的主方法"></a>类的主方法</h4><p>​    主方法是类的入口点，它定义了程序从何处开始，主方法提供对程序流向的控制，java编译器通过对主方法来执行程序</p><h5 id="主方法定义的特性"><a href="#主方法定义的特性" class="headerlink" title="主方法定义的特性"></a>主方法定义的特性</h5><ul><li>主方法是静态的，所有如果要直接在主方法中调用其他方法，则该方法必须也是静态</li><li>主方法没有返回值</li><li>主方法的形参为数组</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读取主方法的参数值</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainDome</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;args.length;i++) &#123;</span><br><span class="line">System.out.println(args[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h4><p>​    对象是由类实例化而来，所有问题都通过对象来处理，对象可以通过操作类的属性和方法来解决相应的问题</p><h5 id="对象的创建-new"><a href="#对象的创建-new" class="headerlink" title="对象的创建 new"></a>对象的创建 new</h5><ul><li>对象被创建出来时，就是一个对象的引用，这个引用在内存中为对象分配存储空间</li><li>可以在构造方法中初始化成员变量，当创建对象时，自动调用构造方法，也就是说初始化与创建是捆绑在一起的</li><li>每个对象都是相互独立的，在内存中有独立的位置，当一个对象的生命周期结束后时，对象就变成了垃圾。由java虚拟机自带的垃圾回收机制处理，不能再被使用</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建People类，实例化两个人</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    String name;</span><br><span class="line">    String sex;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">People</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">People</span><span class="params">(<span class="keyword">int</span> age,String name,String sex)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        People p1 = <span class="keyword">new</span> People(<span class="number">11</span>,<span class="string">&quot;tom&quot;</span>,<span class="string">&quot;man&quot;</span>);</span><br><span class="line">        People p2 = <span class="keyword">new</span> People(<span class="number">12</span>,<span class="string">&quot;lily&quot;</span>,<span class="string">&quot;women&quot;</span>);</span><br><span class="line">        System.out.println(p1.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="访问对象的属性和行为"><a href="#访问对象的属性和行为" class="headerlink" title="访问对象的属性和行为"></a>访问对象的属性和行为</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建Dog类，实例化d1后调用属性和行为</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">String name;</span><br><span class="line">String Color;</span><br><span class="line">String vioce;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Dog</span><span class="params">(String name,String color,String vioce)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line">Color = color;</span><br><span class="line"><span class="keyword">this</span>.vioce = vioce;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(vioce);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Dog d1 = <span class="keyword">new</span> Dog(<span class="string">&quot;tom&quot;</span>,<span class="string">&quot;red&quot;</span>,<span class="string">&quot;wanwan&quot;</span>);</span><br><span class="line">System.out.print(<span class="string">&quot;第一条狗是：&quot;</span>+d1.name + <span class="string">&quot;，毛色为：&quot;</span>+d1.Color + <span class="string">&quot;，叫声为：&quot;</span>);</span><br><span class="line">d1.call();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="对象的引用"><a href="#对象的引用" class="headerlink" title="对象的引用"></a>对象的引用</h5><p><img src="https://s2.loli.net/2022/05/06/j3IneXOH71oYa5i.png" alt="image-20220506135658141"></p><p>​    上述中实际的对象为 new People()，为了方便开发者保存，调用对象，于是创建一个People类型、名叫tom的引用变量，实际上tom只是代表一个对象的内存位置，只要记住引用变量就能快速的在内存里找到对象数据</p><h5 id="对象的销毁"><a href="#对象的销毁" class="headerlink" title="对象的销毁"></a>对象的销毁</h5><ol><li><p>怎样的对象会被java虚拟机视为垃圾</p><ul><li><p>对象引用超过作用范围</p><p><img src="https://s2.loli.net/2022/05/06/Z95GJyz3PKFm6vQ.png" alt="image-20220506140300581"></p></li><li><p>将对象赋值为null</p><p><img src="https://s2.loli.net/2022/05/06/T2K5hVMslxd9juE.png" alt="image-20220506140326648"></p></li></ul></li><li><p>注意点</p><ul><li>只有通过new操作符创建的对象才会被自动回收</li><li>不是通过new操作符创建的对象提供了一个finalize()方法，这个方法为Object类，它被声明为protected，用户可以在自己的类中定义这个方法，在垃圾回收时会先调用该方法，在下一次垃圾回收动作发送时，才真正回收被对象占用的内存</li><li>由于垃圾回收不受人为控制，具体执行时间也不确定，所以finalize方法也就无法执行，java提供了System.gc()方法来强制启动垃圾回收器</li></ul></li></ol><h3 id="继承、多态、抽象类和接口"><a href="#继承、多态、抽象类和接口" class="headerlink" title="继承、多态、抽象类和接口"></a>继承、多态、抽象类和接口</h3><h4 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h4><ul><li><p>java语言中一个类继承另外一个类需要使用extends关键词</p></li><li><p>java只支持单继承，即一个类只能有一个父类</p></li><li><p>子类继承父类之后，创建的子类对象会先调用父类的构造方法，在调用子类的构造方法</p></li><li><p>子类继承父类时不需要再用public修饰</p></li><li><p>java虽然不允许同时继承两个父类，但可以通过多代继承实现多继承的关系：祖父》父》儿子》孙子，方式继承</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> my_project;</span><br><span class="line"><span class="comment">// 创建子类对象，并观察构造方法的调用</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Parent</span><span class="params">()</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;构造父类方法&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chinld</span> <span class="keyword">extends</span> <span class="title">Parent</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Chinld</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;构造子类方法&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dome</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">new</span> Chinld();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类电话类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Telephone</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 电话类的属性button</span></span><br><span class="line">String button = <span class="string">&quot;0~9&quot;</span>;</span><br><span class="line"><span class="comment">// 电话类的行为：call</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;拨打号位：&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 手机类继承电话类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Moblie</span> <span class="keyword">extends</span> <span class="title">Telephone</span></span>&#123;</span><br><span class="line">  <span class="comment">// 手机类的属性screen</span></span><br><span class="line">String screen = <span class="string">&quot;液晶屏&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dome2</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 实例化对象手机类m1</span></span><br><span class="line">Moblie m1 = <span class="keyword">new</span> Moblie();</span><br><span class="line">System.out.println(m1.button);</span><br><span class="line">System.out.println(m1.screen);</span><br><span class="line">m1.call();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="Object类"><a href="#Object类" class="headerlink" title="Object类"></a>Object类</h4><ul><li>java中所有的类都直接或间接的继承了java.lang.Object类</li><li>Object类是所有类的父类，是java类层中最高层类</li><li>由于所有类都是Object类的子类，所有在定义类时可省略extends</li></ul><h5 id="getClass-方法"><a href="#getClass-方法" class="headerlink" title="getClass()方法"></a>getClass()方法</h5><ul><li> getClass方法时Object类定义的方法，他会返回对象执行时的Class实例，然后使用此实例调用getName()方法可以取得类的名称</li><li>语法：getClass().getName();</li></ul><h5 id="toString-方法"><a href="#toString-方法" class="headerlink" title="toString()方法"></a>toString()方法</h5><ul><li><p>该方法将一个对象返回为字符串形式，他会返回一个String实例、在实际应用中通常重写toString方法，为对象提供一个特定的输出模式</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> my_project;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">String name;</span><br><span class="line"><span class="keyword">int</span> age;</span><br><span class="line"><span class="comment">// 构造方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name,<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line"><span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// toString方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;我叫&quot;</span> + name + <span class="string">&quot;, 今年&quot;</span> + age + <span class="string">&quot;岁&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Student s1 = <span class="keyword">new</span> Student(<span class="string">&quot;张三&quot;</span>,<span class="number">15</span>);</span><br><span class="line">System.out.println(s1);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h5 id="equals-方法"><a href="#equals-方法" class="headerlink" title="equals()方法"></a>equals()方法</h5><ul><li>“==”运算符是比较两个对象的引用内存地址是否相等</li><li>equals()方法比较的是两个对象的实际内容</li></ul><h4 id="对象类型转换"><a href="#对象类型转换" class="headerlink" title="对象类型转换"></a>对象类型转换</h4><h5 id="向上转换"><a href="#向上转换" class="headerlink" title="向上转换"></a>向上转换</h5><ul><li>向上转换是将子类类型的对象转换为父类类型的对象，即把子类类型对象直接赋值给父类类型对象</li><li>因为people类是teacher类的父类，所有向上转型，能够把教师类直接赋值给人类的对象</li><li>向上转型是安全的，因为是将一个较具体的类对象转换为一个较为抽象的类对象，可以说平行四边形是四边形，但是不能说四边形是平行四边形</li></ul><p><img src="https://s2.loli.net/2022/05/09/ikVbPmQjwKfat5n.png" alt="image-20220509094738547"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在运用向上转型的过程中，父类的对象无法调用子类独有的属性或者方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Quadrangle</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Parallelogram</span> <span class="keyword">extends</span> <span class="title">Quadrangle</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> edges = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">Quadrangle P = <span class="keyword">new</span> Parallelogram();</span><br><span class="line">p.edges = <span class="number">6</span>;  <span class="comment">// 报语法错误</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="向下转换"><a href="#向下转换" class="headerlink" title="向下转换"></a>向下转换</h5><ul><li>向下转换将父类类型的对象转换为子类类型的对象</li><li>运用向下转换是不安全的，如果把一个较抽象的对象转换为一个较具体的类对象，这样通常会出现错误</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类对象不能直接赋值给子类对象，如果一定要转换</span></span><br><span class="line"><span class="comment">// 可以通过该语法强制装换： 子类类型 子类对象 = (子类类型) 父类对象;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bird</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pigeon</span> <span class="keyword">extends</span> <span class="title">Bird</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo4</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">Bird b = <span class="keyword">new</span> Pigeon();</span><br><span class="line">Pigeon p = (Pigeon) b;   <span class="comment">// 强制类型转换</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="instanceof关键字判断对象类型"><a href="#instanceof关键字判断对象类型" class="headerlink" title="instanceof关键字判断对象类型"></a>instanceof关键字判断对象类型</h4><ul><li><p>在执行向下转换之前需要先使用instanceof来判断父类对象是否为子类对象的实例</p></li><li><p>instanceof返回值为布尔值</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Quadrangle</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Quadrangle</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circular</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo5</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Quadrangle q = <span class="keyword">new</span> Quadrangle();</span><br><span class="line">Square s = <span class="keyword">new</span> Square();</span><br><span class="line">System.out.println(q <span class="keyword">instanceof</span> Square); </span><br><span class="line">        <span class="comment">// 判断四边形是否为正方形的子类</span></span><br><span class="line">System.out.println(s <span class="keyword">instanceof</span> Quadrangle);    <span class="comment">// 判断正方形是否为四边形的子类</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h4 id="方法的重载"><a href="#方法的重载" class="headerlink" title="方法的重载"></a>方法的重载</h4><p>​    同一个类中允许存在一个以上的同名方法，只要这些方法的参数个数和类型不同即可</p><h4 id="final关键字"><a href="#final关键字" class="headerlink" title="final关键字"></a>final关键字</h4><h5 id="final变量"><a href="#final变量" class="headerlink" title="final变量"></a>final变量</h5><ul><li>使用final声明变量后，就不可以再改变该变量的值</li><li>通常用final定义的变量为常量</li><li>一个季是static又是final的字段只占据一段不能改变的存储空间</li></ul><h5 id="final方法"><a href="#final方法" class="headerlink" title="final方法"></a>final方法</h5><ul><li>将方法定义为final，可以防止子类修改父类的定义和实现方式</li><li>定义为final的方法执行效率要高于非final方法</li><li>一个定位为private的方法隐式指定为final类型，因此无须将一个定义为private的方法再定义为final类型</li></ul><h5 id="final类"><a href="#final类" class="headerlink" title="final类"></a>final类</h5><ul><li>定义为final的类不能被继承，不允许进行改动</li></ul><h4 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Shape</span></span>&#123;&#125; <span class="comment">// 正方形类继承绘图类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circular</span> <span class="keyword">extends</span> <span class="title">Shape</span></span>&#123;&#125; <span class="comment">// 圆形类继承绘图类</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo6</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 定义一个公开 静态 无输出的方法，传入一个绘图类对象</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Shape s)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 判断传入的对象是否为正方形类对象或者正方形的子类对象</span></span><br><span class="line"><span class="keyword">if</span>(s <span class="keyword">instanceof</span> Square) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;绘制正方形&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(s <span class="keyword">instanceof</span> Circular) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;绘制图形&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;绘制父类图形&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">draw(<span class="keyword">new</span> Shape());</span><br><span class="line">draw(<span class="keyword">new</span> Square());</span><br><span class="line">draw(<span class="keyword">new</span> Circular());</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="抽象类与接口"><a href="#抽象类与接口" class="headerlink" title="抽象类与接口"></a>抽象类与接口</h4><h5 id="抽象类-abstract"><a href="#抽象类-abstract" class="headerlink" title="抽象类(abstract)"></a>抽象类(abstract)</h5><ul><li>用于描述特征且极具抽象性的类称为抽象类</li><li>抽象类不可以实例化为对象</li><li>抽象类必须被继承，继承后必须实现其中所有的抽象方法，保证以相同的方法名称、参数列表和返回值类型创建出非抽象方法，当然也可以是抽象方法</li><li>只要类中一个抽象方法，则该类就为抽象类</li><li>抽象方法没有方法体，这个方法本身没有任何意义，除非它被重写</li></ul><h5 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h5>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java语言基础</title>
      <link href="/2022/04/15/2022-4-15-java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/"/>
      <url>/2022/04/15/2022-4-15-java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h3 id="java语言基础"><a href="#java语言基础" class="headerlink" title="java语言基础"></a>java语言基础</h3><h4 id="java主类结构"><a href="#java主类结构" class="headerlink" title="java主类结构"></a>java主类结构</h4><ul><li>java程序的基本组成单元是类，类体中包括属性与方法两个部分</li><li>每个程序都包含一个main()方法，含有main()方法的类成为主类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Number;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Frist</span> </span>&#123;</span><br><span class="line"><span class="keyword">static</span> String s1 = <span class="string">&quot;你好&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">String s2= <span class="string">&quot;java&quot;</span>;</span><br><span class="line">System.out.println(s1);</span><br><span class="line">System.out.println(s2);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>包声明    </p><p>一个java应用程序是由若干个类组成，上述例子中就是一个类名为Frist的类，语句package Number为声明该类的包，package为包的关键词</p></li><li><p>声明成员变量和局部变量</p><ul><li>成员变量：（又叫全局变量），声明在类体重</li><li>局部变量：声明在方法体中</li><li>例子中s1为成员变量，s2为局部变量</li></ul></li><li><p>编写主方法</p><ul><li>main()方法时类体中的主方法，该方法从{开始，至}结束  ，是程序开始执行的位置</li><li>pubic：权限修饰符</li><li>static：静态修饰符</li><li>void：返回值修饰符</li><li>java程序中必须声明public static void</li><li>String[] args：是一个字符类型的数组</li></ul></li><li><p>导入api类库</p><ul><li>import关键词导入相关类</li></ul></li></ol><h4 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h4><ol><li><p>整数类型</p><p><img src="https://s2.loli.net/2022/04/16/azjnHoRYKEt48fA.png"></p><ul><li>byte：定义方式与int一致</li><li>short：定义方式与int一致</li><li>int：int变量在内存中占4字节，也就是32位bit，int为java整型值的默认数据类型</li><li>long：取值范围比int大，且属于高精度数据类型，赋值时需要在整数后加L或l，定义long类型变量</li></ul></li><li><p>浮点类型</p><p><img src="https://s2.loli.net/2022/04/16/NUJvynihsexdkmK.png"></p><ul><li>float：单精度浮点类型，在定义时需要加F/f来表明为float类型，不能会默认为double类型</li><li>double：双精度浮点类型（默认浮点类型）</li></ul></li><li><p>字符类型</p><ul><li><p>char：’s’表示为一个字符，”s”表示为一个字符串</p></li><li><p>转义字符：转义一个特殊字符需要使用反斜号\</p><p><img src="https://s2.loli.net/2022/04/16/IV1foFz8eWYXcJr.png" alt="image-20220416173814269"></p></li></ul></li><li><p>布尔类型</p><ul><li>布尔类型又称为逻辑类型，简称布尔型，只有true/false两个值</li></ul></li></ol><h4 id="变量与常量"><a href="#变量与常量" class="headerlink" title="变量与常量"></a>变量与常量</h4><ol><li><p>标识符和关键词</p><ul><li><p>标识符：用来标识类名，变量名，方法名，数组名，文件名的有效字符序列，一般由字母+下划线、$和数字组成，且第一个字符不能是数字，标识符不能为java关键词</p></li><li><p>关键词：为java的保留字，是java语言中已经被赋予特定意义的一些单词</p><p><img src="https://s2.loli.net/2022/04/18/YOIBR89xSAuHfNL.png" alt="image-20220418094942077"></p></li></ul></li><li><p>声明变量</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> age;</span><br><span class="line"><span class="keyword">char</span> char1 = <span class="string">&#x27;r&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>系统内存可大略分为3个区域，系统os区、程序program区、数据data区，当程序执行时，程序代码会加载到内存中的程序区，数据暂时存储在数据区中，假设上述两个变量定义在方法体中，则程序加载到程序区中，当执行程序代码时，会在数据区配置空间给出这两个变量</li></ul></li><li><p>声明常量</p><ul><li><p>程序运行过程中一直不会改变的量称为常量（constant），通常也称为“final变量”</p></li><li><p>在java中声明一个常量，除了指定数据类型，还需要通过final关键词进行限定</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">int</span> age;</span><br><span class="line"><span class="keyword">final</span> char2 = <span class="string">&#x27;a&#x27;</span>;</span><br></pre></td></tr></table></figure></li></ul></li></ol><h3 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h3><h4 id="复合语句"><a href="#复合语句" class="headerlink" title="复合语句"></a>复合语句</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myproject;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Compound</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> x = <span class="number">20</span>;</span><br><span class="line">&#123;<span class="comment">// 复合语句1</span></span><br><span class="line"><span class="keyword">int</span> y = <span class="number">40</span>;</span><br><span class="line">System.out.println(y);</span><br><span class="line"><span class="keyword">int</span> z = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">boolean</span> b;</span><br><span class="line">&#123;<span class="comment">// 复合语句2</span></span><br><span class="line">b = y &gt; z;</span><br><span class="line">System.out.println(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">String word = <span class="string">&quot;hello java&quot;</span>;</span><br><span class="line">System.out.println(word);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>复合语句中每个语句都是从上至下执行，复合语句以整个块为单位，能够用在任何一个单独语句可以使用的地方，并且复合语句中还可以嵌套复合语句</li><li>复合语句中的变量在语句外使用时会发生错误</li></ul><h4 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h4><h5 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h5><ol><li><p>语法规则</p><ul><li>if后面跟布尔表达式，当为true时，执行后续语句，为false则执行else后的语句</li><li>if 条件语句可分为简单的if语句、if…else语句、if…else if多分支语句</li></ul></li><li><p>if</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myproject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TakePhone</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> phone_number = <span class="number">12345678</span>;</span><br><span class="line"><span class="keyword">if</span>(phone_number != <span class="number">123456</span>) &#123;<span class="comment">// 判断手机号是否存在</span></span><br><span class="line">System.out.println(<span class="string">&quot;对不起，您拨打的号码不存在&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>if…else</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myproject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TakePhone</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> phone_number = <span class="number">123456</span>;</span><br><span class="line"><span class="keyword">if</span>(phone_number != <span class="number">123456</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;对不起，您拨打的号码不存在&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;拨打123456成功&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li><p>if…else if</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myproject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Restaurant</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;请问有多少人用餐？&quot;</span>);</span><br><span class="line"><span class="keyword">int</span> count = <span class="number">11</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;回答：&quot;</span>+ count + <span class="string">&quot;人&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(count&lt;=<span class="number">4</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;请到4人桌用餐&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(count&gt;<span class="number">4</span> &amp;&amp; count&lt;=<span class="number">8</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;请到8人桌用餐&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(count&gt;<span class="number">8</span> &amp;&amp; count&lt;=<span class="number">16</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;请到16人桌用餐&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;抱歉，本店没有这么大的包间&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h5 id="switch-多分支语句"><a href="#switch-多分支语句" class="headerlink" title="switch 多分支语句"></a>switch 多分支语句</h5><ol><li><p>语法规则：</p><ul><li>switch语句中表达式的值必须是整数、字符型、字符串类型或者枚举类型，常量值数据类型必须与表达式类型相同</li><li>switch语句先计算表达式的值，如果表达式的结果和某个case的常量值相同，则执行该case后的语句直到遇到break为止，若该case中没有break则继续执行后面case的语句直到遇到break为止</li><li>若没有一个case常量的值与表达式相同，则执行default后的语句，default语句为可选，若不存在default语句也没有case常量与表达式相同，switch语句则不做任何处理</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myproject;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Grade</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">System.out.println(<span class="string">&quot;请输入成绩：&quot;</span>);</span><br><span class="line"><span class="keyword">int</span> grade = sc.nextInt();</span><br><span class="line"><span class="keyword">switch</span>(grade) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">System.out.println(<span class="string">&quot;优&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">System.out.println(<span class="string">&quot;良&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">System.out.println(<span class="string">&quot;中&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">System.out.println(<span class="string">&quot;差&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">System.out.println(<span class="string">&quot;成绩无效&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">sc.close();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h4><h5 id="while"><a href="#while" class="headerlink" title="while"></a>while</h5><ol><li><p>语法规则：</p><ul><li>当条件表达式返回值为true时，则执行后面的语句块，执行玩语句块后重新判断条件表达式是否为true，直到条件表达式返回为false则退出循环</li><li>注意点：while表达式的括号后加；这样程序会认为要执行一条空语句，而进入无限循环</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myproject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">While</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> sum =<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(x&lt;=<span class="number">1000</span>) &#123;</span><br><span class="line">sum = sum + x;</span><br><span class="line">x++;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;sum等于 &quot;</span> + sum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h5 id="do-while循环语句"><a href="#do-while循环语句" class="headerlink" title="do while循环语句"></a>do while循环语句</h5><ol><li><p>语法规则：</p><ul><li>先执行一次循环，在判断条件是否成立</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myproject;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DoWhile</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">// 创建扫描器，获取控制台输入的值</span></span><br><span class="line">Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"><span class="keyword">int</span> password;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;请输入6位密码：&quot;</span>);</span><br><span class="line"><span class="comment">// 将用户输入的密码记录下来</span></span><br><span class="line">password = sc.nextInt();</span><br><span class="line">&#125;<span class="keyword">while</span>(<span class="number">123</span>!=password);</span><br><span class="line">System.out.println(<span class="string">&quot;登录成功&quot;</span>);</span><br><span class="line">sc.close();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h5 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a>for 循环</h5><ol><li><p>for</p><ol><li><p>语法规则：</p><ul><li>for循环语句中有3个表达式，1初始化表达式，负责完成变量的初始化；2循环条件表达式，指定循环条件，为布尔值；3每次循环结束后执行的语句，一般用来改变循环条件</li><li>首次执行表达式1来完成变量的初始化，然后判断表达式2的值为true时进入循环执行语句块中的代码，执行结束后计算表达式3，第二轮循环时从表达式2开始，若返回true则执行语句块内的代码，返回false则跳出整个for语句</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myproject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">For</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">// 计算2-100的偶数之和</span></span><br><span class="line"><span class="keyword">int</span> sum =<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=<span class="number">100</span>;i=i+<span class="number">2</span>) &#123;</span><br><span class="line">sum = sum + i;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;合为：&quot;</span> + sum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/18/RWitParJU5cp1gB.png" alt="image-20220418142944860"></p></li></ol></li><li><p>foreach</p><p>foreach是for的简化版本，不能取代for语句，foreach不是关键词，习惯将这种特殊的for语句成为foreach语句，foreach语句在遍历数组上很方便</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myproject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForEach</span> </span>&#123;</span><br><span class="line"><span class="comment">// 使用foreach遍历数组</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> arr[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> x :arr) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;元素分别为&quot;</span> + x);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="循环控制"><a href="#循环控制" class="headerlink" title="循环控制"></a>循环控制</h4><h5 id="break"><a href="#break" class="headerlink" title="break"></a>break</h5><ol><li><p>使用break可中断当前循环体</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myproject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Break</span> </span>&#123;</span><br><span class="line"><span class="comment">// 遇到第一个偶数时中断循环</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> n =<span class="number">1</span> ;n&lt;<span class="number">20</span>;n++) &#123;</span><br><span class="line"><span class="keyword">if</span>(n%<span class="number">2</span> ==<span class="number">0</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;n为：&quot;</span> + n);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用标签名中断指定位置的循环</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myproject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Break</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">ll:<span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">1</span> ;i&lt;=<span class="number">3</span>;i++) &#123; <span class="comment">// 指定循环标签名ll</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;<span class="number">5</span>;k++) &#123;</span><br><span class="line"><span class="keyword">if</span>(k==<span class="number">3</span>) &#123;</span><br><span class="line"><span class="keyword">break</span> ll;<span class="comment">// 指定当k=3时，跳出ll循环，不指定时只会跳出当前循环</span></span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;i=&quot;</span>+i +<span class="string">&quot;k=&quot;</span>+k);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h5 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h5><ol><li><p>条件为true时则跳过本次循环，继续下一次循环</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myproject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContinueTest</span> </span>&#123;</span><br><span class="line"><span class="comment">// 当i为偶数时跳过</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i&lt;=<span class="number">20</span>;i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(i%<span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;奇数有：&quot;</span> + i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h6 id="练习1-打印菱形"><a href="#练习1-打印菱形" class="headerlink" title="练习1. 打印菱形"></a>练习1. 打印菱形</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> my_project;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rhombus</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">// 先打印上面的正三角</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">9</span>;i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">0</span>;x&lt;<span class="number">8</span>-i;x++) &#123;</span><br><span class="line"><span class="comment">// 打印前面的空格</span></span><br><span class="line">System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> y=<span class="number">0</span>;y&lt;<span class="number">2</span>*i+<span class="number">1</span>;y++) &#123;</span><br><span class="line"><span class="comment">// 打印出*</span></span><br><span class="line">System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印换行</span></span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 再打印下面的倒三角</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">8</span>;i&gt;<span class="number">0</span>;i--) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">0</span>;x&lt;<span class="number">9</span>-i;x++) &#123;</span><br><span class="line">System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> y=<span class="number">0</span>;y&lt;<span class="number">2</span>*i-<span class="number">1</span>;y++) &#123;</span><br><span class="line">System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="练习2：百钱百鸡"><a href="#练习2：百钱百鸡" class="headerlink" title="练习2：百钱百鸡"></a>练习2：百钱百鸡</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myproject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChickenGame</span> </span>&#123;</span><br><span class="line"><span class="comment">// 百钱百鸡练习:</span></span><br><span class="line"><span class="comment">// 公鸡5文钱一只，母鸡3文钱一只，雏鸡1文钱3只，用100文钱买100只鸡，求鸡分别为多少只？</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">20</span>;i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">1</span>;x&lt;=<span class="number">33</span>;i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> y=<span class="number">3</span>;y&lt;=<span class="number">300</span>;y+=<span class="number">3</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>((i*<span class="number">5</span> + x*<span class="number">3</span> + y/<span class="number">3</span>)-<span class="number">100</span> == <span class="number">0</span>) &#123;</span><br><span class="line">System.out.print(<span class="string">&quot;有公鸡&quot;</span>+i+<span class="string">&quot;只，&quot;</span>+<span class="string">&quot;母鸡&quot;</span>+x+<span class="string">&quot;只，&quot;</span>+<span class="string">&quot;有雏鸡&quot;</span>+y+<span class="string">&quot;只\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="练习3：输出由4、5、6、7能组成的互不相同且无重复数字的三位数"><a href="#练习3：输出由4、5、6、7能组成的互不相同且无重复数字的三位数" class="headerlink" title="练习3：输出由4、5、6、7能组成的互不相同且无重复数字的三位数"></a>练习3：输出由4、5、6、7能组成的互不相同且无重复数字的三位数</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myproject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreeNumber</span> </span>&#123;</span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">4</span>;i&lt;<span class="number">8</span>;i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">4</span>;x&lt;<span class="number">8</span>;x++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> y=<span class="number">4</span>;y&lt;<span class="number">8</span>;y++) &#123;</span><br><span class="line"><span class="keyword">if</span>(i!=x&amp;&amp;i!=y&amp;&amp;x!=y) &#123;</span><br><span class="line">System.out.println(i+<span class="string">&quot;&quot;</span>+x+<span class="string">&quot;&quot;</span>+y);&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><ul><li>概念：具有相同数据类型的一组数据的集合</li></ul><h4 id="一维数组"><a href="#一维数组" class="headerlink" title="一维数组"></a>一维数组</h4><ol><li><p>创建一维数组：先声明，再用new关键词进行内存分配</p><ol><li>数组元素类型 数组名字[ ] = new数组元素类型[数组元素个数];</li></ol></li><li><p>初始化数组</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 两种初始化数组方式</span></span><br><span class="line"><span class="keyword">int</span> arr[] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> arr2[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br></pre></td></tr></table></figure></li><li><p>使用一维数组</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> my_project;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Args</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">// 打印月份对应的天数</span></span><br><span class="line"><span class="keyword">int</span> day[] = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">12</span>;i++) &#123;</span><br><span class="line">System.out.println((i+<span class="number">1</span>)+<span class="string">&quot;月的天数为&quot;</span>+day[i]+<span class="string">&quot;天&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h4><ol><li><p>概念：如果一维数组中的各个元素仍然是一个数组，那么他就是一个二位数组。二维数组常用语表示表，表中的信息以行和列的形式组织，第一个下标代表元素所在的行，第二个下标代表元素所在的列</p></li><li><p>创建二位数组：先声明，再用new关键词进行内存分配</p><ol><li>数组元素的类型 数组名字[] []; </li><li>数组元素的类型[] [] 数组名字;</li></ol></li><li><p>初始化二位数组</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">type arrayname[][] = &#123;value&#125;;</span><br><span class="line"><span class="comment">// type 数组类型</span></span><br><span class="line"><span class="comment">// arrayname 数组名称，一个合法的标识符</span></span><br><span class="line"><span class="comment">// value 二维数组中各元素都代表一个一位数组</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> myarr[][] = &#123;&#123;<span class="number">12</span>,<span class="number">1</span>&#125;,&#123;<span class="number">23</span>,<span class="number">4</span>&#125;&#125;</span><br><span class="line"><span class="comment">// 初始化数组后，要明确数组的下标都是从0开始，例如：myarr[1][1]的值为4</span></span><br></pre></td></tr></table></figure></li><li><p>使用二维数组</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> my_project;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyArr</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">// 输出一个全部值为0的二维数组</span></span><br><span class="line"><span class="comment">// 使用new为数分配内存时，整数数组中各个元素的初始值都为0</span></span><br><span class="line"><span class="keyword">int</span> a[][]=<span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>][<span class="number">4</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;a.length;i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;a[i].length;j++) &#123;</span><br><span class="line">System.out.print(a[i][j]);</span><br><span class="line">&#125;System.out.println();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>训练1:模拟书柜放书</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> my_project;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyArr</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">String arr[][] = <span class="keyword">new</span> String[<span class="number">3</span>][<span class="number">2</span>];</span><br><span class="line">arr[<span class="number">0</span>][<span class="number">0</span>] = <span class="string">&quot;history&quot;</span>;</span><br><span class="line">arr[<span class="number">1</span>][<span class="number">0</span>] = <span class="string">&quot;economics&quot;</span>;</span><br><span class="line">arr[<span class="number">1</span>][<span class="number">1</span>] = <span class="string">&quot;science&quot;</span>;</span><br><span class="line">System.out.println(arr[<span class="number">0</span>][<span class="number">0</span>]);</span><br><span class="line">System.out.println(arr[<span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line">System.out.println(arr[<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="数组基本操作"><a href="#数组基本操作" class="headerlink" title="数组基本操作"></a>数组基本操作</h4><h5 id="遍历数组"><a href="#遍历数组" class="headerlink" title="遍历数组"></a>遍历数组</h5><h6 id="for循环遍历"><a href="#for循环遍历" class="headerlink" title="for循环遍历"></a>for循环遍历</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> array;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForArray</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 定义一个二位数组</span></span><br><span class="line"><span class="keyword">int</span> num[][] = <span class="keyword">new</span> <span class="keyword">int</span>[][] &#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">1</span>&#125;&#125;;</span><br><span class="line">        <span class="comment">// 循环外层数组</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;num.length;i++) &#123;</span><br><span class="line">            <span class="comment">// 循环内层数组</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">0</span>;x&lt;num[i].length;x++) &#123;</span><br><span class="line">                <span class="comment">// 打印每个元素</span></span><br><span class="line">System.out.print(num[i][x]);</span><br><span class="line">&#125;System.out.println();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="使用foreach语句遍历数组"><a href="#使用foreach语句遍历数组" class="headerlink" title="使用foreach语句遍历数组"></a>使用foreach语句遍历数组</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> array;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForeachArray</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> arr[][]= &#123;&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">3</span>,<span class="number">4</span>&#125;&#125;;</span><br><span class="line">System.out.println(<span class="string">&quot;数组中的元素有：&quot;</span>);</span><br><span class="line"><span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> x[]:arr) &#123;</span><br><span class="line">i++;</span><br><span class="line"><span class="keyword">int</span> j=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> e:x) &#123;</span><br><span class="line">j++;</span><br><span class="line"><span class="keyword">if</span>(i == arr.length &amp;&amp; j == x.length) &#123;</span><br><span class="line">System.out.print(e);</span><br><span class="line">&#125;<span class="keyword">else</span></span><br><span class="line">System.out.print(e + <span class="string">&quot;、&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="填充替换数组元素"><a href="#填充替换数组元素" class="headerlink" title="填充替换数组元素"></a>填充替换数组元素</h5><ol><li><p>使用Array类中的fill()方法，语法如下</p><p>fill(数组名,指定填充的第一个元素索引,指定填充的最好一个元素的索引,要分配给数组的值)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> array;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayFill</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> arr[] = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">5</span>];</span><br><span class="line">        <span class="comment">// 将数组arr的全部元素填充为8</span></span><br><span class="line">Arrays.fill(arr,<span class="number">8</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++) &#123;</span><br><span class="line">System.out.print(arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> array;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayFill</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> arr[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line"><span class="comment">// 替换数组中索引1-3的元素（不包含3）</span></span><br><span class="line">Arrays.fill(arr,<span class="number">1</span>,<span class="number">3</span>,<span class="number">8</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++) &#123;</span><br><span class="line">System.out.print(arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h5 id="对数组排序（sort）"><a href="#对数组排序（sort）" class="headerlink" title="对数组排序（sort）"></a>对数组排序（sort）</h5><ol><li>语法使用：Arrays.sort(数组名)，java中string类型的排序根据字典编排排序的，数字&gt;大写字母&gt;小写字母</li></ol><h5 id="复制数组（copyOf、copyOfRange）"><a href="#复制数组（copyOf、copyOfRange）" class="headerlink" title="复制数组（copyOf、copyOfRange）"></a>复制数组（copyOf、copyOfRange）</h5><ol><li><p>copyOf()：复制数组至指定长度</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> array;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayFill</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> arr[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">        <span class="comment">// 复制arr至新的9为数组newarr中</span></span><br><span class="line"><span class="keyword">int</span> newarr[] = Arrays.copyOf(arr, <span class="number">9</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;newarr.length;i++) &#123;</span><br><span class="line">System.out.print(newarr[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>copyOfRange()：将指定数组的指定长度复制到新数组中</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> array;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayFill</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> arr[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line"><span class="comment">// 将arr数组索引0-3的元素复制至新数组newarr(不包含3)</span></span><br><span class="line"><span class="keyword">int</span> newarr[] = Arrays.copyOfRange(arr,<span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;newarr.length;i++) &#123;</span><br><span class="line">System.out.print(newarr[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h5 id="查询数组（binarySearch）"><a href="#查询数组（binarySearch）" class="headerlink" title="查询数组（binarySearch）"></a>查询数组（binarySearch）</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> array;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinarySearch</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> arr[] = &#123;<span class="number">1</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">4</span>&#125;;</span><br><span class="line">        <span class="comment">// 二分查找前先排序</span></span><br><span class="line">Arrays.sort(arr);</span><br><span class="line">        <span class="comment">// 在数组arr中查找8，如果有这个元素则会返回索引值，没有则返回-（插入点+1）</span></span><br><span class="line"><span class="keyword">int</span> e = Arrays.binarySearch(arr, <span class="number">8</span>);</span><br><span class="line">System.out.println(e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> array;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinarySearch</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> arr[] = &#123;<span class="number">1</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">4</span>&#125;;</span><br><span class="line">Arrays.sort(arr);</span><br><span class="line">        <span class="comment">// 指定查找索引范围</span></span><br><span class="line"><span class="keyword">int</span> e = Arrays.binarySearch(arr,<span class="number">0</span>,<span class="number">2</span>,<span class="number">8</span>);</span><br><span class="line">System.out.println(e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="数组排序算法"><a href="#数组排序算法" class="headerlink" title="数组排序算法"></a>数组排序算法</h4><h5 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h5><ol><li><p>基本思想：对比相邻的元素值，如果满足条件则交换元素值</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> array;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BubbleSort</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> num[] = &#123;<span class="number">1</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">10</span>&#125;;</span><br><span class="line">        <span class="comment">// 外层控制循环次数</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;num.length;i++) &#123;</span><br><span class="line">            <span class="comment">// 内存循环对比相邻数据</span></span><br><span class="line">            <span class="comment">// 每次循环后缩短循环次数，第一次循环结束后最大的值已经在最后，就没有对比的必要，依次类推</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;num.length-i;j++) &#123;</span><br><span class="line"><span class="keyword">if</span>(num[j]&gt;num[j+<span class="number">1</span>]) &#123;</span><br><span class="line"><span class="keyword">int</span> temp = num[j];</span><br><span class="line">num[j]=num[j+<span class="number">1</span>];</span><br><span class="line">num[j+<span class="number">1</span>]=temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i:num) &#123;</span><br><span class="line">System.out.print(i+<span class="string">&quot;、&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h5 id="直接排序"><a href="#直接排序" class="headerlink" title="直接排序"></a>直接排序</h5><h5 id="反转排序"><a href="#反转排序" class="headerlink" title="反转排序"></a>反转排序</h5>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>电商性能测试实战</title>
      <link href="/2022/02/24/2022-2-24-%E7%94%B5%E5%95%86%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%AE%9E%E6%88%98/"/>
      <url>/2022/02/24/2022-2-24-%E7%94%B5%E5%95%86%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<h4 id="压测实施步骤："><a href="#压测实施步骤：" class="headerlink" title="压测实施步骤："></a>压测实施步骤：</h4><p>1、性能需求指标</p><ul><li>时间指标：响应耗时，常见场景就是2.5.8原则，而当为电商下单，加入购物车如果响应时间达到500毫秒、1秒已经算是很大的延迟了，所以我们需要结合我们实际的场景中我们对性能测试的需求</li><li>容量指标：同时承载多少人的并发，结合我们的用户和订单量来实际给出指标</li><li>资源利用指标：一般是需要我们与运维来同步，什么样的内存，cpu占用量是我们可以接受的范围内，以这样的一个指标来达成我们性能测试的目的</li></ul><h4 id="2、性能模型"><a href="#2、性能模型" class="headerlink" title="2、性能模型"></a>2、性能模型</h4><p>压测场景要尽可能还原我们的用户实际使用场景的</p><ul><li>业务模型：用户实际的操作流程，那我们的业务模型就需要与用户的操作流程相匹配</li></ul><h4 id="3、性能方案"><a href="#3、性能方案" class="headerlink" title="3、性能方案"></a>3、性能方案</h4><ul><li>测试环境：独立干净的环境，配置尽可能与线上相同</li><li>测试数据：测试数据怎么造，需要什么体量的数据才能满足你的业务模型测试需求</li><li>测试模型：业务模型</li><li>性能指标</li><li>压力策略：策略一般为一个递增策略，例如我们先做多少并发预计QPS(并发量/响应时间)，持续多久之后开始做递增，递增多少预计QPS为多少</li><li>准入准出</li></ul><h4 id="4、性能监控"><a href="#4、性能监控" class="headerlink" title="4、性能监控"></a>4、性能监控</h4><ul><li>客户端的一些性能指标监控</li><li>服务端的监控（查看日志）</li></ul><h4 id="5、性能场景执行"><a href="#5、性能场景执行" class="headerlink" title="5、性能场景执行"></a>5、性能场景执行</h4><ul><li>场景执行</li></ul><h4 id="6、性能结果-报告"><a href="#6、性能结果-报告" class="headerlink" title="6、性能结果/报告"></a>6、性能结果/报告</h4><ul><li>场景结果整理</li><li>监控结果整理</li><li>性能整体分析</li><li>性能结论</li><li>优化建议</li></ul>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 性能测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>面试项目设计</title>
      <link href="/2022/02/23/2022-2-23-%E9%9D%A2%E8%AF%95%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1/"/>
      <url>/2022/02/23/2022-2-23-%E9%9D%A2%E8%AF%95%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h3 id="毕业设计"><a href="#毕业设计" class="headerlink" title="毕业设计"></a>毕业设计</h3><ul><li>软技能：沟通能力、文档能力</li><li>计算机知识：协议、算法、linux</li><li><strong>项目经验</strong>：介绍的好很加分</li></ul><h3 id="项目经验"><a href="#项目经验" class="headerlink" title="项目经验"></a>项目经验</h3><ol><li><p>项目背景</p><p>由于淘力网主要的功能模块的前端页面UI改变很小，而且老的接口变动也很小，经过权衡后决定开始做自动化</p></li><li><p>业务架构</p><p>后端为PHP，前端为vus.js，数据库为mysql。开发初期后端回给前端提供一份接口文档，而前端则根据这份接口文档去进行页面代码的编写，前端也可以直接根据文档做mock数据进行调试，当后端代码完成后，则可以开始前后联调</p></li><li><p>框架需要达到的一些指标</p><p>1、首先需要与jenkins持续集成，让其他开发人员也能很方便的执行</p><p>2、需要输出日志，出现用例失败后可快速定位到对应接口</p><p>3、还要输出可视化的测试报告以供项目经理查看用例执行情况。</p></li><li><p>自动化设计方案</p><p>1、首先我们对业务进行梳理，看看哪些页面适合做UI自动化，将主要功能模块划分出优先级，把用户使用频率比较多同时页面UI变动比较小的开始做 </p><p>2、我采用的技术框架是python+pytest+allure </p><p>3、技术架构大概</p><p>page_object包,： base_page，base_page里面我会封装浏览器驱动方法，selenium的元素操作的方法二次封装，比如send_keys,find_element,click等，然后还有一些页面的page_object ，将每个页面都单独写成一个page类，且这个page类继承base_page，page里面的每个函数中编写该页面的一个操作动作并return 一个page对象或者是一个断言数据 </p><p> test_case包，编写测试用例，使用pytest用例编写方式，set_up中写一个实例化浏览器的对象，用例中直接采用链式调用的写法，最后做断言 - test_data：存放一些yaml测试数据</p><p>config：存放配置文件，环境地址，数据库连接</p><p>log：封装log日志方法，存放日志文件</p><p>tool：工具类，写一个公用方法，例如取文件的绝对路径，上传文件，读取yaml文件的方法 </p><p>result：存放allure的报告文件 </p><p>pytest.ini文件：存放一些前置方法，以供测试用例可以直接调用，存放二次开发的方法，例如开发过程中如果一个用例有多条测试数据的时候会给数据一个ids，当ids为中文时，默认是会显示乱码，所以我们在pytest收集测试用例之前对pytest方法进行重写，改变编码格式即可解决该问题</p></li><li><p>可优化的点</p><p>1、UI自动化分布式执行的时候，账号问题，分布式的时候相互挤账号，目前还没有找到很合适的方案</p><p>2、接口，之前一直在推进后端用swagger来写接口文档，我们这边就可以利用swagger的自动生成测试用例，来更方便的做自动化</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 面试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 面试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cookies有多条key时，使用requests.cookies只能获取到一条cookie</title>
      <link href="/2022/01/25/2022-1-25-cookies%E6%9C%89%E5%A4%9A%E6%9D%A1key%E6%97%B6%EF%BC%8C%E4%BD%BF%E7%94%A8requests.cookies%E5%8F%AA%E8%83%BD%E8%8E%B7%E5%8F%96%E5%88%B0%E4%B8%80%E6%9D%A1cookie/"/>
      <url>/2022/01/25/2022-1-25-cookies%E6%9C%89%E5%A4%9A%E6%9D%A1key%E6%97%B6%EF%BC%8C%E4%BD%BF%E7%94%A8requests.cookies%E5%8F%AA%E8%83%BD%E8%8E%B7%E5%8F%96%E5%88%B0%E4%B8%80%E6%9D%A1cookie/</url>
      
        <content type="html"><![CDATA[<h4 id="问题：postman可以看到接口返回的cookies有两条，但是requests-cookies-方法只能获取到第一条"><a href="#问题：postman可以看到接口返回的cookies有两条，但是requests-cookies-方法只能获取到第一条" class="headerlink" title="问题：postman可以看到接口返回的cookies有两条，但是requests.cookies()方法只能获取到第一条"></a>问题：postman可以看到接口返回的cookies有两条，但是requests.cookies()方法只能获取到第一条</h4><p><img src="https://s2.loli.net/2022/01/25/xXuPJnLsAvCiB3K.png" alt="image-20220125132504400"></p><p><img src="https://s2.loli.net/2022/01/25/r26YRBS8mFeM7ak.png" alt="image-20220125132533880"></p><h4 id="解决方法：还有一个cookies在请求参数里面可以获取-res-request-headers-‘Cookie’"><a href="#解决方法：还有一个cookies在请求参数里面可以获取-res-request-headers-‘Cookie’" class="headerlink" title="解决方法：还有一个cookies在请求参数里面可以获取 res.request.headers[‘Cookie’]"></a>解决方法：还有一个cookies在请求参数里面可以获取 res.request.headers[‘Cookie’]</h4><p><img src="https://s2.loli.net/2022/01/25/DjSqKmtxPy3s1nd.png" alt="image-20220125141144423"></p>]]></content>
      
      
      <categories>
          
          <category> 自动化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> requests </tag>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>格力-面试问题复盘</title>
      <link href="/2022/01/21/2022-1-21-%E6%A0%BC%E5%8A%9B-%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E5%A4%8D%E7%9B%98/"/>
      <url>/2022/01/21/2022-1-21-%E6%A0%BC%E5%8A%9B-%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E5%A4%8D%E7%9B%98/</url>
      
        <content type="html"><![CDATA[<h3 id="1、第一轮技术面"><a href="#1、第一轮技术面" class="headerlink" title="1、第一轮技术面"></a>1、第一轮技术面</h3><ol><li><h4 id="如何理解po模型"><a href="#如何理解po模型" class="headerlink" title="如何理解po模型"></a>如何理解po模型</h4><ul><li><p>通过面向对象的方式，把页面定位和页面操作动作，与测试逻辑分开</p></li><li><p>提高代码的可读性，减少代码的重复，提高代码可维护性</p></li><li><p>页面元素如果有变化，只需要维护每个page</p></li><li><p>测试步骤有变化，只需要维护case</p></li></ul></li><li><h4 id="如何搭建你的测试框架"><a href="#如何搭建你的测试框架" class="headerlink" title="如何搭建你的测试框架"></a>如何搭建你的测试框架</h4><ul><li><p>首先根据实际项目组实际情况，综合项目经理的意见，来决定优先做接口还是UI自动化</p></li><li><p>我自己的想法是，如果对数据很敏感，很重视，可以优先做接口自动化，如果对用户体验要求比较高，可以优先考虑做UI自动化</p></li><li><p>如果优先开始做接口自动化，首先我会先熟悉需求，熟悉功能模块，然后结合api文档和抓包来分析接口逻辑</p></li><li><p>分析的差不多后，我会先在postman把需求自动化的接口全部调试一下</p></li><li><p>然后开始简单写一下接口自动化文本用例</p></li><li><p>然后开始搭建框架</p></li><li><p>新增一个protocol包，里面放入封装的协议方法，例如requests方法的封装，或者还有其他的网络协议方法的封装</p></li><li><p>再新增一个api包，里面存放api的描述类，这里面存放功能模板所需要api，继承protocol，但不牵扯测试数据和业务逻辑的关联，只是接口的描述</p></li><li><p>再新增一个test_data包，里面存放测试数据</p></li><li><p>新增一个utlis包，存放封装的工具类，log类，yaml读取方法，jsonpath解析json方法，get_path获取项目绝对路径方法，pymysql连接mysql方法</p></li><li><p>新增test_case包，存放测试用例</p></li><li><p>新增result包，存放测试报告</p></li><li><p>新增logs包，存放日志文件</p></li><li><p>编写测试用例，慢慢完善测试框架，差什么补什么，</p></li><li><p>推到git仓库</p></li><li><p>集成至jenkins</p></li></ul></li><li><h4 id="测试框架搭建过程中，有没有遇到什么问题？举例说明"><a href="#测试框架搭建过程中，有没有遇到什么问题？举例说明" class="headerlink" title="测试框架搭建过程中，有没有遇到什么问题？举例说明"></a>测试框架搭建过程中，有没有遇到什么问题？举例说明</h4><ul><li>搭建UI自动化框架时，我是把driver初始化放在basepage，然后其他页面操作的方法都继承basepage，但是在第二条测试用例的时候会出现重复实例化的问题，然后产生多个浏览器，最后解决办法是在driver初始化的方法中添加形参base_driver=None，并加一个判断，当形参为空时做初始化driver的操作，当形参不为空时，base_driver直接赋值self.driver</li></ul></li><li><h4 id="pytest的前置与后置"><a href="#pytest的前置与后置" class="headerlink" title="pytest的前置与后置"></a>pytest的前置与后置</h4><ul><li><p>pytest.fixture(scope=)来指定作用域</p></li><li><p>或者直接写setup函数来指定作用域</p></li></ul></li><li><h4 id="pytest与unittest的区别"><a href="#pytest与unittest的区别" class="headerlink" title="pytest与unittest的区别"></a>pytest与unittest的区别</h4><ul><li><p>用例的前置：unittest使用setup/teardown来实现，作用于全部用例，pytest可以使用fixtrue来标识作用域也可以自定义</p></li><li><p>参数化：unittest必须通过ddt库来实现，pytest可以通过fixture或者pytest.mark.parametrize来实现</p></li><li><p>报告生成：unittest使用htmltestrun，pytest可以使用pytest-html、allure</p></li><li><p>总结：unittest支持插件少，兼容性差；pytest可以兼容unittest风格用例，插件丰富，用例编写格式简单，兼容性好</p></li></ul></li><li><h4 id="pytest参数化实现方法"><a href="#pytest参数化实现方法" class="headerlink" title="pytest参数化实现方法"></a>pytest参数化实现方法</h4><ul><li><p>@pytest.fixture()</p></li><li><p>@pytest.mark.parametrize()</p></li></ul></li><li><h4 id="pytest随机执行用例的命令"><a href="#pytest随机执行用例的命令" class="headerlink" title="pytest随机执行用例的命令"></a>pytest随机执行用例的命令</h4><ul><li>pytest-random-order 插件</li><li>执行命令pytest –random-order</li></ul></li><li><h4 id="UI自动化的轴定位"><a href="#UI自动化的轴定位" class="headerlink" title="UI自动化的轴定位"></a>UI自动化的轴定位</h4><ul><li>xpath父子关系，兄弟关系，孙子关系定位</li></ul></li><li><h4 id="接口脚本返回为null，如何排查问题"><a href="#接口脚本返回为null，如何排查问题" class="headerlink" title="接口脚本返回为null，如何排查问题"></a>接口脚本返回为null，如何排查问题</h4><ul><li>首先使用postman调试，如果postman调试也是返回null，那就需要去抓包分析一下</li><li>postman调试正常的情况下，要对比脚本与postman的请求url，请求方式，请求参数data，headers，cookies是否一致</li><li>完全一致的情况下，再查看代码逻辑是否有问题</li></ul></li><li><h4 id="自动化框架如何连接的数据库"><a href="#自动化框架如何连接的数据库" class="headerlink" title="自动化框架如何连接的数据库"></a>自动化框架如何连接的数据库</h4><ul><li>pymysql库</li></ul></li><li><h4 id="json与字典dict的区别"><a href="#json与字典dict的区别" class="headerlink" title="json与字典dict的区别"></a>json与字典dict的区别</h4><ul><li>dict为python的一种数据类型，而json为字符串</li><li>json的key是有序可重复的，dict的key不可重复</li><li>dict可以嵌套元组，而json里只有数组</li></ul></li></ol><h3 id="2、第二轮技术面-侧重管理"><a href="#2、第二轮技术面-侧重管理" class="headerlink" title="2、第二轮技术面(侧重管理)"></a>2、第二轮技术面(侧重管理)</h3><ol><li><h4 id="对敏捷开发的理解"><a href="#对敏捷开发的理解" class="headerlink" title="对敏捷开发的理解"></a>对敏捷开发的理解</h4></li><li><h4 id="如何管理的手下的测试人员"><a href="#如何管理的手下的测试人员" class="headerlink" title="如何管理的手下的测试人员"></a>如何管理的手下的测试人员</h4></li><li><h4 id="敏捷开发如何保证测试质量"><a href="#敏捷开发如何保证测试质量" class="headerlink" title="敏捷开发如何保证测试质量"></a>敏捷开发如何保证测试质量</h4><ul><li><p>开发增加单元测试覆盖、进行代码扫描</p></li><li><p>测试提前介入，进行接口测试</p></li><li><p>前后端联调完成后，需要进行P0测试</p></li><li><p>测试进行功能测试</p></li><li><p>上线完成后，准备做新功能的UI自动化</p></li></ul></li><li><h4 id="生产出现性能问题，测试环境无法重现，研发优化后，你该如何测试？"><a href="#生产出现性能问题，测试环境无法重现，研发优化后，你该如何测试？" class="headerlink" title="生产出现性能问题，测试环境无法重现，研发优化后，你该如何测试？"></a>生产出现性能问题，测试环境无法重现，研发优化后，你该如何测试？</h4><ul><li>首先跟研发进行沟通，确定问题出现的原因</li><li>通过在测试环境，模拟生产出现的场景，看能不能复现</li><li>可以复现的话则正常测试</li><li>不能复现则根据开发修改后的范围评估，进行测试</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> 面试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 面试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac使用的tips</title>
      <link href="/2022/01/20/2022-1-20-Mac%E4%BD%BF%E7%94%A8%E7%9A%84tips/"/>
      <url>/2022/01/20/2022-1-20-Mac%E4%BD%BF%E7%94%A8%E7%9A%84tips/</url>
      
        <content type="html"><![CDATA[<h3 id="1、切换root用户"><a href="#1、切换root用户" class="headerlink" title="1、切换root用户"></a>1、切换root用户</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br></pre></td></tr></table></figure><h3 id="2、查看本机ip"><a href="#2、查看本机ip" class="headerlink" title="2、查看本机ip"></a>2、查看本机ip</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig | grep &quot;inet&quot;</span><br></pre></td></tr></table></figure><p>3、chromedriver存放路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Mac </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python项目结构树生成</title>
      <link href="/2022/01/20/2022-1-20-python%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%A0%91%E7%94%9F%E6%88%90/"/>
      <url>/2022/01/20/2022-1-20-python%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%A0%91%E7%94%9F%E6%88%90/</url>
      
        <content type="html"><![CDATA[<h3 id="安装tree工具，"><a href="#安装tree工具，" class="headerlink" title="安装tree工具，"></a>安装tree工具，</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install tree</span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># n表示目录层级</span><br><span class="line">tree -L n</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python项目生成依赖文件清单</title>
      <link href="/2022/01/20/2022-1-20-python%E9%A1%B9%E7%9B%AE%E7%94%9F%E6%88%90%E4%BE%9D%E8%B5%96%E6%96%87%E4%BB%B6%E6%B8%85%E5%8D%95/"/>
      <url>/2022/01/20/2022-1-20-python%E9%A1%B9%E7%9B%AE%E7%94%9F%E6%88%90%E4%BE%9D%E8%B5%96%E6%96%87%E4%BB%B6%E6%B8%85%E5%8D%95/</url>
      
        <content type="html"><![CDATA[<h3 id="安装第三方库"><a href="#安装第三方库" class="headerlink" title="安装第三方库"></a>安装第三方库</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pipreqs</span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当前项目下使用</span></span><br><span class="line">pipreqs ./</span><br><span class="line"><span class="comment"># 上面命令不能用时，使用</span></span><br><span class="line">pipreqs ./ --encoding=utf-<span class="number">8</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试策略：自动化的思考</title>
      <link href="/2022/01/20/2022-1-20-%E6%B5%8B%E8%AF%95%E7%AD%96%E7%95%A5%EF%BC%9A%E8%87%AA%E5%8A%A8%E5%8C%96%E7%9A%84%E6%80%9D%E8%80%83/"/>
      <url>/2022/01/20/2022-1-20-%E6%B5%8B%E8%AF%95%E7%AD%96%E7%95%A5%EF%BC%9A%E8%87%AA%E5%8A%A8%E5%8C%96%E7%9A%84%E6%80%9D%E8%80%83/</url>
      
        <content type="html"><![CDATA[<h3 id="测试策略"><a href="#测试策略" class="headerlink" title="测试策略"></a>测试策略</h3><p>概念：测试策略并不是通用的一个测试方案，而是根据项目实际情况来指定一个可行度比较高的测试流程，逐渐提升内部测试效率</p><ul><li>单元测试：研发保证，QA监督审计<ul><li>与研发同事沟通，增加代码扫描工具、完善单元测试覆盖率，优化代码提交流程，</li><li>比如新功能代码必须在分支上冒烟测试通过才能合到master，测试可以提供P0冒烟测试用例给到研发，减少新功能直接发布后基础功能都不完善导致的前期沟通成本</li></ul></li><li>集成测试：通过接口测试保证</li><li>系统测试：接口自动化测试</li><li>验收测试：UI自动化测试</li></ul><h3 id="参考下面的思考来制定公司的测试方案："><a href="#参考下面的思考来制定公司的测试方案：" class="headerlink" title="参考下面的思考来制定公司的测试方案："></a>参考下面的思考来制定公司的测试方案：</h3><h4 id="1、什么时候做自动化"><a href="#1、什么时候做自动化" class="headerlink" title="1、什么时候做自动化"></a>1、什么时候做自动化</h4><ul><li>项目有比较多的在线用户时，做自动化可以增强用户的体验</li><li>产品迭代速度十分的快，手工测试时间非常紧张</li><li>公司内部测试人员有自动化技术储备</li></ul><h4 id="2、什么时候做UI、什么时候做接口"><a href="#2、什么时候做UI、什么时候做接口" class="headerlink" title="2、什么时候做UI、什么时候做接口"></a>2、什么时候做UI、什么时候做接口</h4><ul><li>对数据准确性十分敏感的产品，可以考虑优先做接口自动化</li><li>对用户体验要求比较高的产品，则优先考虑做UI自动化，因为只有UI自动化才是真正能还原并模拟用户的实际操作</li></ul><h4 id="3、UI自动化有没有意义？耗时长，回报"><a href="#3、UI自动化有没有意义？耗时长，回报" class="headerlink" title="3、UI自动化有没有意义？耗时长，回报"></a>3、UI自动化有没有意义？耗时长，回报</h4><ul><li>对于一些用户体验要求十分高的产品，UI自动化是很有必要的，因为只有UI自动化才是真正能还原并模拟用户的实际操作</li></ul><h4 id="4、接口自动化是否需要全字段校验？"><a href="#4、接口自动化是否需要全字段校验？" class="headerlink" title="4、接口自动化是否需要全字段校验？"></a>4、接口自动化是否需要全字段校验？</h4><ul><li>如果项目人员配置足够，校验可以越详细越好，如果人员都不足，可以先保证接口正常功能的场景校验</li><li>如果为内部支付接口或者调用第三方api的接口，可以尽量做全字段校验，因为第三方接口自己公司是没办法把控的，如果第三方随意调整了响应数据，很有可能对项目造成很严重的问题</li><li>大部分情况来说，主要针对对业务流程有影响的字段做校验就可以了，不需要全字段做校验</li></ul>]]></content>
      
      
      <categories>
          
          <category> 自动化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 自动化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>appium自动化</title>
      <link href="/2022/01/16/2022-1-16-appium/"/>
      <url>/2022/01/16/2022-1-16-appium/</url>
      
        <content type="html"><![CDATA[<h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><ul><li><p>JDK</p></li><li><p>SDK</p></li><li><p>appium desktop</p></li><li><p>appium-python-client</p><p>安装方法：pip install appium-python-client</p></li><li><p>安卓模拟器/真机</p></li><li><p>appium server版</p></li></ul><h3 id="adb用例录制"><a href="#adb用例录制" class="headerlink" title="adb用例录制"></a>adb用例录制</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 查看当前连接的设备</span><br><span class="line">adb devices</span><br><span class="line"># 安装应用</span><br><span class="line">adb shell install 包路径</span><br><span class="line"># 查看包名/页面名</span><br><span class="line">adb logcat|grep -i displayed</span><br><span class="line"># 获取当前界面元素</span><br><span class="line">adb shell dumpsys activity top</span><br><span class="line"># 启动应用</span><br><span class="line">adb shell am start -W -n 包名/页面名</span><br></pre></td></tr></table></figure><h3 id="元素定位-隐式等待"><a href="#元素定位-隐式等待" class="headerlink" title="元素定位/隐式等待"></a>元素定位/隐式等待</h3><h4 id="用例的组成"><a href="#用例的组成" class="headerlink" title="用例的组成"></a>用例的组成</h4><ul><li>导入依赖</li><li>capabilities设置</li><li>初始化driver</li><li>隐式等待，增加用例稳定</li><li>元素定位于操作。find+action</li><li>断言 assert</li></ul><h4 id="元素定位"><a href="#元素定位" class="headerlink" title="元素定位"></a>元素定位</h4><ul><li>id方式定位：find_element_by_id(resource-id)</li><li>accessibility_id方式定位：find_element_by_accessibility(content-desc)</li></ul><h4 id="等待方式"><a href="#等待方式" class="headerlink" title="等待方式"></a>等待方式</h4><ul><li>强制等待time.sleep()</li><li>隐式等待(全局等待)</li><li>显式等待(单个元素等待)</li></ul><h3 id="android基础知识"><a href="#android基础知识" class="headerlink" title="android基础知识"></a>android基础知识</h3><h4 id="android七大布局"><a href="#android七大布局" class="headerlink" title="android七大布局"></a>android七大布局</h4><ul><li>线性布局</li><li>相对布局</li><li>帧布局</li><li>绝对布局</li><li>表格布局</li><li>网格布局</li><li>约束布局</li></ul><h4 id="四大组件"><a href="#四大组件" class="headerlink" title="四大组件"></a>四大组件</h4><ul><li>activity：与用户交互的可视化界面</li><li>service：实现程序后台运行的解决方案</li><li>content provider：内容提供者，提供程序所需要的数据</li><li>broadcast receiver：广播接收器，坚挺外部事件的到来（比如来电）</li></ul><h4 id="常用控件"><a href="#常用控件" class="headerlink" title="常用控件"></a>常用控件</h4><ul><li>TextView：文本控件</li><li>EditText：可编辑文本控件</li><li>Button：按钮</li><li>ImageButton：图片按钮</li><li>ToggleButton：开关按钮</li><li>ImageView：图片控件</li><li>CheckBox：复选框控件</li><li>RadioButton：单选框控件</li></ul><p>​        注意点：android应用的层级结构与html不一样，是一个定制的xml</p><h4 id="定位方式"><a href="#定位方式" class="headerlink" title="定位方式"></a>定位方式</h4><ul><li>id定位</li><li>accessibility_id定位</li><li>xpath定位</li></ul><h4 id="定位工具"><a href="#定位工具" class="headerlink" title="定位工具"></a>定位工具</h4><p>​            android sdk自带工具：uiautomatorviewer</p><h3 id="交互"><a href="#交互" class="headerlink" title="交互"></a>交互</h3><h4 id="控件交互"><a href="#控件交互" class="headerlink" title="控件交互"></a>控件交互</h4><ul><li>.click() 点击</li><li>.send_keys() 输入</li><li>.set_value() 设置元素的值</li><li>.clear() 清除操作</li><li>.displayed() 是否可见</li><li>.is_enabled() 是否可用</li><li>.is_selected() 是否被选中</li><li>get_attribute(属性名) 获取属性值</li><li>.location 获取元素坐标</li><li>.size 获取元素尺寸</li></ul><h4 id="触控交互（TouochAction）"><a href="#触控交互（TouochAction）" class="headerlink" title="触控交互（TouochAction）"></a>触控交互（TouochAction）</h4><ul><li>self.driver.get_window_size()  获取设备尺寸</li><li>press()  点按，点按后必须有释放</li><li>move_to()  移动</li><li>release()  释放</li><li>perform()  执行，一切动作完后，需要跟上perform方法才能执行</li></ul><h3 id="高级定位技巧"><a href="#高级定位技巧" class="headerlink" title="高级定位技巧"></a>高级定位技巧</h3><h4 id="xpath定位进阶"><a href="#xpath定位进阶" class="headerlink" title="xpath定位进阶"></a>xpath定位进阶</h4><ul><li>父节点定位子节点</li><li>子节点定位父节点</li><li>子节点定位兄弟节点</li><li>爷爷节点定位孙子节点</li></ul><h4 id="uiautomator定位"><a href="#uiautomator定位" class="headerlink" title="uiautomator定位"></a>uiautomator定位</h4><ul><li>滚动查找</li><li>父子关系查找</li><li>兄弟关系查找</li></ul><h3 id="断言方法"><a href="#断言方法" class="headerlink" title="断言方法"></a>断言方法</h3><ul><li>assert</li><li>Hamcrest断言</li></ul>]]></content>
      
      
      <categories>
          
          <category> 自动化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> appium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WEditor工具安装</title>
      <link href="/2022/01/16/2022-1-16-WEditor%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85/"/>
      <url>/2022/01/16/2022-1-16-WEditor%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装uiautomator2</span></span><br><span class="line">pip install --pre -U uiautomator2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装weditor</span></span><br><span class="line">pip install weditor</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化手机设备环境</span></span><br><span class="line">python -m uiautomator2 init <span class="comment"># 手机出现ATX小汽车app</span></span><br></pre></td></tr></table></figure><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m weditor</span><br></pre></td></tr></table></figure><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><ul><li>安装完weditor后，手机上自动安装的ATX软件会跟appium起冲突</li><li>运行appium时需要把ATX软件卸载</li></ul>]]></content>
      
      
      <categories>
          
          <category> 自动化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> appium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>接口api基础</title>
      <link href="/2022/01/15/2021-01-15-%E6%8E%A5%E5%8F%A3api%E5%9F%BA%E7%A1%80/"/>
      <url>/2022/01/15/2021-01-15-%E6%8E%A5%E5%8F%A3api%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h4 id="get与post"><a href="#get与post" class="headerlink" title="get与post"></a>get与post</h4><ul><li>get是向服务端请求数据，post则是向服务端提交数据</li><li>get请求的url中传送的参数是有长度限制的，而post没有限制</li><li>post比get要安全，因为get请求参数直接暴露在url上，而post在body中</li></ul><h4 id="cookie、session与token"><a href="#cookie、session与token" class="headerlink" title="cookie、session与token"></a>cookie、session与token</h4><ul><li>cookie：浏览器接受服务器的set-cookie指令，并把cookie保存在电脑上，每个网站保存的cookie只作用于自己的网站</li><li>session：数据存储在服务端，只把关联数据的一个加密串放在cookie中标记</li><li>token：用户请求时附带的请求字段，用于验证身份与权限</li></ul><h4 id="常见的错误码"><a href="#常见的错误码" class="headerlink" title="常见的错误码"></a>常见的错误码</h4><ul><li>200：请求成功</li><li>301：重定向</li><li>404：请求资源不存在</li><li>500：服务端错误</li></ul><h4 id="协议代理工具"><a href="#协议代理工具" class="headerlink" title="协议代理工具"></a>协议代理工具</h4><h5 id="postman主要功能"><a href="#postman主要功能" class="headerlink" title="postman主要功能"></a>postman主要功能</h5><ul><li><p>设置cookie</p></li><li><p>接口断言</p></li><li><p>参数之间的传递</p></li><li><p>数据驱动</p></li><li><p>设置变量</p></li></ul><h5 id="curl命令"><a href="#curl命令" class="headerlink" title="curl命令"></a>curl命令</h5><ul><li>将请求真实的还原出来</li><li>自带认证信息，脱离浏览器直接执行</li><li>方便重新执行，修改调试参数，修改脚本</li></ul><h6 id="curl相关命令参数：https-ceshiren-com-t-topic-1065"><a href="#curl相关命令参数：https-ceshiren-com-t-topic-1065" class="headerlink" title="curl相关命令参数：https://ceshiren.com/t/topic/1065"></a>curl相关命令参数：<a href="https://ceshiren.com/t/topic/1065">https://ceshiren.com/t/topic/1065</a></h6><h5 id="mitmproxy"><a href="#mitmproxy" class="headerlink" title="mitmproxy"></a>mitmproxy</h5><h6 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">pip install mitmproxy==5.2.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证安装</span></span><br><span class="line">mitmproxy --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定端口8999启动</span></span><br><span class="line"><span class="comment"># 本机wifi设置中勾线代理，并开启http、https代理指定8999端口</span></span><br><span class="line">mitmproxy -p 8999 </span><br><span class="line"></span><br><span class="line"><span class="comment"># 浏览器输入mitm.it，安装证书，安装完成后设置始终信任证书</span></span><br></pre></td></tr></table></figure><h6 id="mitmproxy-mock实战"><a href="#mitmproxy-mock实战" class="headerlink" title="mitmproxy mock实战"></a>mitmproxy mock实战</h6><blockquote><p>主要包含三大组件：mitmproxy、mitmweb、mitmdump</p></blockquote><ul><li>实现maplocal</li><li>实现rewrite</li></ul><h5 id="charles"><a href="#charles" class="headerlink" title="charles"></a>charles</h5><h6 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h6><ul><li>抓包端口确认，打开proxy settings，查看端口</li></ul><p><img src="https://s2.loli.net/2022/01/15/X9CpITVWoSOuPUY.png" alt="image-20220115134037925"></p><ul><li>本地证书安装，始终信任</li></ul><p><img src="https://s2.loli.net/2022/01/15/91Dm4UwcdN3K6yb.png" alt="image-20220115134123246"></p><ul><li>charles ssl proxying settings 设置https端口号443</li></ul><p><img src="https://s2.loli.net/2022/01/15/XPu5kodcfAmJR6s.png" alt="image-20220115134207103"></p><h6 id="移动端配置"><a href="#移动端配置" class="headerlink" title="移动端配置"></a>移动端配置</h6><ul><li>统一wifi下，修改wifi设置，添加代理服务器</li><li>浏览器输入chls.pro/ssl，安装证书</li><li>charles弹窗点击allow</li></ul><h6 id="移动端注意"><a href="#移动端注意" class="headerlink" title="移动端注意"></a>移动端注意</h6><ul><li>安卓6.0以上，不支持证书安装</li><li>IOS10.0以上需要手动信任证书</li></ul><h6 id="rewrite"><a href="#rewrite" class="headerlink" title="rewrite"></a>rewrite</h6><ul><li>charles可以修改请求参数或者修改响应数据</li><li>动态修改响应数据</li><li>解决跨域问题</li></ul><p><img src="https://s2.loli.net/2022/01/15/jwEol98BWzOxcaJ.png" alt="image-20220115134314156"></p><h6 id="map-local"><a href="#map-local" class="headerlink" title="map local"></a>map local</h6><ul><li>客户端发起请求，charles接受后不发送给服务端，而是直接返回一个本地文件当做响应数据</li><li>修改一些复杂的响应数据时使用</li></ul><p><img src="https://s2.loli.net/2022/01/15/BiUTpMZldV6R5A4.png" alt="image-20220115134351624"></p><h6 id="map-remote"><a href="#map-remote" class="headerlink" title="map remote"></a>map remote</h6><ul><li>将原本需要请求服务端A的请求转发至服务端B，转发请求</li><li>多套测试环境切换时可以使用</li></ul><p><img src="https://s2.loli.net/2022/01/15/UqrIBj7EJgda3Oz.png" alt="image-20220115134525454"></p>]]></content>
      
      
      <categories>
          
          <category> 接口 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> charles </tag>
            
            <tag> curl </tag>
            
            <tag> postman </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>接口自动化</title>
      <link href="/2022/01/15/2021-12-17-%E6%8E%A5%E5%8F%A3%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
      <url>/2022/01/15/2021-12-17-%E6%8E%A5%E5%8F%A3%E8%87%AA%E5%8A%A8%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h3 id="接口自动化框架介绍"><a href="#接口自动化框架介绍" class="headerlink" title="接口自动化框架介绍"></a>接口自动化框架介绍</h3><ul><li>python-requests：实现python调用http请求</li><li>allure：生成测试报告</li><li>pytest：测试用例框架</li></ul><h3 id="接口用例编写"><a href="#接口用例编写" class="headerlink" title="接口用例编写"></a>接口用例编写</h3><h5 id="基本api功能测试"><a href="#基本api功能测试" class="headerlink" title="基本api功能测试"></a>基本api功能测试</h5><ul><li>冒烟用例</li><li>正向流程覆盖</li></ul><h5 id="基于输入域的测试"><a href="#基于输入域的测试" class="headerlink" title="基于输入域的测试"></a>基于输入域的测试</h5><ul><li>边界值</li><li>特殊字符</li><li>必填参数</li><li>接口幂等：多次发起同样的操作，结果需要是不同的</li><li>组合参数校验</li><li>参数类型校验</li></ul><h5 id="线程安全测试"><a href="#线程安全测试" class="headerlink" title="线程安全测试"></a>线程安全测试</h5><ul><li>并发测试</li><li>分布式测试</li><li>数据库读写安全测试</li></ul><h3 id="接口PO封装思想"><a href="#接口PO封装思想" class="headerlink" title="接口PO封装思想"></a>接口PO封装思想</h3><ul><li>用例之间不应该有依赖，需要都能单独执行</li><li>base_api：完成测试框架中工具的封装，requests、jsonpath等</li><li>api：实现对每个接口的描述，与业务无关，只单纯描述接口</li><li>test_case：组合业务逻辑，单个界面的字段校验，断言</li></ul><h3 id="扩展内容"><a href="#扩展内容" class="headerlink" title="扩展内容"></a>扩展内容</h3><h5 id="jsonshema"><a href="#jsonshema" class="headerlink" title="jsonshema"></a>jsonshema</h5><blockquote><p>把上一次接口响应数据生成一个jsonschema数据，第二次校验时会拿到最新的响应数据与这个jsonschema做比对，比较数据结构，字段类型有没有发生变化</p></blockquote><h6 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h6><ul><li><p>导入genson库，将json数据存放为jsonschema数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> genson <span class="keyword">import</span> SchemaBuilder</span><br><span class="line"><span class="keyword">from</span> jsonschema <span class="keyword">import</span> validate, ValidationError, SchemaError</span><br><span class="line"><span class="keyword">from</span> we_work_api.utils.logger <span class="keyword">import</span> logger</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_genson</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    将json数据生成jsonschema文件</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 实例化SchemaBuilder</span></span><br><span class="line">    builder = SchemaBuilder()</span><br><span class="line">    <span class="comment"># 添加一些符合的json数据</span></span><br><span class="line">    <span class="comment"># a可以为int和str,b为str,c为str,d为null,abc为必须返回的字段   </span></span><br><span class="line">        builder.add_object(&#123;<span class="string">&quot;a&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;b&quot;</span>:<span class="string">&quot;aaa&quot;</span>,<span class="string">&quot;c&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;d&quot;</span>:<span class="literal">None</span>&#125;)</span><br><span class="line">    builder.add_object(&#123;<span class="string">&quot;a&quot;</span>:<span class="number">1</span>,<span class="string">&quot;b&quot;</span>:<span class="string">&quot;aaa&quot;</span>,<span class="string">&quot;c&quot;</span>:<span class="string">&quot;1&quot;</span>,&#125;)</span><br><span class="line">    <span class="comment"># 将jsonschema数据存放至文件中</span></span><br><span class="line">    json.dump(builder.to_schema(),<span class="built_in">open</span>(<span class="string">&quot;dome_schema.json&quot;</span>,<span class="string">&quot;w&quot;</span>))</span><br></pre></td></tr></table></figure></li><li><p>导入jsonschema.validate方法，并封装schema_validate对比方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">schema_validate</span>(<span class="params">obj,schema</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    封装schema对比方法</span></span><br><span class="line"><span class="string">    :param obj: 当前获取数据</span></span><br><span class="line"><span class="string">    :param schema: 本地schema数据</span></span><br><span class="line"><span class="string">    :return: True/False</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 尝试去对比数据</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        validate(instance=obj,schema=schema)</span><br><span class="line">    <span class="comment"># 抓取schema内置错误</span></span><br><span class="line">    <span class="keyword">except</span> ValidationError <span class="keyword">as</span> e:</span><br><span class="line">        logger.error(<span class="string">f&quot;验证json_schema失败，失败位置为<span class="subst">&#123;e.path&#125;</span>，失败原因为<span class="subst">&#123;e.message&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">except</span> SchemaError <span class="keyword">as</span> e:</span><br><span class="line">        logger.error(<span class="string">f&quot;验证json_schema失败，失败位置为<span class="subst">&#123;e.path&#125;</span>，失败原因为<span class="subst">&#123;e.message&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># 如果未发生错误，则验证成功</span></span><br><span class="line">        logger.info(<span class="string">&quot;验证成功&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure></li><li><p>使用schema_validate方法进行测试</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_schema</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    1.使用封装的schema比对方法进行测试</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 打开jsonschema文件流</span></span><br><span class="line">    _schema = json.load(<span class="built_in">open</span>(<span class="string">&quot;dome_schema.json&quot;</span>,<span class="string">&quot;r&quot;</span>))</span><br><span class="line">    <span class="comment"># 使用数据跟schema数据作对比</span></span><br><span class="line">    <span class="keyword">assert</span> schema_validate(&#123;<span class="string">&quot;a&quot;</span>:<span class="number">1</span>,<span class="string">&quot;b&quot;</span>:<span class="string">&quot;111&quot;</span>&#125;,_schema)</span><br></pre></td></tr></table></figure></li></ul><h5 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sql</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.database = &#123;<span class="string">&quot;host&quot;</span>:<span class="string">&quot;rm-wz98kz68757yf5k2i2o.mysql.rds.aliyuncs.com&quot;</span>,</span><br><span class="line">                         <span class="string">&quot;port&quot;</span>:<span class="number">3306</span>,</span><br><span class="line">                         <span class="string">&quot;database&quot;</span>:<span class="string">&quot;bbc20201120&quot;</span>,</span><br><span class="line">                         <span class="string">&quot;user&quot;</span>:<span class="string">&quot;ec_admin&quot;</span>,</span><br><span class="line">                         <span class="string">&quot;passwd&quot;</span>:<span class="string">&quot;ec_admin@123&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">execute_sql</span>(<span class="params">self,sql</span>):</span></span><br><span class="line">        <span class="comment"># 创建连接</span></span><br><span class="line">        self.conne = pymysql.connect(host=self.database[<span class="string">&quot;host&quot;</span>],</span><br><span class="line">                                     user=self.database[<span class="string">&quot;user&quot;</span>],</span><br><span class="line">                                     password=self.database[<span class="string">&quot;passwd&quot;</span>],</span><br><span class="line">                                     db=self.database[<span class="string">&quot;database&quot;</span>],)</span><br><span class="line">        <span class="comment"># 创建游标</span></span><br><span class="line">        self.cursor = self.conne.cursor()</span><br><span class="line">        <span class="comment"># 执行sql语句</span></span><br><span class="line">        self.cursor.execute(sql)</span><br><span class="line">        <span class="comment"># 接收数据</span></span><br><span class="line">        res = self.cursor.fetchall()</span><br><span class="line">        <span class="comment"># 关闭游标</span></span><br><span class="line">        self.cursor.close()</span><br><span class="line">        <span class="comment"># 关闭连接</span></span><br><span class="line">        self.conne.close()</span><br><span class="line">        <span class="comment"># 返回查询数据</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    sql = Sql()</span><br><span class="line">    <span class="built_in">print</span>(sql.execute_sql(<span class="string">&quot;select * from bbc20201120.tounicktaxpower_order where mobile = &#x27;15000000000&#x27;;&quot;</span>))</span><br></pre></td></tr></table></figure><h5 id="session接口共享token"><a href="#session接口共享token" class="headerlink" title="session接口共享token"></a>session接口共享token</h5><ul><li>使用requests.Session()方式发起请求</li></ul><h5 id="多线程-多进程"><a href="#多线程-多进程" class="headerlink" title="多线程/多进程"></a>多线程/多进程</h5><ul><li>多线程执行测试用例：pytest-xdist库，-n参数指定几个cpu来运行</li><li>pytest-parallel库</li></ul>]]></content>
      
      
      <categories>
          
          <category> 自动化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> requests </tag>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux与bash脚本</title>
      <link href="/2022/01/15/2022-1-15-linux%E4%B8%8Ebash%E8%84%9A%E6%9C%AC/"/>
      <url>/2022/01/15/2022-1-15-linux%E4%B8%8Ebash%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<h3 id="进程与线程"><a href="#进程与线程" class="headerlink" title="进程与线程"></a>进程与线程</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看进程</span></span><br><span class="line">ps aux</span><br><span class="line">ps -ef</span><br><span class="line"><span class="comment"># 实时查看进程</span></span><br><span class="line">top</span><br><span class="line"><span class="comment"># 筛选查看进程</span></span><br><span class="line">ps aux|grep</span><br><span class="line">ps -ef|grep</span><br><span class="line"><span class="comment"># 查看对应用户的进程</span></span><br><span class="line">ps -u 用户名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看线程</span></span><br><span class="line">ps au -m</span><br><span class="line"><span class="comment"># 筛选需要展示的线程字段</span></span><br><span class="line">ps -o pid,ppid,<span class="built_in">stat</span>,cmd -m</span><br><span class="line"></span><br><span class="line"><span class="comment"># 挂起当前进程</span></span><br><span class="line">ctrl+z</span><br><span class="line"><span class="comment"># 管理进程 查看后台运行的进程</span></span><br><span class="line"><span class="built_in">jobs</span></span><br><span class="line"><span class="comment"># 重新运行后台的进程</span></span><br><span class="line"><span class="built_in">bg</span></span><br><span class="line"><span class="comment"># 将在后台的进程切换至前台</span></span><br><span class="line"><span class="built_in">fg</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 杀死进程（杀掉子进程后，子进程变成z状态（僵尸状态），杀掉父进程，全部进程终止）</span></span><br><span class="line"><span class="built_in">kill</span> -9 pid</span><br></pre></td></tr></table></figure><h3 id="文件处理"><a href="#文件处理" class="headerlink" title="文件处理"></a>文件处理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换目录</span></span><br><span class="line"><span class="built_in">cd</span></span><br><span class="line"><span class="comment"># 查看目录下的文件</span></span><br><span class="line">ls</span><br><span class="line"><span class="comment"># 打印当前路径位置</span></span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line"><span class="comment"># 复制</span></span><br><span class="line">cp </span><br><span class="line"><span class="comment"># 将目录下的文件复制到另一个目录</span></span><br><span class="line">cp -r dir1 dir2</span><br><span class="line"><span class="comment"># 移动</span></span><br><span class="line">mv</span><br><span class="line"><span class="comment"># 查看路径下的隐藏文件</span></span><br><span class="line">ls -a</span><br><span class="line"><span class="comment"># 删除目录</span></span><br><span class="line">rm -r</span><br><span class="line"><span class="comment"># 建立软链接</span></span><br><span class="line">ln -s 源文件 软链接位置</span><br><span class="line"><span class="comment"># 搜索文件</span></span><br><span class="line">find 目录 -name 文件名</span><br><span class="line"><span class="comment"># 查看文件内容</span></span><br><span class="line">cat   <span class="comment"># 查看体量较小文件</span></span><br><span class="line">less、more <span class="comment"># 分页查看，空格下一页 b上一页 回车下一页</span></span><br><span class="line">head -n <span class="comment"># 取文件前x行查看</span></span><br><span class="line">tail -n <span class="comment"># 取文件后x行查看</span></span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">tar -zcvf name files</span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar -xf 文件名</span><br><span class="line"><span class="comment"># 指定解压至目标路径</span></span><br><span class="line">tar -xf 文件名 -C 指定路径</span><br></pre></td></tr></table></figure><h3 id="文本处理"><a href="#文本处理" class="headerlink" title="文本处理"></a>文本处理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vi编辑器</span></span><br><span class="line"><span class="comment"># 命令行模式</span></span><br><span class="line">gg    <span class="comment"># 移动光标至第一行</span></span><br><span class="line">G     <span class="comment"># 移动光标至最后一行</span></span><br><span class="line">yy    <span class="comment"># 复制光标所在行</span></span><br><span class="line">dd    <span class="comment"># 剪切光标所在行</span></span><br><span class="line">p     <span class="comment"># 粘贴</span></span><br><span class="line">x     <span class="comment"># 删除光标所在字符</span></span><br><span class="line">X     <span class="comment"># 删除光标所在的前一个字符</span></span><br><span class="line"><span class="comment"># 底行模式</span></span><br><span class="line">:q    <span class="comment"># 不保存修改退出</span></span><br><span class="line">:wq   <span class="comment"># 保存修改并退出</span></span><br><span class="line">:wq!  <span class="comment"># 强制保存修改并退出</span></span><br><span class="line"><span class="comment"># 编辑模式</span></span><br><span class="line">i     <span class="comment"># 进入编辑模式</span></span><br><span class="line">esc   <span class="comment"># 退出编辑模式</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># echo输出重定向</span></span><br><span class="line"><span class="built_in">echo</span> ’hello world‘ &gt; test.log   <span class="comment"># 将打印信息输出至test.log</span></span><br></pre></td></tr></table></figure><h3 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置文件全部权限</span></span><br><span class="line">chmod 777 文件名</span><br><span class="line"><span class="comment"># 设置文件为没有权限</span></span><br><span class="line">chmod 0 文件名</span><br></pre></td></tr></table></figure><h4 id="文件权限标识"><a href="#文件权限标识" class="headerlink" title="文件权限标识"></a>文件权限标识</h4><ul><li>r：读权限，代表数字4</li><li>w：写权限，代表数字2</li><li>x：执行权限，代表数字1</li></ul><h3 id="网络命令"><a href="#网络命令" class="headerlink" title="网络命令"></a>网络命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看网卡信息</span></span><br><span class="line">ifconfig</span><br><span class="line"><span class="comment"># 测试网络连通性</span></span><br><span class="line">ping ip</span><br><span class="line">ping -c 3 -i 5 ip  <span class="comment"># ping3次，每次间隔5秒</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 行出全部端口</span></span><br><span class="line">netstat -a</span><br><span class="line"><span class="comment"># 行出所以tcp端口</span></span><br><span class="line">netstat -at</span><br><span class="line"><span class="comment"># 筛选某个端口</span></span><br><span class="line">lsof -i:端口号</span><br></pre></td></tr></table></figure><h3 id="性能命令"><a href="#性能命令" class="headerlink" title="性能命令"></a>性能命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看cpu信息</span></span><br><span class="line">cat /proc/cpuinfo</span><br><span class="line"><span class="comment"># 查看内存使用情况</span></span><br><span class="line">free -h</span><br><span class="line"><span class="comment"># 查看磁盘使用情况</span></span><br><span class="line">df -h</span><br></pre></td></tr></table></figure><h3 id="IO相关"><a href="#IO相关" class="headerlink" title="IO相关"></a>IO相关</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试数据读写io</span></span><br><span class="line">dd <span class="keyword">if</span>=/dev/zero bs=1024 count=4096000 of=test.iso   <span class="comment"># 测试写</span></span><br><span class="line">dd <span class="keyword">if</span>=test.iso bs=64k |dd of=/dev/null   <span class="comment"># 测试读</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># iostat工具，需要安装yum install sysstat才能使用</span></span><br><span class="line">iostat -m 3  <span class="comment"># 格式化单位为mb，隔间3秒刷新</span></span><br><span class="line">iostat -c    <span class="comment"># 只看cpu</span></span><br><span class="line">iostat -d    <span class="comment"># 只看硬盘</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 网络io工具</span></span><br><span class="line">iftop</span><br></pre></td></tr></table></figure><h3 id="统计与排序"><a href="#统计与排序" class="headerlink" title="统计与排序"></a>统计与排序</h3><h4 id="排序sort"><a href="#排序sort" class="headerlink" title="排序sort"></a>排序sort</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认每行对应索引字符排序</span></span><br><span class="line">cat filename|sort</span><br><span class="line"><span class="comment"># 忽略开头的空白字符</span></span><br><span class="line">cat filename|sort -b</span><br><span class="line"><span class="comment"># 将小写字母看作大写排序</span></span><br><span class="line">cat filename|sort -f</span><br><span class="line"><span class="comment"># 按照存储容量大小来排序</span></span><br><span class="line">cat filename|sort -h</span><br><span class="line"><span class="comment"># 将排序结果反装</span></span><br><span class="line">cat filename|sort -r</span><br><span class="line"><span class="comment"># 安装数字大小排序</span></span><br><span class="line">cat filename|sort -n</span><br><span class="line"><span class="comment"># 将排序的结果存储到指定文件中</span></span><br><span class="line">cat filename|sort -n -o 文件名</span><br><span class="line"><span class="comment"># -t指定分割符，-k指定需要排序的行</span></span><br><span class="line">cat filename|sort -t: -k 2</span><br><span class="line"><span class="comment"># 对版本信息进行排序</span></span><br><span class="line">cat filename|sort -V</span><br></pre></td></tr></table></figure><h4 id="去重uniq"><a href="#去重uniq" class="headerlink" title="去重uniq"></a>去重uniq</h4><ul><li>uniq只会检查上下的重复，所有要先进行排序，让重复内容都排序在一起，然后再做去重</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先查看文件，然后使用sort对第三行进行排序，在使用uniq对第三行统计出现次数并去重，再使用sort进行数字排序并倒序</span></span><br><span class="line">cat uniq_demo.txt |sort -k 3|uniq -f2 -c -d|sort -nr</span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计出现次数</span></span><br><span class="line">uniq -c</span><br><span class="line"><span class="comment"># 去重，重复次数要&gt;=2</span></span><br><span class="line">uniq -d</span><br><span class="line"><span class="comment"># 跳过对前n行的比较，分隔符默认为空格</span></span><br><span class="line">uniq -f</span><br><span class="line"><span class="comment"># 跳过前n个字符的比较</span></span><br><span class="line">uniq -s</span><br><span class="line"><span class="comment"># 支队前n个字符比较</span></span><br><span class="line">uniq -w</span><br></pre></td></tr></table></figure><h4 id="字符统计wc"><a href="#字符统计wc" class="headerlink" title="字符统计wc"></a>字符统计wc</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认展示文件行数，词数，字符数</span></span><br><span class="line">wc</span><br><span class="line"><span class="comment"># 行数</span></span><br><span class="line">wc -l</span><br><span class="line"><span class="comment"># 字符数</span></span><br><span class="line">wc -c</span><br><span class="line"><span class="comment"># 词数</span></span><br><span class="line">wc -w</span><br><span class="line"><span class="comment"># 最长的一行字符数</span></span><br><span class="line">wc -L</span><br></pre></td></tr></table></figure><h3 id="三剑客"><a href="#三剑客" class="headerlink" title="三剑客"></a>三剑客</h3><h4 id="grep（查找）"><a href="#grep（查找）" class="headerlink" title="grep（查找）"></a>grep（查找）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示包含参数的行</span></span><br><span class="line">grep 参数 文件名</span><br><span class="line"><span class="comment"># 显示以参数开头的行</span></span><br><span class="line">grep ^参数 文件名</span><br><span class="line"><span class="comment"># 显示以参数结尾的行</span></span><br><span class="line">grep 参数$ 文件名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只显示我需要的内容</span></span><br><span class="line">grep -o 参数 文件名</span><br><span class="line"><span class="comment"># 显示匹配的下一行</span></span><br><span class="line">grep -A1 参数 文件名</span><br><span class="line"><span class="comment"># 显示匹配的上一行</span></span><br><span class="line">grep -B1 参数 文件名</span><br><span class="line"><span class="comment"># 显示匹配的上下各一行</span></span><br><span class="line">grep -C1 参数 文件名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件检索</span></span><br><span class="line"><span class="comment"># 递归搜索</span></span><br><span class="line">grep 文件名 -r 绝对路径</span><br><span class="line"><span class="comment"># 只暂时文件名，不展示具体路径</span></span><br><span class="line">grep -h 文件名 -r 绝对路径</span><br><span class="line"><span class="comment"># 查找包含参数的文件</span></span><br><span class="line">grep -l 文件名 -r 绝对路径</span><br><span class="line"></span><br><span class="line"><span class="comment"># 相关约束</span></span><br><span class="line">grep -i    <span class="comment"># 忽略大小写</span></span><br><span class="line">grep -v    <span class="comment"># 显示匹配内容除外的行</span></span><br><span class="line">grep -E    <span class="comment"># 使用扩展正则表达式</span></span><br><span class="line"><span class="comment"># 搜索参数1时，使用--include排除参数2的文件或目录条件</span></span><br><span class="line">grep -l 参数1 -r 绝对路径 --include 参数2</span><br></pre></td></tr></table></figure><h4 id="awk（匹配）"><a href="#awk（匹配）" class="headerlink" title="awk（匹配）"></a>awk（匹配）</h4><h5 id="awk中的内置变量"><a href="#awk中的内置变量" class="headerlink" title="awk中的内置变量"></a>awk中的内置变量</h5><ul><li>NR：行数</li><li>NF：列数</li><li>FS：输入分隔符</li><li>OFS：输出分隔符</li><li>RS：记录输入换行符</li><li>ORS：记录输出换行符</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打印文件内容</span></span><br><span class="line"><span class="comment"># 注意 ：$1这种内置变量的外侧不能加入双引号，否则$1会被当做文本输出</span></span><br><span class="line">awk <span class="string">&#x27;&#123;print&#125;&#x27;</span> filename</span><br><span class="line">awk <span class="string">&#x27;&#123;print $0&#125;&#x27;</span> filename </span><br><span class="line"><span class="comment"># 打印内容中的第2和5行</span></span><br><span class="line">awk <span class="string">&#x27;&#123;print $2,$5&#125;&#x27;</span> filename </span><br><span class="line"><span class="comment"># 打印最后一行</span></span><br><span class="line">awk <span class="string">&#x27;&#123;print $NF&#125;&#x27;</span> filename </span><br><span class="line"><span class="comment"># 打印倒数第二行</span></span><br><span class="line">awk <span class="string">&#x27;&#123;print $NF-1&#125;&#x27;</span> filename </span><br><span class="line"><span class="comment"># 打印时拼接字符串</span></span><br><span class="line">awk <span class="string">&#x27;&#123;print “test1:”$2&#125;&#x27;</span> filename</span><br><span class="line"></span><br><span class="line"><span class="comment"># BNGIN模式（处理文本之前需要执行的操作）</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;print &quot;行1&quot;,&quot;行2&quot;&#125;&#123;print $1,$2&#125;&#x27;</span> filename</span><br><span class="line"><span class="comment"># END模式（处理文本之后执行的操作）</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;print &quot;行1&quot;,&quot;行2&quot;&#125;&#123;print $1,$2&#125;END&#123;print &quot;总1&quot;,&quot;总2&quot;&#125;&#x27;</span> filename</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定,为输入分隔符,打印第2行（可指定多个分隔符用|隔开）</span></span><br><span class="line">awk -F, <span class="string">&#x27;&#123;print$2&#125;&#x27;</span> filename</span><br><span class="line"><span class="comment"># 指定分隔符,查询第1行和第三行，输出时添加&gt;&gt;&gt;&gt;&gt;&gt;为分隔符</span></span><br><span class="line">awk -F, -v OFS=<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span> <span class="string">&#x27;&#123;print $1,$3&#125;&#x27;</span> filename</span><br><span class="line"><span class="comment"># 计算文件中第2行的平均值</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;init=0;FS=&quot;,&quot;&#125;&#123;init+=$2&#125;END&#123;print init/NR&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure><h4 id="sed（编辑）"><a href="#sed（编辑）" class="headerlink" title="sed（编辑）"></a>sed（编辑）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打印第二列</span></span><br><span class="line">sed -n 2p filename</span><br><span class="line"><span class="comment"># 删除第二列</span></span><br><span class="line">sed 2d filename</span><br><span class="line"><span class="comment"># 删除最后一行</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在文件第四行后面加上newline</span></span><br><span class="line">sed -e <span class="string">&#x27;4 a newline&#x27;</span> 文件名</span><br><span class="line"><span class="comment"># 在文件第四行前面加上newline</span></span><br><span class="line">sed -e <span class="string">&#x27;4 a newline&#x27;</span> 文件名</span><br><span class="line"><span class="comment"># 将文件第四行替换为newline</span></span><br><span class="line">sed -e <span class="string">&#x27;4 c newline&#x27;</span> 文件名</span><br><span class="line"></span><br><span class="line">sed <span class="variable">$d</span></span><br><span class="line"><span class="comment"># 替换内容</span></span><br><span class="line">sed <span class="string">&#x27;s/查找关键词/替换为/&#x27;</span> filename</span><br><span class="line"><span class="comment"># 在关键词前后添加内容</span></span><br><span class="line">sed <span class="string">&#x27;s/查找关键词/前&amp;后/g&#x27;</span> filename</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配到1-3的3个元素，然后使用反斜杠\反向引用</span></span><br><span class="line"><span class="built_in">echo</span> 6 7 1 2 3 |sed -E <span class="string">&#x27;s#([1-3]) ([1-3]) ([1-3])#\3 \2 \1#&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> bash </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>po设计模型</title>
      <link href="/2022/01/15/2022-1-15-po%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%9E%8B/"/>
      <url>/2022/01/15/2022-1-15-po%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h3 id="PageObject设计思想"><a href="#PageObject设计思想" class="headerlink" title="PageObject设计思想"></a>PageObject设计思想</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><ul><li><p>通过面向对象的方式，把页面定位和页面操作动作，与测试逻辑分开</p></li><li><p>提高代码的可读性，减少代码的重复，提高代码的可维护性</p></li><li><p>页面元素如果有变化，只需要维护每个page</p></li><li><p>测试步骤有变化，只需要维护test_case</p></li></ul><h4 id="方法意义"><a href="#方法意义" class="headerlink" title="方法意义"></a>方法意义</h4><ul><li>用公共方法代表UI所提供的功能</li><li>方法应该返回其他的pageobject对象或者返回用于断言的数据</li><li>同样的行为不同的结果可以建模为不同的方法</li><li>不要再方法内加断言</li></ul><h4 id="字段意义"><a href="#字段意义" class="headerlink" title="字段意义"></a>字段意义</h4><ul><li>不要暴露页面内部元素给到外部</li><li>不需要建模UI内所有元素</li></ul><h4 id="交互关系"><a href="#交互关系" class="headerlink" title="交互关系"></a>交互关系</h4><ul><li>页面需要class定义</li><li>每个操作动作用方法定义</li><li>方法应该返回跳转页面的页面对象，或者测试用例断言需要用到的数据</li></ul><h4 id="PO执行时的思路"><a href="#PO执行时的思路" class="headerlink" title="PO执行时的思路"></a>PO执行时的思路</h4><ol><li>梳理测试用例</li><li>构造po模型<ul><li>构造页面相关类和方法</li><li>实现暂时可以为空</li></ul></li><li>编写测试用例<ul><li>根据业务逻辑编写</li><li>链式调用</li></ul></li><li>填充实现方法<ul><li>driver初始化</li><li>basepage封装</li></ul></li><li>优化用例<ul><li>封装样板代码：常用的查找元素方法封装至basepage</li><li>提取页面元素：将元素变量私有化，同一元素使用次数多次时，将元素参数化</li><li>添加起始页url：basepage与具体业务没有关系，起始url不建议放在basepage</li></ul></li></ol><h4 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h4><ol><li><p>driver初始化如果绑定在某个页面类中，那么多个页面类都需要进行初始化操作？</p><p><u>解决：driver的初始化部分放在basepage中，其他page类继承basepage，子类可以使用父类的属性，直接通过self.driver调用driver实例对象</u></p></li><li><p>其他页面类在调用basepage时会重复实例化driver的初始化，导致出现多个浏览器？</p><p><u>解决：在__init__初始化方法中添加形参base_driver = None，并加一个判断，当形参为空时，初始化浏览器驱动，当形参有值时直接附上self.driver对象</u></p></li><li><p>如果出现A导入B，B又导入A，这种循环导入的问题？</p><p><u>解决：可以把导包的操作放在方法里面</u></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 自动化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> selenium </tag>
            
            <tag> appium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>selenium自动化</title>
      <link href="/2022/01/15/2022-1-15-selenium%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
      <url>/2022/01/15/2022-1-15-selenium%E8%87%AA%E5%8A%A8%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h3 id="隐式等待与显式等待"><a href="#隐式等待与显式等待" class="headerlink" title="隐式等待与显式等待"></a>隐式等待与显式等待</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接等待</span></span><br><span class="line">time.sleep()</span><br></pre></td></tr></table></figure><h4 id="隐式等待"><a href="#隐式等待" class="headerlink" title="隐式等待"></a>隐式等待</h4><ul><li>设置一个等待时间，轮询查找（默认0.5秒）元素是否出现，如果没有出现则抛出异常</li><li>缺点: 当一个元素出现异常时，会等到等待时间结束才抛出异常，影响效率</li><li>一般放在浏览器驱动初始化方法里面，整个driver全局等待</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 隐式等待</span></span><br><span class="line">implicitly_wait()</span><br></pre></td></tr></table></figure><h4 id="显式等待"><a href="#显式等待" class="headerlink" title="显式等待"></a>显式等待</h4><ul><li>指定一个等待条件，当条件满足时则继续执行，不满足则抛异常</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="comment">#在10秒内隔1秒去执行一次until中调用的方法，直到方法不再返回false</span></span><br><span class="line">WebDriverWait(self.driver,<span class="number">10</span>,<span class="number">1</span>).until(EC.具体条件)</span><br><span class="line"><span class="comment"># 在10秒内隔1秒去执行一次until_not中调用的方法，直到方法返回false</span></span><br><span class="line">WebDriverWait(self.driver,<span class="number">10</span>,<span class="number">1</span>).until_not(EC.具体条件)</span><br></pre></td></tr></table></figure><h3 id="元素定位"><a href="#元素定位" class="headerlink" title="元素定位"></a>元素定位</h3><h4 id="常见元素定位方法"><a href="#常见元素定位方法" class="headerlink" title="常见元素定位方法"></a>常见元素定位方法</h4><ul><li>id</li><li>name</li><li>class_name</li><li>css</li><li>xpath</li></ul><h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><ul><li>元素有id、name直接使用id或name定位，一般id和name为唯一</li><li>其次优先使用css定位，但css定位可能不适用移动端自动化</li><li>xpath兼容web与app端，但是xpath是在整个页面中去找元素，速度慢</li></ul><h3 id="web控件交互"><a href="#web控件交互" class="headerlink" title="web控件交互"></a>web控件交互</h3><h4 id="ActionChains"><a href="#ActionChains" class="headerlink" title="ActionChains"></a>ActionChains</h4><blockquote><p>调用ActionChains时，不会立刻执行，而是将所有操作按顺序存放在一个队列里面，当你调用perform()时，队列里的事件会依次执行</p></blockquote><h5 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 点击</span></span><br><span class="line">click</span><br><span class="line"><span class="comment"># 双击</span></span><br><span class="line">double_click</span><br><span class="line"><span class="comment"># 右击</span></span><br><span class="line">context_click</span><br><span class="line"><span class="comment"># 拖拽</span></span><br><span class="line">drag_and_drop</span><br><span class="line"><span class="comment"># 移动光标</span></span><br><span class="line">move_to_element</span><br></pre></td></tr></table></figure><h4 id="TouchActions"><a href="#TouchActions" class="headerlink" title="TouchActions"></a>TouchActions</h4><blockquote><p>模拟pc或h5端的操作</p></blockquote><h5 id="常用操作-1"><a href="#常用操作-1" class="headerlink" title="常用操作"></a>常用操作</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 点击</span></span><br><span class="line">tap</span><br><span class="line"><span class="comment"># 双击</span></span><br><span class="line">double_tap</span><br><span class="line"><span class="comment"># 长按</span></span><br><span class="line">long_press</span><br><span class="line"><span class="comment"># 滑动</span></span><br><span class="line">scroll_from_element</span><br><span class="line"><span class="comment"># 点击不释放</span></span><br><span class="line">tap_and_hold</span><br><span class="line"><span class="comment"># 从某个元素位置开始手势滑动(负数：向上滑动，正数：向下滑动)</span></span><br><span class="line">flick_element</span><br></pre></td></tr></table></figure><h3 id="多窗口-frame"><a href="#多窗口-frame" class="headerlink" title="多窗口/frame"></a>多窗口/frame</h3><h4 id="多窗口切换"><a href="#多窗口切换" class="headerlink" title="多窗口切换"></a>多窗口切换</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先获取当前的窗口句柄，在获取所有窗口句柄，再进行窗口切换</span></span><br><span class="line">current_window_handle   <span class="comment"># 获取当前窗口句柄</span></span><br><span class="line">window_handles    <span class="comment"># 获取全部窗口句柄</span></span><br><span class="line">switch_to.window  <span class="comment"># 切换窗口</span></span><br></pre></td></tr></table></figure><h4 id="frame"><a href="#frame" class="headerlink" title="frame"></a>frame</h4><h5 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h5><ul><li>frameset<ul><li>clos：垂直布局</li><li>rows：水平布局</li></ul></li><li>frame</li><li>iframe</li></ul><h5 id="多frame切换"><a href="#多frame切换" class="headerlink" title="多frame切换"></a>多frame切换</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换至frame</span></span><br><span class="line">switch_to.frame(frame名)</span><br><span class="line"><span class="comment"># 切换至父frame</span></span><br><span class="line">switch_to.parent_frame()</span><br><span class="line"><span class="comment"># 切换至主文档</span></span><br><span class="line">switch_to.default_content()</span><br></pre></td></tr></table></figure><h3 id="多浏览器处理"><a href="#多浏览器处理" class="headerlink" title="多浏览器处理"></a>多浏览器处理</h3><ul><li>在basepage里面增加判断来创建对应浏览器的driver，使用os.getenv()读取全局变量</li></ul><h3 id="执行JavaScript脚本"><a href="#执行JavaScript脚本" class="headerlink" title="执行JavaScript脚本"></a>执行JavaScript脚本</h3><h4 id="selenium调用js脚本"><a href="#selenium调用js脚本" class="headerlink" title="selenium调用js脚本"></a>selenium调用js脚本</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果想要js脚本返回数据，需要加上return</span></span><br><span class="line">execute_script()</span><br></pre></td></tr></table></figure><h4 id="常用js方法"><a href="#常用js方法" class="headerlink" title="常用js方法"></a>常用js方法</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 获取当前页面性能指标</span><br><span class="line"><span class="built_in">JSON</span>.stringify(performance.timing)</span><br><span class="line"># 使用js定位元素</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;su&#x27;</span>)</span><br><span class="line"># 移动页面至最底部</span><br><span class="line"><span class="built_in">document</span>.documentElement.scrollTop=<span class="number">10000</span></span><br><span class="line"># 获取页面title</span><br><span class="line"><span class="built_in">document</span>.title</span><br></pre></td></tr></table></figure><h4 id="js处理时间控件案例"><a href="#js处理时间控件案例" class="headerlink" title="js处理时间控件案例"></a>js处理时间控件案例</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 思路：先将时间控件中的只读标签删除，然后直接给时间控件赋值</span><br><span class="line"><span class="string">&quot;a=document.getElementById(&#x27;J_RoomGuestInfoTxt&#x27;);a.removeAttribute(&#x27;readonly&#x27;);a.value=&#x27;一万个&#x27;&quot;</span></span><br><span class="line"># 同时需要执行多个JS脚本时，中间用;隔开即可</span><br><span class="line"># 删除标签readonly属性</span><br><span class="line">removeAttribute(<span class="string">&#x27;readonly&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 自动化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> selenium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>adb</title>
      <link href="/2022/01/15/2022-1-15-adb/"/>
      <url>/2022/01/15/2022-1-15-adb/</url>
      
        <content type="html"><![CDATA[<h3 id="Adb环境搭建准备"><a href="#Adb环境搭建准备" class="headerlink" title="Adb环境搭建准备"></a>Adb环境搭建准备</h3><h4 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h4><h4 id="安装SDK"><a href="#安装SDK" class="headerlink" title="安装SDK"></a>安装SDK</h4><h4 id="验证环境"><a href="#验证环境" class="headerlink" title="验证环境"></a>验证环境</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb version</span><br></pre></td></tr></table></figure><h4 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h4><h5 id="模拟器"><a href="#模拟器" class="headerlink" title="模拟器"></a>模拟器</h5><ul><li>根据模拟器提供的官方文档进行adb连接</li></ul><h5 id="真机"><a href="#真机" class="headerlink" title="真机"></a>真机</h5><ul><li>usb</li><li>开启开发者模式</li><li>删除手机助手类软件</li></ul><h3 id="adb基础"><a href="#adb基础" class="headerlink" title="adb基础"></a>adb基础</h3><h4 id="adb介绍"><a href="#adb介绍" class="headerlink" title="adb介绍"></a>adb介绍</h4><blockquote><p>全称android debug bridge，安卓调试桥，是android环境提供的命令行工具，用户可以通过adb在电脑上对Android设备进行全面操作，比如安装和调试应用，操作文件的传输等</p></blockquote><h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重启服务</span></span><br><span class="line">adb kill-server</span><br><span class="line">adb start-server</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看设备状态</span></span><br><span class="line">adb devices    <span class="comment"># device正常；offline设备无响应；unauthorized未授权</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装应用</span></span><br><span class="line">adb install 包路径</span><br><span class="line">adb install -r 包路径   <span class="comment"># 覆盖安装</span></span><br><span class="line">adb -s 设备名 install 包路径  <span class="comment"># 指定设备安装</span></span><br><span class="line"><span class="comment"># 卸载应用</span></span><br><span class="line">adb uninstall 包路径</span><br><span class="line">adb uninstall -k 包路径    <span class="comment"># 卸载包不删除配置文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前已打开的应用包名</span></span><br><span class="line">adb shell dumpsys window w |grep \/ |grep name=</span><br><span class="line"><span class="comment"># 快速启动app</span></span><br><span class="line">adb shell am start -n 包名</span><br><span class="line"><span class="comment"># 清理缓存</span></span><br><span class="line">adb shell pm clear 包名</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="进阶命令"><a href="#进阶命令" class="headerlink" title="进阶命令"></a>进阶命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设备与电脑传输文件</span></span><br><span class="line">adb push 电脑路径 设备路径   <span class="comment"># 电脑--&gt;设备</span></span><br><span class="line">adb pull 设备路径 电脑路径   <span class="comment"># 设备--&gt;电脑</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看系统日志</span></span><br><span class="line">adb logcat -v time &gt;.\longcat.log</span><br><span class="line"><span class="comment"># 清理日志</span></span><br><span class="line">adb logcat -c</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> adb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> adb </tag>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jenkins持续集成</title>
      <link href="/2022/01/15/jenkins%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
      <url>/2022/01/15/jenkins%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/</url>
      
        <content type="html"><![CDATA[<h4 id="CI持续集成基础"><a href="#CI持续集成基础" class="headerlink" title="CI持续集成基础"></a>CI持续集成基础</h4><blockquote><p>相比传统的瀑布流，持续集成可以频繁多次的将代码提交至主干</p></blockquote><h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><ul><li>每完成一个功能更新，就集成至对应分支，可以快速发现错误，更早的定位问题</li><li>防止分支大幅度偏离主干，经常不集成，分支又在不断更新，再集成时难度会变大</li></ul><h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><p>1、docker方式安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拉取jenkins镜像文件</span></span><br><span class="line">docker pull jenkins/jenkins:lts</span><br><span class="line"><span class="comment"># 创建一个文件名为jenkins_home的docker映射文件卷</span></span><br><span class="line">docker volume crate jenkins_home</span><br><span class="line"><span class="comment"># 启动jenkins并指定端口，映射关系</span></span><br><span class="line">docker run -d --name jenkins -p 10240:8080 -p 10241:50000 -v jenkins_home:/var/jenkins_home jenkins/jenkins:lts</span><br><span class="line"><span class="comment"># 查看启动日志</span></span><br><span class="line">docker logs -f 容器id</span><br><span class="line"><span class="comment"># 查看文件卷具体路径</span></span><br><span class="line">docker inspect jenkins_home</span><br></pre></td></tr></table></figure><p>2、nginx，tomcat方式安装</p><ul><li>下载jenkins.war</li></ul><h5 id="job机制"><a href="#job机制" class="headerlink" title="job机制"></a>job机制</h5><h5 id="节点管理"><a href="#节点管理" class="headerlink" title="节点管理"></a>节点管理</h5><ul><li>一个master管理多个slave，可指定由某个节点执行job</li></ul><h5 id="用户权限"><a href="#用户权限" class="headerlink" title="用户权限"></a>用户权限</h5><ul><li>安全矩阵</li><li>项目矩阵</li></ul><h5 id="报警机制（邮箱提醒）"><a href="#报警机制（邮箱提醒）" class="headerlink" title="报警机制（邮箱提醒）"></a>报警机制（邮箱提醒）</h5><p>1、配置</p><ul><li><p>系统管理-配置邮件通知</p></li><li><p>测试邮箱通知</p></li></ul><p>2、使用</p><ul><li><p>Extended E-mail Notification，配置邮件模板</p></li><li><p>模板也需要配置邮箱授权码</p></li><li><p>job中配置构建后操作-邮箱通知</p></li></ul><h5 id="job的父子关系"><a href="#job的父子关系" class="headerlink" title="job的父子关系"></a>job的父子关系</h5><h5 id="踩坑问题"><a href="#踩坑问题" class="headerlink" title="踩坑问题"></a>踩坑问题</h5><p>1、执行自动化任务job时，总是提示python命令找不到？</p><ul><li><p>排查：1、找不到python环境，在容器内去部署python环境</p></li><li><p>排查：2、将宿主机的python环境映射到容器内</p></li><li><p>最终解决：将宿主机配置成为一个节点，job使用节点去执行</p></li></ul><p>2、执行pip install -r xxx提示安装库失败</p><ul><li>解决：pip版本出现问题，重新安装python环境</li></ul><p>3、配置allure时提示： unrecognized arguments: –alluredir</p><ul><li>解决：本地为安装allure-pytest库</li></ul><p>4、直接运行pytest命令，提示找不到模块</p><ul><li>解决：引入模块时没有从项目根目录开始</li></ul><p>5、allure配置好后，提示java代码错误，无法生成报告</p><ul><li><p><img src="https://api2.mubu.com/v3/document_image/ea4df0b6-1d29-45a5-b99e-c5000d1aa652-13730468.jpg" alt="img"></p></li><li><p>执行的节点上需要安装allure-commandline环境</p></li><li><p>需要配置jenkins全局变量allure-commandline、java_home</p></li></ul><p>6、环境变量配置的问题</p><ul><li><p>1、可以在执行shell时，指定环境变量文件</p></li><li><p>2、在节点配置需要的环境变量</p></li><li><p>3、全局变量设置环境变量</p></li><li><p>想要在jenkins上执行的命令，必须在对应的slave节点上本身就可以执行，jenkins才能跑起来</p></li></ul><h4 id="jenkins持续集成实际运用"><a href="#jenkins持续集成实际运用" class="headerlink" title="jenkins持续集成实际运用"></a>jenkins持续集成实际运用</h4><h5 id="1、接口自动化集成"><a href="#1、接口自动化集成" class="headerlink" title="1、接口自动化集成"></a>1、接口自动化集成</h5><ul><li><p>新增执行节点</p><ul><li><p>设置执行核心数</p></li><li><p>选择工作目录</p></li><li><p>ssh连接方式</p></li></ul></li><li><p>节点环境准备</p><ul><li><p>python</p></li><li><p>git</p></li><li><p>jdk</p></li><li><p>allure-commandline</p></li></ul></li><li><p>jenkins环境准备</p><ul><li><p>下载插件git、allure</p></li><li><p>配置环境变量</p></li></ul></li><li><p>源码地址</p><ul><li>github、gitee…</li></ul></li><li><p>配置job</p><ul><li><p>选择执行节点</p></li><li><p>源码拉取-检出到子目录</p></li><li><p>shell命令配置</p></li><li><p>allure报告配置</p></li><li><p>报告path需要从根目录开始</p></li></ul></li></ul><h5 id="2、接口压力自动化集成"><a href="#2、接口压力自动化集成" class="headerlink" title="2、接口压力自动化集成"></a>2、接口压力自动化集成</h5><ul><li><p>jmeter压力测试脚本文件jmx</p></li><li><p>运行jmx文件的sh脚本</p></li><li><p>关闭jmeter对报告js渲染的限制</p><ul><li><p>jenkins下载插件HTML Publisher插件</p></li><li><p>System.setProperty(“hudson.model.DirectoryBrowserSupport.CSP”,””)</p></li></ul></li><li><p>配置HTML reports</p></li></ul><h5 id="3、webUI自动化集成"><a href="#3、webUI自动化集成" class="headerlink" title="3、webUI自动化集成"></a>3、webUI自动化集成</h5><ul><li><p>节点机slave需要安装chrome、chromedriver，且版本需要对应</p></li><li><p>driver需要指定为无界面模式运行，示例代码</p><ul><li><p>chrome_options = Options()</p></li><li><p>chrome_options.add_argument(“–headless”)</p></li><li><p>chrome_options.add_argument(“–no-sandbox”)</p></li><li><p>self.driver=webdriver.Chrome(executable_path=”机器上chromedriver存放位置”,options=chrome_options)</p></li></ul></li><li><p>注意代码读取数据的路径，是否为相对路径，相对路径需要cd到对应的目录去执行用力了</p></li><li><p>其他配置与接口自动化类似</p></li><li><p>slenium-hub的兼容</p></li></ul><h5 id="4、appUI自动化集成"><a href="#4、appUI自动化集成" class="headerlink" title="4、appUI自动化集成"></a>4、appUI自动化集成</h5><ul><li><p>将连接真机或者模拟器的pc作为slave节点</p><ul><li>添加本机mac为节点时，由于jenkins部署在云服务器，与本机不在同一个网络环境，需要做内网映射</li></ul></li><li><p>配置环境变量</p><ul><li><p>allure生成失败，找不到allure-commandline</p></li><li><p>需要配置jenkins全局变量allure-commandline、java_home，每个执行节点都需要配置，取不同名字标识，jenkins会自动读取</p></li></ul></li><li><p>打开节点上的appium服务</p></li><li><p>git拉取代码</p></li><li><p>执行用例</p><ul><li><p>pip、pytest命令找不到</p></li><li><p>由于系统有两个python版本，直接输入pip，pytest找不到命令，需要使用pip3，python3 -m pytest执行</p></li></ul></li><li><p>生成allure</p></li></ul><h5 id="5、持续集成体系建设"><a href="#5、持续集成体系建设" class="headerlink" title="5、持续集成体系建设"></a>5、持续集成体系建设</h5><ul><li><p>拉取app应用代码，打包出apk文件</p></li><li><p>拉取测试代码</p></li><li><p>判断是否存在app，卸载app</p></li><li><p>安装app</p></li><li><p>冒烟测试</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 持续集成 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker安装mysql</title>
      <link href="/2022/01/10/2022-1-10-docker%E5%AE%89%E8%A3%85mysql/"/>
      <url>/2022/01/10/2022-1-10-docker%E5%AE%89%E8%A3%85mysql/</url>
      
        <content type="html"><![CDATA[<h4 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载持续更新镜像</span></span><br><span class="line">docker pull mysql:latest</span><br></pre></td></tr></table></figure><h4 id="启动mysql容器"><a href="#启动mysql容器" class="headerlink" title="启动mysql容器"></a>启动mysql容器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建文件夹opt/mysql_docker</span></span><br><span class="line">mkdir /opt/mysql_docker</span><br><span class="line"><span class="comment"># 进入文件夹</span></span><br><span class="line"><span class="built_in">cd</span> /opt/mysql_docker</span><br><span class="line"><span class="comment"># 启动容器</span></span><br><span class="line">docker run --name mysqlserver -v <span class="variable">$PWD</span>/conf:/etc/mysql/conf.d -v <span class="variable">$PWD</span>/logs:/logs -v <span class="variable">$PWD</span>/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 -d -i -p 3306:3306 mysql:latest</span><br><span class="line"><span class="comment"># 查看启动日志</span></span><br><span class="line">docker logs -f 容器id</span><br></pre></td></tr></table></figure><h4 id="进入容器"><a href="#进入容器" class="headerlink" title="进入容器"></a>进入容器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入容器</span></span><br><span class="line">docker <span class="built_in">exec</span> -it mysqlserver bash</span><br></pre></td></tr></table></figure><h4 id="设置远程连接权限"><a href="#设置远程连接权限" class="headerlink" title="设置远程连接权限"></a>设置远程连接权限</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 进入mysql</span><br><span class="line">mysql <span class="operator">-</span>uroot <span class="operator">-</span>p</span><br><span class="line"># 设置允许远程访问</span><br><span class="line">use mysql;</span><br><span class="line"><span class="keyword">select</span> host,<span class="keyword">user</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python3语法</title>
      <link href="/2022/01/10/python%E8%AF%AD%E6%B3%95/"/>
      <url>/2022/01/10/python%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><ul><li>变量是一种存储数据的载体，是存储器中存储数据的一块内存空间变量的值是可以读取和修改的</li></ul><h4 id="Numbers"><a href="#Numbers" class="headerlink" title="Numbers"></a>Numbers</h4><ul><li><p>int</p></li><li><p>整数</p></li><li><p>float浮点数</p></li><li><p>运算符</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 赋值</span></span><br><span class="line">=</span><br><span class="line"><span class="comment"># 加减乘除</span></span><br><span class="line">+-*/</span><br><span class="line"><span class="comment"># 取余</span></span><br><span class="line">%</span><br><span class="line"><span class="comment"># 乘方</span></span><br><span class="line">**</span><br><span class="line"><span class="comment"># 修改运算优先级</span></span><br><span class="line">（）</span><br><span class="line"><span class="comment">## 等于</span></span><br><span class="line">==</span><br><span class="line"><span class="comment"># 不等于</span></span><br><span class="line">！=</span><br></pre></td></tr></table></figure></li></ul><h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 转义符</span></span><br><span class="line">\</span><br><span class="line"><span class="comment"># 换行</span></span><br><span class="line">\n</span><br><span class="line"><span class="comment"># 忽略转义符作用</span></span><br><span class="line">r</span><br><span class="line"><span class="comment"># 多个字符串连接</span></span><br><span class="line">+</span><br><span class="line"><span class="comment"># 索引</span></span><br><span class="line">从<span class="number">0</span>开始</span><br><span class="line"><span class="comment"># 切片</span></span><br><span class="line">前闭后开原则，例如：[<span class="number">1</span>;<span class="number">3</span>]则是<span class="number">1</span>≤x&lt;<span class="number">3</span></span><br><span class="line">举例：[<span class="number">1</span>:<span class="number">6</span>:<span class="number">2</span>]，从<span class="number">1</span>开始到<span class="number">5</span>结束，取值步数step为<span class="number">2</span></span><br></pre></td></tr></table></figure><h4 id="列表List"><a href="#列表List" class="headerlink" title="列表List"></a>列表List</h4><ul><li>通过组合一些值得到多种复合数据类型</li><li>列表通过[]方括号、逗号分隔的一组值得到</li><li>一个列表可以包含不同类型的元素，但通常使用时各个元素类型相同</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># list常用方法：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在列表末尾增加元素</span></span><br><span class="line"><span class="built_in">list</span>.append(x)</span><br><span class="line"><span class="comment"># 在指定索引i处增加元素x</span></span><br><span class="line"><span class="built_in">list</span>.insert(i,x)</span><br><span class="line"><span class="comment"># 移除列表中的第一个x值，如果没有该值则抛出ValueError</span></span><br><span class="line"><span class="built_in">list</span>,remove(x)</span><br><span class="line"><span class="comment"># 删除列表中指定位置的元素并返回它，如果没有指定位置将会删除并返回列的最后一个元素 </span></span><br><span class="line"><span class="built_in">list</span>.pop([i])</span><br><span class="line"><span class="comment"># 对列表中的元素进行排序</span></span><br><span class="line"><span class="built_in">list</span>.sort()</span><br><span class="line"><span class="comment"># 反转列表中的元素并返回</span></span><br><span class="line"><span class="built_in">list</span>.reverse()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列表推导式</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提供一个更简单的创建列表的方法，常见的用法是把某种操作应用于序列或可迭代对象的每个元素上，然后使用其结果来创建列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 举例：生成一个(1,4)的平方列表</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">list</span> = [i*<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">4</span>)]</span><br></pre></td></tr></table></figure><h4 id="元组tuple"><a href="#元组tuple" class="headerlink" title="元组tuple"></a>元组tuple</h4><ul><li>使用()进行定义</li><li>tuple、list、range都是序列数据类型</li><li>元组是不可变的，可以通过解包、索引来访问</li><li>元组可以嵌套列表，从而可以改变列表</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 返回元素x在元组中出现的次数</span></span><br><span class="line"><span class="built_in">tuple</span>.count(x)</span><br><span class="line"><span class="comment"># 返回元素的索引</span></span><br><span class="line"><span class="built_in">tuple</span>.index(x)</span><br></pre></td></tr></table></figure><h4 id="集合set"><a href="#集合set" class="headerlink" title="集合set"></a>集合set</h4><ul><li>集合是有不重复元素组成的无序的集</li><li>可以使用{}，或者set()函数来创建集合</li><li>创建空集合只能使用set()，不能直接用{}</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 常用方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 求并集</span></span><br><span class="line">set1.union(set2)</span><br><span class="line"><span class="comment"># 求交集</span></span><br><span class="line">set1.intersection(set2)</span><br><span class="line"><span class="comment"># 求差集</span></span><br><span class="line">set1.difference(set2)</span><br><span class="line"><span class="comment"># 增加元素</span></span><br><span class="line"><span class="built_in">set</span>.add(x)</span><br></pre></td></tr></table></figure><h4 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h4><ul><li>字典是以关键词为索引</li><li>关键词可以是任意不可变类型，通常是字符串或数字，如果一个元组只包含字符串、数字、元组，那这个元组也可以用作关键词</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 常用方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回字典所有key值</span></span><br><span class="line"><span class="built_in">dict</span>.keys()</span><br><span class="line"><span class="comment"># 返回字典所有的values</span></span><br><span class="line"><span class="built_in">dict</span>.values()</span><br><span class="line"><span class="comment"># 删除关键词未key的键值组</span></span><br><span class="line"><span class="built_in">dict</span>.pop(key)</span><br><span class="line"><span class="comment"># 随机删除键值组</span></span><br><span class="line"><span class="built_in">dict</span>.popitem(key)</span><br><span class="line"><span class="comment"># 将keys作用键值,i为values，新建一个字典</span></span><br><span class="line"><span class="built_in">dict</span>.fromkeys(keys,i) </span><br></pre></td></tr></table></figure><h4 id="列表、元组、字典、集合的区别"><a href="#列表、元组、字典、集合的区别" class="headerlink" title="列表、元组、字典、集合的区别"></a>列表、元组、字典、集合的区别</h4><h3 id="控制流"><a href="#控制流" class="headerlink" title="控制流"></a>控制流</h3><h4 id="分支结构if-else"><a href="#分支结构if-else" class="headerlink" title="分支结构if-else"></a>分支结构if-else</h4><ul><li>一条一条语句顺序执行叫顺序结构</li><li>分支结构就是在某个判断条件后，选择一条分支去执行</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># if-else示例</span></span><br><span class="line"><span class="keyword">if</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">elif</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="comment"># 多重分支与嵌套分支</span></span><br><span class="line"><span class="comment"># 能使用偏平化的结构时就不要使用嵌套</span></span><br><span class="line"><span class="comment"># 嵌套结构影响代码可读性</span></span><br></pre></td></tr></table></figure><h4 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h4><ul><li>循环语句允许我们执行一个语句或语句组多次</li><li>python提供了for与while循环</li></ul><h5 id="for-in循环"><a href="#for-in循环" class="headerlink" title="for-in循环"></a>for-in循环</h5><p>如果明确知道循环执行的次数或者要对一个容器进行迭代，那推荐使用for-in循环</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># range函数</span></span><br><span class="line"><span class="comment"># 可以用来产生一个不变的数值序列，而且这个序列通常都是用在循环中的</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">range</span>(<span class="number">101</span>) <span class="comment"># 产生一个0-100的整数序列</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">range</span>(<span class="number">1</span>,<span class="number">100</span>) <span class="comment"># 产生一个1-99的整数序列</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">range</span>(<span class="number">1</span>,<span class="number">100</span>,<span class="number">2</span>) <span class="comment"># 产生一个1-99的奇数序列，其中2位step步长</span></span><br></pre></td></tr></table></figure><h5 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h5><ul><li>如果构造不知道具体循环次数的结构，推荐使用while循环，通过一个能够产生或转换出布尔值的表达式来控制语句，True循环继续，False循环结束</li></ul><h5 id="break与continue语句"><a href="#break与continue语句" class="headerlink" title="break与continue语句"></a>break与continue语句</h5><ul><li>break语句可以跳出for和while循环体，如果从for和while循环中终止，任何对应的else将不执行</li><li>continue语句用来告诉python跳过当前循环块中的剩余语句，然后继续下一轮循环</li></ul><h3 id="函数def"><a href="#函数def" class="headerlink" title="函数def"></a>函数def</h3><ul><li>封装并组织好，可重复使用，用来实现单一或相关连功能的代码段</li><li>提高应用的模块性，和代码的重复利用率</li></ul><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testdef</span>():</span></span><br><span class="line">  <span class="keyword">return</span> xxx</span><br><span class="line"><span class="comment"># def开头，后接函数名和圆括号</span></span><br><span class="line"><span class="comment"># 不带表达式的 return或不写return，相当于返回None</span></span><br></pre></td></tr></table></figure><h4 id="函数的传参"><a href="#函数的传参" class="headerlink" title="函数的传参"></a>函数的传参</h4><h5 id="位置参数"><a href="#位置参数" class="headerlink" title="位置参数"></a>位置参数</h5><ul><li>传参与参数按位置对应</li></ul><h5 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h5><ul><li>直接在定义函数时使用k=v定义</li><li>没有传参，直接使用默认参数</li><li>有传参则使用参数</li></ul><h5 id="关键词传参"><a href="#关键词传参" class="headerlink" title="关键词传参"></a>关键词传参</h5><ul><li>函数调用时，使用k=v形式传参</li><li>在函数调用时，关键词参数必须跟随在位置参数的后面</li></ul><h5 id="特殊参数"><a href="#特殊参数" class="headerlink" title="特殊参数"></a>特殊参数</h5><ul><li>仅限关键词参数，在形参前放置一个*</li></ul><h5 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h5><ul><li>可以用lambda关键词来创建一个小的匿名函数</li><li>主体是一个表达式，而不是一个代码块，仅仅能在lambda表达式中封装有限的逻辑进去</li></ul><h3 id="模块class"><a href="#模块class" class="headerlink" title="模块class"></a>模块class</h3><h4 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h4><ul><li>包含python定义和语句的文件</li><li>.py文件</li><li>可单独作为脚本运行</li></ul><h4 id="模块的导入"><a href="#模块的导入" class="headerlink" title="模块的导入"></a>模块的导入</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入模块</span></span><br><span class="line"><span class="keyword">import</span> 模块名</span><br><span class="line"><span class="comment"># 指定导入该模块的具体方法</span></span><br><span class="line"><span class="keyword">from</span> 模块名 <span class="keyword">import</span> 函数|类|变量</span><br><span class="line"><span class="comment"># 导入该模块全部方法</span></span><br><span class="line"><span class="keyword">from</span> 模块名 <span class="keyword">import</span> * </span><br><span class="line"><span class="comment"># 导入指定方法并给方法取个别名</span></span><br><span class="line"><span class="keyword">from</span> 模块名 <span class="keyword">import</span> 函数 <span class="keyword">as</span> 别名</span><br></pre></td></tr></table></figure><h4 id="模块的分类"><a href="#模块的分类" class="headerlink" title="模块的分类"></a>模块的分类</h4><h5 id="系统内置模块"><a href="#系统内置模块" class="headerlink" title="系统内置模块"></a>系统内置模块</h5><ul><li>sys</li><li>os</li><li>time</li><li>re</li><li>json</li><li>…</li></ul><h5 id="第三方开源模块"><a href="#第三方开源模块" class="headerlink" title="第三方开源模块"></a>第三方开源模块</h5><h5 id="自定义模块"><a href="#自定义模块" class="headerlink" title="自定义模块"></a>自定义模块</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 模块的常用方法</span></span><br><span class="line"><span class="comment"># 打印出当前可调用的方法以及变量名</span></span><br><span class="line"><span class="built_in">dir</span>()</span><br><span class="line"><span class="built_in">dir</span>(sys)</span><br></pre></td></tr></table></figure><h5 id="python解释权对模块路径搜索的顺序"><a href="#python解释权对模块路径搜索的顺序" class="headerlink" title="python解释权对模块路径搜索的顺序"></a>python解释权对模块路径搜索的顺序</h5><ul><li>1、包含输入脚本的目录（如未指定文件，则为当前目录）</li><li>2、PYTHONPATH</li><li>3、安装的默认路径</li></ul><h5 id="模块class总结"><a href="#模块class总结" class="headerlink" title="模块class总结"></a>模块class总结</h5><ul><li>提升代码的可维护性</li><li>提示编码效率</li><li>函数名重复，起名避免与系统重复</li></ul><h4 id="虚拟环境"><a href="#虚拟环境" class="headerlink" title="虚拟环境"></a>虚拟环境</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建虚拟环境</span></span><br><span class="line">python3 -m venv 文件名</span><br><span class="line"><span class="comment"># 激活虚拟环境</span></span><br><span class="line">source 文件名/<span class="built_in">bin</span>/activate</span><br><span class="line"><span class="comment"># 退出虚拟环境</span></span><br><span class="line">deactivate</span><br></pre></td></tr></table></figure><h4 id="第三方库"><a href="#第三方库" class="headerlink" title="第三方库"></a>第三方库</h4><ul><li>pytest</li><li>requests</li></ul><h3 id="常用标准库"><a href="#常用标准库" class="headerlink" title="常用标准库"></a>常用标准库</h3><h4 id="os库"><a href="#os库" class="headerlink" title="os库"></a>os库</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line">os.mkdir()</span><br><span class="line"><span class="comment"># 查看当前所以目录</span></span><br><span class="line">os.listdir()</span><br><span class="line"><span class="comment"># 删除目录</span></span><br><span class="line">os.removedirs()</span><br><span class="line"><span class="comment"># 获取当前路径</span></span><br><span class="line">os.getcwd()</span><br><span class="line"><span class="comment"># 判断文件是否存在</span></span><br><span class="line">os.path.exists()</span><br></pre></td></tr></table></figure><h4 id="time库"><a href="#time库" class="headerlink" title="time库"></a>time库</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取当前秒数</span></span><br><span class="line">time.time()</span><br><span class="line"><span class="comment"># 国际时间格式</span></span><br><span class="line">time.asctime</span><br><span class="line"><span class="comment"># 强制等待时间</span></span><br><span class="line">time.sleep()</span><br><span class="line"><span class="comment"># 获取元组时间类型</span></span><br><span class="line">time,localtime()</span><br><span class="line"><span class="comment"># 格式化时间</span></span><br><span class="line">time.strftime(<span class="string">&quot;%Y年%m月%d日 %H:%M:%S&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="urllib库"><a href="#urllib库" class="headerlink" title="urllib库"></a>urllib库</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 请求链接</span></span><br><span class="line">urllib.request.urlopen(<span class="string">&#x27;url&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="math库"><a href="#math库" class="headerlink" title="math库"></a>math库</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 返回大于等于参数x的最小整数</span></span><br><span class="line">math.ceil(x)</span><br><span class="line"><span class="comment"># 返回小于等于参数x的最小整数</span></span><br><span class="line">math.floor(x)</span><br><span class="line"><span class="comment"># 返回平方根</span></span><br><span class="line">math.sqrt(x)</span><br></pre></td></tr></table></figure><h3 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><ul><li>类：具有相同属性和方法的对象集合</li><li>类变量：在整个实例化的对象中是公用的，类变量定义在类中且在函数体之外，类变量通常不作为实例变量来使用</li><li>局部变量：定义在方法中的变量，只作用于当前实例的类</li><li>实例变量</li><li>继承</li><li>实例化：创建一个类的实例，类的具体对象</li><li>方法：类中定义的函数</li><li>对象</li><li>类方法与实例方法：类方法不能直接访问，类方法直接访问，需要添加一个装饰器：@classmethod</li></ul><h4 id="三大特征"><a href="#三大特征" class="headerlink" title="三大特征"></a>三大特征</h4><h4 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h4><h4 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h4><ul><li>子类可以继承父类的属性和方法</li><li>同时又能新增自己的属性和方法</li><li>子类中有与父类相同的方法时，会覆盖掉父类方法</li><li>父类可以有多个子类</li></ul><h4 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h4><ul><li>在继承关系的基础上建立</li><li>在子类中有与父类相同的方法，并实现的功能不同时，就形成了代码的多态性</li></ul><h3 id="错误与异常"><a href="#错误与异常" class="headerlink" title="错误与异常"></a>错误与异常</h3><h4 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h4><ul><li>语法错误</li><li>逻辑错误</li><li>系统错误</li></ul><h4 id="异常try…except"><a href="#异常try…except" class="headerlink" title="异常try…except"></a>异常try…except</h4><ul><li>try</li><li>except：发生异常时执行</li><li>else：不发生异常时执行</li><li>finally：无论有无异常最终都会执行</li></ul><h5 id="常见异常类型"><a href="#常见异常类型" class="headerlink" title="常见异常类型"></a>常见异常类型</h5><ul><li>除零异常</li><li>名称异常</li><li>索引异常</li><li>键异常</li><li>值异常</li><li>属性异常</li></ul><h5 id="主动抛出异常"><a href="#主动抛出异常" class="headerlink" title="主动抛出异常"></a>主动抛出异常</h5><ul><li>raise 异常名</li></ul><h5 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h5><ul><li>继承Exception类，编写自己的异常</li></ul><h4 id="调试与分析方法"><a href="#调试与分析方法" class="headerlink" title="调试与分析方法"></a>调试与分析方法</h4><h5 id="打印日志"><a href="#打印日志" class="headerlink" title="打印日志"></a>打印日志</h5><ul><li><p>print</p></li><li><p>logging</p></li></ul><h5 id="断点"><a href="#断点" class="headerlink" title="断点"></a>断点</h5><h3 id="输入与输出"><a href="#输入与输出" class="headerlink" title="输入与输出"></a>输入与输出</h3><h4 id="字面量定义"><a href="#字面量定义" class="headerlink" title="字面量定义"></a>字面量定义</h4><ul><li>是将变量或常量通过各种方法组合起来，返回我们想要的字符串</li></ul><h4 id="字面量类型"><a href="#字面量类型" class="headerlink" title="字面量类型"></a>字面量类型</h4><ul><li>数值型</li><li>字符型</li><li>布尔型</li><li>字面量集合(list,tuple,dict,set)</li><li>特殊字面量(None)</li></ul><h4 id="字面量插值"><a href="#字面量插值" class="headerlink" title="字面量插值"></a>字面量插值</h4><h5 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出%"></a>格式化输出%</h5><pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 必须指定一个类型，才能使用</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;my name is %s\nmy age is %d\nmy num is %.3g&quot;</span>%(<span class="string">&#x27;kane&#x27;</span>,<span class="number">11</span>,<span class="number">3.1415</span>))</span><br></pre></td></tr></table></figure></code></pre><h5 id="str-format"><a href="#str-format" class="headerlink" title="str.format()"></a>str.format()</h5><ul><li>​    可字符串，列表，字典</li><li>​    列表，字典使用时需要解包，*list，**dict</li></ul><h5 id="推荐使用F-strings"><a href="#推荐使用F-strings" class="headerlink" title="推荐使用F-strings"></a>推荐使用F-strings</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用方法，在字符串前面加f，则认定字符串需要格式化</span></span><br><span class="line">name = <span class="string">&#x27;kane&#x27;</span></span><br><span class="line">age = <span class="string">&#x27;18&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;my name is <span class="subst">&#123;name&#125;</span>,my age is <span class="subst">&#123;age&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># 大括号里面可以是表达式或函数</span></span><br><span class="line"><span class="comment"># 大括号内不能转义，不能使用“\”</span></span><br></pre></td></tr></table></figure><h4 id="文件读取"><a href="#文件读取" class="headerlink" title="文件读取"></a>文件读取</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开文件</span></span><br><span class="line"><span class="built_in">open</span>()</span><br><span class="line"><span class="comment"># 操作文件</span></span><br><span class="line"><span class="comment"># 查看文件是否可读</span></span><br><span class="line">f.readlines()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取文件中一行</span></span><br><span class="line">f.readline()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取文件全部行</span></span><br><span class="line">f.readlines()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭文件</span></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用with语句，可以将文件打开之后，操作完毕，自动关闭这个文件</span></span><br></pre></td></tr></table></figure><h4 id="json格式转换"><a href="#json格式转换" class="headerlink" title="json格式转换"></a>json格式转换</h4><ul><li>轻量级的数据交换格式</li><li>json由字典和列表组成</li></ul><h5 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h5><ul><li>生成：将对象生成为字符串，存入文件，数据库，在网络传输等</li><li>解析：解析来自文件，数据库，网络传输的字符串成python对象</li><li>跨语言的数据交换</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将json对象转换为str</span></span><br><span class="line">json.dumps(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将str对象转换为json</span></span><br><span class="line">json.loads(data)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git</title>
      <link href="/2022/01/07/git/"/>
      <url>/2022/01/07/git/</url>
      
        <content type="html"><![CDATA[<h4 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mac安装：</span></span><br><span class="line">brew intasll git</span><br><span class="line"><span class="comment">#查看版本</span></span><br><span class="line">git --version</span><br><span class="line"><span class="comment"># git配置用户名、邮箱</span></span><br><span class="line">git config --global user.name <span class="string">&quot;yanxiaokang&quot;</span></span><br><span class="line">git config --global user.mail <span class="string">&quot;yanxiaokang1993@163.com&quot;</span></span><br><span class="line"><span class="comment"># 验证配置</span></span><br><span class="line">git config --global --list</span><br><span class="line"><span class="comment"># ssh秘钥生成</span></span><br><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;yanxiaokang1993@163.com&quot;</span></span><br><span class="line"><span class="comment"># 生成秘钥路径</span></span><br><span class="line"><span class="built_in">cd</span> /Users/yanxiaokang/.ssh</span><br><span class="line">id_rsa.pub  <span class="comment">#公钥配置到git</span></span><br><span class="line">id_rsa  <span class="comment">#私钥</span></span><br></pre></td></tr></table></figure><h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当前目录创建仓库</span></span><br><span class="line">git init</span><br><span class="line"><span class="comment"># 提交文件至临时仓库</span></span><br><span class="line">git add 文件名</span><br><span class="line"><span class="comment">#当前目录全部文件添加至临时仓库</span></span><br><span class="line">git add . </span><br><span class="line"><span class="comment"># 提交备注并提交到仓库</span></span><br><span class="line">git commit -m ’xxx‘</span><br><span class="line"><span class="comment"># 查看当前git状态</span></span><br><span class="line">git status</span><br><span class="line"><span class="comment"># 查看修改前后对比</span></span><br><span class="line">git diff</span><br><span class="line"><span class="comment"># 未add之前还原到上一次修改</span></span><br><span class="line">git checkout 文件名</span><br><span class="line"><span class="comment"># 已add之后，把文件从临时仓库删除，再使用checkout还原工作区</span></span><br><span class="line">git reset HEAD 文件名</span><br><span class="line"><span class="comment"># 返回到上一次commit的版本</span></span><br><span class="line">git reset --hard HEAD</span><br></pre></td></tr></table></figure><h4 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 建立远程连接</span></span><br><span class="line">git remote add origin xxx</span><br><span class="line"><span class="comment"># 首次推送至远程仓库，之后只需要 git push</span></span><br><span class="line">git push -u origin master</span><br><span class="line"><span class="comment"># 首次强制推送</span></span><br><span class="line">git push -f -u origin master</span><br><span class="line"><span class="comment"># 合并commit提交记录</span></span><br><span class="line">git rebase -i commit名</span><br><span class="line"><span class="comment"># 修改远程仓库</span></span><br><span class="line">git remote rm origin <span class="comment"># 删除原有远程仓库</span></span><br><span class="line">git remote add origin url <span class="comment"># 添加新的远程仓库</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆仓库</span></span><br><span class="line">git <span class="built_in">clone</span> url</span><br><span class="line"></span><br><span class="line"><span class="comment"># 同步远程仓库</span></span><br><span class="line">git pull</span><br></pre></td></tr></table></figure><h4 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建分支</span></span><br><span class="line">git branch 分支名</span><br><span class="line"><span class="comment"># 切换分支</span></span><br><span class="line">git checkout 分支名</span><br><span class="line"><span class="comment"># 创建并切换</span></span><br><span class="line">git checkout -b 分支名</span><br><span class="line"><span class="comment"># 查看分支</span></span><br><span class="line">git branch</span><br><span class="line"><span class="comment"># 将远程仓库更新至本地仓库</span></span><br><span class="line">git pull</span><br><span class="line"><span class="comment"># 合并分支</span></span><br><span class="line">git merge 分支名</span><br><span class="line"><span class="comment"># 删除分支</span></span><br><span class="line">git branch -D 分支名</span><br></pre></td></tr></table></figure><h4 id="git-pull-遇到错误：error-Your-local-changes-to-the-following-files-would-be-overwritten-by-merge"><a href="#git-pull-遇到错误：error-Your-local-changes-to-the-following-files-would-be-overwritten-by-merge" class="headerlink" title="git pull 遇到错误：error: Your local changes to the following files would be overwritten by merge:"></a>git pull 遇到错误：error: Your local changes to the following files would be overwritten by merge:</h4><p>原因：本地代码与远程不一致</p><p>解决1:想保留本地代码如果你想保留刚才本地修改的代码，并把git服务器上的代码pull到本地（本地刚才修改的代码将会被暂时封存起来）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br><span class="line">git pull origin master</span><br><span class="line">git stash pop</span><br></pre></td></tr></table></figure><p>解决2:如果你想完全地覆盖本地的代码，只保留服务器端代码，则直接回退到上一个版本，再进行pull</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard</span><br><span class="line">git pull origin master</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试平台-前端基础</title>
      <link href="/2021/12/17/2021-12-17-%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0-%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"/>
      <url>/2021/12/17/2021-12-17-%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0-%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h4 id="Vue-js介绍"><a href="#Vue-js介绍" class="headerlink" title="Vue.js介绍"></a>Vue.js介绍</h4><ul><li>是一套用于构建用户界面的渐进式框架</li><li>被设计成自底向上逐层应用</li><li>的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合</li><li>学习Vue.js需要一定的html、css和JavaScript基础</li></ul><h5 id="MVVM模式"><a href="#MVVM模式" class="headerlink" title="MVVM模式"></a>MVVM模式</h5><p><img src="https://s2.loli.net/2022/01/13/n7MpjxVhidOLU53.png" alt="image-20220113142654911"></p><ul><li>DOM：用户能看到的部分，与用户交互的部分</li><li>Model：存储数据的层，后端返回的数据以及用户请求的数据都存在model层</li><li>Vue层：dom层与model层之间的交互中转</li></ul><h5 id="Vue组件化开发"><a href="#Vue组件化开发" class="headerlink" title="Vue组件化开发"></a>Vue组件化开发</h5><ul><li>将页面拆分为多个组件，每个组件依赖的css、js、模板、图片等资源放在一起维护</li><li>因为组件是资源独立的，所以在系统内部可复用，组件与组件之间可以嵌套</li></ul><h5 id="组件库使用"><a href="#组件库使用" class="headerlink" title="组件库使用"></a>组件库使用</h5><ul><li>ElememtUI</li><li>BootstrapVue</li><li>Vuetify</li></ul><h5 id="Vue-js安装"><a href="#Vue-js安装" class="headerlink" title="Vue.js安装"></a>Vue.js安装</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># npm方式安装，需要依赖node环境</span></span><br><span class="line">npm install vue</span><br></pre></td></tr></table></figure><h5 id="Vue的内部指令"><a href="#Vue的内部指令" class="headerlink" title="Vue的内部指令"></a>Vue的内部指令</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 元素是否存在</span><br><span class="line">v-if v-else</span><br><span class="line"># 元素是否显示</span><br><span class="line">v-show</span><br><span class="line"># 循环</span><br><span class="line">v-for</span><br><span class="line"># 绑定事件</span><br><span class="line">v-on</span><br><span class="line"># 绑定属性</span><br><span class="line">v-bind</span><br><span class="line"># 绑定数据</span><br><span class="line">v-model</span><br></pre></td></tr></table></figure><h5 id="vue的生命周期"><a href="#vue的生命周期" class="headerlink" title="vue的生命周期"></a>vue的生命周期</h5><ul><li>钩子函数的使用</li></ul><h4 id="Vue项目实践"><a href="#Vue项目实践" class="headerlink" title="Vue项目实践"></a>Vue项目实践</h4><h5 id="Vue-cli安装"><a href="#Vue-cli安装" class="headerlink" title="Vue-cli安装"></a>Vue-cli安装</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vue-cli基于webpack构建，并带有合理的默认配置</span></span><br><span class="line"><span class="comment"># webpack是一个JavaScript应用程序的静态模块打包器</span></span><br><span class="line">npm install vue-cli -g</span><br><span class="line"><span class="comment"># 验证版本</span></span><br><span class="line">vue -V</span><br></pre></td></tr></table></figure><h5 id="图形化配置项目"><a href="#图形化配置项目" class="headerlink" title="图形化配置项目"></a>图形化配置项目</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开vue项目管理器</span></span><br><span class="line">vue ui</span><br><span class="line"><span class="comment"># 如果上面命令没有反应，tian</span></span><br><span class="line">cnpm i -g @vue/cli</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 测试平台开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> Vue.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试平台-后端基础</title>
      <link href="/2021/12/17/2021-12-17-%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0-%E5%90%8E%E7%AB%AF%E5%9F%BA%E7%A1%80/"/>
      <url>/2021/12/17/2021-12-17-%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0-%E5%90%8E%E7%AB%AF%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h4 id="后端开发主要技术点"><a href="#后端开发主要技术点" class="headerlink" title="后端开发主要技术点"></a>后端开发主要技术点</h4><ul><li>页面渲染：客户端渲染页面(SPA)、服务端渲染页面(模板技术)</li><li>数据库连接：数据连接池、数据访问</li><li>服务管理：接口、路由、权限</li><li>异步任务调度：异步、同步、回调</li></ul><h4 id="后端开发框架"><a href="#后端开发框架" class="headerlink" title="后端开发框架"></a>后端开发框架</h4><h6 id="迷你型框架：flask"><a href="#迷你型框架：flask" class="headerlink" title="迷你型框架：flask"></a>迷你型框架：flask</h6><h6 id="大而全框架：django"><a href="#大而全框架：django" class="headerlink" title="大而全框架：django"></a>大而全框架：django</h6><h4 id="flask框架"><a href="#flask框架" class="headerlink" title="flask框架"></a>flask框架</h4><h5 id="flask中文文档：https-dormousehole-readthedocs-io-en-latest"><a href="#flask中文文档：https-dormousehole-readthedocs-io-en-latest" class="headerlink" title="flask中文文档：https://dormousehole.readthedocs.io/en/latest/"></a>flask中文文档：<a href="https://dormousehole.readthedocs.io/en/latest/">https://dormousehole.readthedocs.io/en/latest/</a></h5><ul><li>路由：get、post</li><li>请求：get、form、json、cookie、path</li><li>响应：json、cookie</li><li>session：基于cookie的session机制</li><li>模板技术：不推荐学习，直接客户端渲染页面即可（SPA）</li></ul><h4 id="数据持久化技术"><a href="#数据持久化技术" class="headerlink" title="数据持久化技术"></a>数据持久化技术</h4><ul><li>传统数据库连接方式：pymysql库</li><li>ORM模型：sqlalchemy</li></ul><h4 id="跨平台api对接"><a href="#跨平台api对接" class="headerlink" title="跨平台api对接"></a>跨平台api对接</h4><h5 id="调度平台-jenkins"><a href="#调度平台-jenkins" class="headerlink" title="调度平台-jenkins"></a>调度平台-jenkins</h5><ul><li>通过python-jenjinsapi来操作jenkins的任务</li></ul>]]></content>
      
      
      <categories>
          
          <category> 测试平台开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> flask </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>selenium grid实战</title>
      <link href="/2021/12/17/docker%E5%AE%9E%E6%88%98/"/>
      <url>/2021/12/17/docker%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<h2 id="1、selenium-grid分布式UI自动化"><a href="#1、selenium-grid分布式UI自动化" class="headerlink" title="1、selenium grid分布式UI自动化"></a>1、selenium grid分布式UI自动化</h2><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>selenium团队开发出的一款工具，本身是为浏览器兼容而生，但是又能很好的支持用例的分布式执行</p><h4 id="分布式概念"><a href="#分布式概念" class="headerlink" title="分布式概念"></a><strong>分布式概念</strong></h4><p>1、由一个主hub节点接受需要执行用例的命令，然后主hub节点根据内置的规则分配给若干个node代理节点去调用浏览器来执行</p><p>2、用例执行采用先进先出的原则，如果浏览器不足时，未分配到的用例等待先分配的用例执行完成后，再去执行</p><p><img src="https://s2.loli.net/2022/01/06/JKFlLUsgHmIzqc1.png" alt="grid概念"></p><h4 id="grid3搭建"><a href="#grid3搭建" class="headerlink" title="grid3搭建"></a>grid3搭建</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拉取镜像</span></span><br><span class="line">docker pull selenium/hub:3.7.1-beryllium</span><br><span class="line">docker pull selenium/node-chrome-debug:3.7.1-beryllium</span><br><span class="line"><span class="comment"># 启动主节点容器 --name指定容器名称；-p端口映射；-e指定环境变量； -d后台运行</span></span><br><span class="line">docker run --name=hub3.0 -p 5001:4444 -e GRID_TIMEOUT=0 -e GRID_THROW_ON_CAPABILITY_NOT_PRESENT=<span class="literal">true</span> -e GRID_NEW_SESSION_WAIT_TIMEOUT=-1 -e GRID_BROWSER_TIMEOUT=15000 -e GRID_TIMEOUT=30000 -e GRID_CLEAN_UP_CYCLE=30000 -d selenium/hub:3.7.1-beryllium</span><br><span class="line"><span class="comment"># 启动从节点容器 NODE_MAX_INSTANCES/NODE_MAX_SESSION 指定的数量需保持一致，开启浏览器的上限；-v执行一个虚拟内存位置 --link与主节点链接到起来</span></span><br><span class="line">docker run --name=chrome3.0 -p 5902:5900 -e NODE_MAX_INSTANCES=6 -e NODE_MAX_SESSION=6 -e NODE_REGISTER_CYCLE=5000 -e DBUS_SESSION_BUS_ADDRESS=/dev/null -v /dev/shm:/dev/shm --link hub -d selenium/node-chrome-debug:3.7.1-beryllium</span><br></pre></td></tr></table></figure><h4 id="grid4搭建"><a href="#grid4搭建" class="headerlink" title="grid4搭建"></a>grid4搭建</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker pull selenium/hub:4.0.0</span><br><span class="line">docker pull selenium/node-chrome:4.0.0</span><br><span class="line"><span class="comment"># 启动主节点</span></span><br><span class="line">docker run --name=hub -p 5442-5444:4442-4444 -d selenium/hub:4.0.0</span><br><span class="line"><span class="comment"># SE_EVENT_BUS_HOST指定主节点ip，SE_NODE_MAX_SESSIONS最大浏览器限制</span></span><br><span class="line">docker run --name=chrome -p 5902:5900 -e SE_EVENT_BUS_HOST=101.35.13.59 -e SE_NODE_MAX_SESSIONS=20 -e SE_NODE_OVERRIDE_MAX_SESSIONS=<span class="literal">true</span> -e SE_EVENT_BUS_PUBLISH_PORT=5442 -e SE_EVENT_BUS_SUBSCRIBE_PORT=5443 -v /dev/shm:/dev/shm -d selenium/node-chrome:4.0.0</span><br></pre></td></tr></table></figure><h4 id="dome演示"><a href="#dome演示" class="headerlink" title="dome演示"></a>dome演示</h4><ul><li><p>编写python演示代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.desired_capabilities <span class="keyword">import</span> DesiredCapabilities</span><br><span class="line"></span><br><span class="line">driver = webdriver.Remote(</span><br><span class="line">  <span class="comment"># grid3配置</span></span><br><span class="line">  command_executor=<span class="string">&#x27;http://101.35.13.59:5001/wd/hub&#x27;</span>,</span><br><span class="line">  <span class="comment"># grid4配置</span></span><br><span class="line">  <span class="comment"># command_executor=&#x27;http://101.35.13.59:5001,</span></span><br><span class="line">  desired_capabilities=DesiredCapabilities.CHROME)</span><br><span class="line">driver.get(<span class="string">&#x27;http://www.baidu.com&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(driver.title)</span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure></li><li><p>安装vnc viewer客户端，输入node节点地址+端口，密码默认为secret，可查看节点运行情况</p></li><li><p>执行python代码</p></li></ul><h2 id="2、docker容器相关概念"><a href="#2、docker容器相关概念" class="headerlink" title="2、docker容器相关概念"></a>2、docker容器相关概念</h2><h4 id="docker简介"><a href="#docker简介" class="headerlink" title="docker简介"></a>docker简介</h4><p>docker 是一个开源的应用容器引擎，基于go语言开发，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化，容器是完全使用沙箱机制，相互之间不会有任何接口。</p><h4 id="linux名称空间（namespace）"><a href="#linux名称空间（namespace）" class="headerlink" title="linux名称空间（namespace）"></a>linux名称空间（namespace）</h4><ul><li>进程名称空间</li><li>网络名称空间</li><li>用户名称空间</li><li>mount名称空间</li><li>time名称空间</li><li>ipc名称空间</li><li>cgroups名称空间</li></ul><h4 id="docker隔离机制"><a href="#docker隔离机制" class="headerlink" title="docker隔离机制"></a>docker隔离机制</h4><p>docker的隔离主要依靠linux namespace名称空间技术，把liunx宿主机看成一个大房子，容器则是里面的小房间，将每个容器进程当成一个房间，达到容器之间相互隔离的目的</p><h4 id="docker网络通讯"><a href="#docker网络通讯" class="headerlink" title="docker网络通讯"></a>docker网络通讯</h4><p>docker主要隔离了<strong>进程名称空间，网络名称空间</strong>，达到容器相互之间隔离，也可以不隔离网络名称空间，达到容器之间可以相互访问</p><ul><li><p>bridge网络模式</p><p>1、内部通讯 ：使用虚拟网卡让容器内部通讯，新增虚拟网卡都是成对出现，一个网卡A放在容器，另外一个网卡A1放在网桥docker0上，达到容器之间内部通讯的目的</p><p><img src="https://s2.loli.net/2022/01/06/JMvON3hUBQzTa5L.png" alt="docker0网桥"></p><p><img src="https://s2.loli.net/2022/01/06/RP9Wldcwn6x1rvH.png" alt="内部通讯"></p><p>2、外部通讯：基于liunx iptables做端口映射，将容器端口映射到宿主机使容器暴露在外部网络，如果容器端口映射为-p 8080:80，此时用户访问8080端口时，宿主机将网络请求全部转发至容器80端口上</p><p><img src="https://s2.loli.net/2022/01/06/kD1fC58iunZya6l.png" alt="外部通讯"></p></li><li><p>host网络模式</p><p>完全使用宿主机的网络名称空间，宿主机的网卡，启动容器时 –net=host</p></li><li><p>container网络模式</p><p>使用其他容器的网络名称空间，–net=container:容器名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当某个容器出现网络故障，可以将宿主机的网络名称空间切换为容器的</span></span><br><span class="line">docker inspect 容器名     <span class="comment"># 查看容器源信息，找到进程名pid</span></span><br><span class="line"><span class="built_in">cd</span> /proc/进程名/ns     <span class="comment"># 查看容器名称空间</span></span><br><span class="line">nsenter -t 进程名 -n    <span class="comment"># 切换成容器的网络名称空间</span></span><br><span class="line"><span class="built_in">exit</span> <span class="comment"># 退出容器网络名称空间，回到宿主机网络名称空间</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><p>练习题：使用不同的网络模式搭建selenium grid</p><h4 id="3、dockerfile使用"><a href="#3、dockerfile使用" class="headerlink" title="3、dockerfile使用"></a>3、dockerfile使用</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 最简单的创建镜像方式</span></span><br><span class="line">docker commit 容器名 新镜像名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用dockerfile的方式创建python3.8环境镜像</span></span><br><span class="line">mkdir dockerfile_python3.8   <span class="comment"># 创建一个文件夹</span></span><br><span class="line"><span class="built_in">cd</span> dockerfile</span><br><span class="line">touch Dockerfile</span><br><span class="line">wget https://www.python.org/ftp/python/3.8.0/Python-3.8.0.tgz</span><br><span class="line">vim Dockerfile  <span class="comment"># 编辑Dockerfile文件</span></span><br><span class="line">docker build -t python3.8 .  <span class="comment"># 创建镜像</span></span><br></pre></td></tr></table></figure><p>Dockerfile文件内容</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> centos:<span class="number">7</span></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> maintainer=<span class="string">&quot;yanxiaokang1993@163.com&quot;</span></span></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> description=<span class="string">&quot;centos7 &amp; python3.8&quot;</span></span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./Python-3.8.0.tgz ./Python-3.8.0.tgz</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">set</span> -ex \</span></span><br><span class="line"><span class="bash">    <span class="comment"># 预安装所需组件</span></span></span><br><span class="line">    &amp;&amp; yum update -y \</span><br><span class="line">    &amp;&amp; yum install -y wget tar libffi-devel zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc make initscripts \</span><br><span class="line">    &amp;&amp; yum clean all \</span><br><span class="line">    <span class="comment"># &amp;&amp; wget https://www.python.org/ftp/python/3.8.0/Python-3.8.0.tgz \</span></span><br><span class="line">    &amp;&amp; tar -zxvf Python-<span class="number">3.8</span>.<span class="number">0</span>.tgz \</span><br><span class="line">    &amp;&amp; cd Python-<span class="number">3.8</span>.<span class="number">0</span> \</span><br><span class="line">    &amp;&amp; ./configure prefix=/usr/local/python3 \</span><br><span class="line">    &amp;&amp; make \</span><br><span class="line">    &amp;&amp; make install \</span><br><span class="line">    &amp;&amp; make clean \</span><br><span class="line">    &amp;&amp; rm -rf /Python-<span class="number">3.8</span>.<span class="number">0</span>* \</span><br><span class="line">    &amp;&amp; yum install -y epel-release \</span><br><span class="line">    &amp;&amp; yum install -y python-pip</span><br><span class="line"><span class="comment"># 设置默认为python3</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">set</span> -ex \</span></span><br><span class="line"><span class="bash">    <span class="comment"># 备份旧版本python</span></span></span><br><span class="line">    &amp;&amp; mv /usr/bin/python /usr/bin/python27 \</span><br><span class="line">    &amp;&amp; mv /usr/bin/pip /usr/bin/pip-python2.<span class="number">7</span> \</span><br><span class="line">    <span class="comment"># 配置默认为python3</span></span><br><span class="line">    &amp;&amp; ln -s /usr/local/python3/bin/python3.<span class="number">8</span> /usr/bin/python \</span><br><span class="line">    &amp;&amp; ln -s /usr/local/python3/bin/pip3 /usr/bin/pip</span><br><span class="line"><span class="comment"># 修复因修改python版本导致yum失效问题</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">set</span> -ex \</span></span><br><span class="line"><span class="bash">    &amp;&amp; sed -i <span class="string">&quot;s#/usr/bin/python#/usr/bin/python2.7#&quot;</span> /usr/bin/yum \</span></span><br><span class="line"><span class="bash">    &amp;&amp; sed -i <span class="string">&quot;s#/usr/bin/python#/usr/bin/python2.7#&quot;</span> /usr/libexec/urlgrabber-ext-down \</span></span><br><span class="line"><span class="bash">    &amp;&amp; yum install -y deltarpm</span></span><br><span class="line"><span class="comment"># 基础环境配置</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">set</span> -ex \</span></span><br><span class="line"><span class="bash">    <span class="comment"># 修改系统时区为东八区</span></span></span><br><span class="line">    &amp;&amp; rm -rf /etc/localtime \</span><br><span class="line">    &amp;&amp; ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \</span><br><span class="line">    &amp;&amp; yum install -y vim \</span><br><span class="line">    <span class="comment"># 安装定时任务组件</span></span><br><span class="line">    &amp;&amp; yum -y install cronie</span><br><span class="line"><span class="comment"># 支持中文</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum install kde-l10n-Chinese -y</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> localedef -c -f UTF-8 -i zh_CN zh_CN.utf8</span></span><br><span class="line"><span class="comment"># 更新pip版本</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip install -i https://pypi.tuna.tsinghua.edu.cn/simple --upgrade pip</span></span><br><span class="line"><span class="keyword">ENV</span> LC_ALL zh_CN.UTF-<span class="number">8</span></span><br><span class="line"><span class="keyword">ENV</span> TZ Asia/Shanghai</span><br><span class="line"><span class="keyword">ENV</span> PATH /usr/local/python3/bin/:$PATH</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> ln -sf /usr/share/zoneinfo/Asia/ShangHai /etc/localtime</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> selenium grid </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试平台开发</title>
      <link href="/2021/12/17/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E5%BC%80%E5%8F%91/"/>
      <url>/2021/12/17/%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><h5 id="1、为什么要做测试平台？"><a href="#1、为什么要做测试平台？" class="headerlink" title="1、为什么要做测试平台？"></a>1、为什么要做测试平台？</h5><ul><li>市场需求：测试平台开发是目前行业中一个热门的技术，能为团队带来市场价值，比如wetest</li><li>公司需求：良好的测试平台能减轻公司内部的沟通成本</li></ul><h5 id="2、什么时候做测试平台？"><a href="#2、什么时候做测试平台？" class="headerlink" title="2、什么时候做测试平台？"></a>2、什么时候做测试平台？</h5><ul><li>已有开源测试平台不能满足需求，不要轻易造轮子</li><li>公司内部测试体系、测试技术健全，构建平台可以带动整个团队甚至团队之外的其他团队的提升</li><li>需要公司级别的定制，整合公司内部多套平台</li></ul><h5 id="3、怎么做测试平台？"><a href="#3、怎么做测试平台？" class="headerlink" title="3、怎么做测试平台？"></a>3、怎么做测试平台？</h5><ul><li>拆分平台功能：</li></ul><p><img src="https://s2.loli.net/2022/01/06/cnjxuGWr5PUbm6A.png" alt="image-20220105144819087"></p><h4 id="架构设计"><a href="#架构设计" class="headerlink" title="架构设计"></a>架构设计</h4><h5 id="常用的技术框架与组件"><a href="#常用的技术框架与组件" class="headerlink" title="常用的技术框架与组件"></a>常用的技术框架与组件</h5><ul><li>前端：bootstrap、vue、react</li><li>后端：django、flask、spring boot(java)</li><li>数据库：mysql、es</li><li>任务调度：jenkins</li><li>数据报表：echarts、vega、kibana、grafana、allure</li></ul><h5 id="选择框架：vue-flask-mysql-jenkins-allure"><a href="#选择框架：vue-flask-mysql-jenkins-allure" class="headerlink" title="选择框架：vue+flask+mysql+jenkins+allure"></a>选择框架：vue+flask+mysql+jenkins+allure</h5><p><img src="https://s2.loli.net/2022/01/06/EAxpQTNLCfSkYot.png" alt="image-20220105153815110"></p><h4 id="flask基础"><a href="#flask基础" class="headerlink" title="flask基础"></a>flask基础</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入Flask</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="comment"># 实例化flask</span></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="comment"># 定义路由地址，以及请求方式 methods的值传入list</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/testcase&quot;</span>,methods=[<span class="string">&#x27;post&#x27;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_case</span>():</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;status&quot;</span>:<span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/testcase&quot;</span>,methods=[<span class="string">&#x27;get&#x27;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_case</span>():</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;status&quot;</span>:<span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/testcase&quot;</span>,methods=[<span class="string">&#x27;put&#x27;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">modify_case</span>():</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;status&quot;</span>:<span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/testcase&quot;</span>,methods=[<span class="string">&#x27;delete&#x27;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">del_case</span>():</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;status&quot;</span>:<span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># debug=True调试模式，热加载，方便测试</span></span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><ul><li>测试驱动开发模式，没写一个功能模块，就编写一个test自测，提升平台的健壮性</li></ul><h5 id="使用flask-restful风格定义接口"><a href="#使用flask-restful风格定义接口" class="headerlink" title="使用flask_restful风格定义接口"></a>使用flask_restful风格定义接口</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> utils.log_utils <span class="keyword">import</span> logger</span><br><span class="line"><span class="keyword">from</span> flask_restful <span class="keyword">import</span> Resource,Api</span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例化flask</span></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">api = Api(app)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestCaseServe</span>(<span class="params">Resource</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        测试用例的新增</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        logger.info(<span class="string">&#x27;测试新增接口&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&quot;status&quot;</span>:<span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delete</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        测试用例的删除</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        logger.info(<span class="string">&#x27;测试删除接口&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&quot;status&quot;</span>:<span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        测试用例的修改</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        logger.info(<span class="string">&#x27;测试修改接口&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&quot;status&quot;</span>:<span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        测试用例的查询</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        logger.info(<span class="string">&#x27;测试查询接口&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&quot;status&quot;</span>:<span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">api.add_resource(TestCaseServe,<span class="string">&#x27;/testcase&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># debug=True调试模式，热加载，方便测试</span></span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h5 id="使用docker搭建mysql环境"><a href="#使用docker搭建mysql环境" class="headerlink" title="使用docker搭建mysql环境"></a>使用docker搭建mysql环境</h5><ul><li>见docker相关笔记</li></ul><h5 id="使用flask-sqlalchemy操作数据库"><a href="#使用flask-sqlalchemy操作数据库" class="headerlink" title="使用flask_sqlalchemy操作数据库"></a>使用flask_sqlalchemy操作数据库</h5><h6 id="设计表"><a href="#设计表" class="headerlink" title="设计表"></a>设计表</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"><span class="comment"># 实例化flask</span></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="comment"># 数据库配置信息</span></span><br><span class="line">username = <span class="string">&#x27;root&#x27;</span></span><br><span class="line">password = <span class="string">&#x27;123456&#x27;</span></span><br><span class="line">ip = <span class="string">&#x27;101.35.13.59&#x27;</span></span><br><span class="line">port = <span class="string">&#x27;3306&#x27;</span></span><br><span class="line">database = <span class="string">&#x27;test_db&#x27;</span></span><br><span class="line"><span class="comment"># 对数据库信息赋值</span></span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_DATABASE_URI&#x27;</span>] = <span class="string">f&#x27;mysql+pymysql://<span class="subst">&#123;username&#125;</span>:<span class="subst">&#123;password&#125;</span>@<span class="subst">&#123;ip&#125;</span>:<span class="subst">&#123;port&#125;</span>/<span class="subst">&#123;database&#125;</span>?charset=utf8&#x27;</span></span><br><span class="line"><span class="comment"># 忽略报错信息</span></span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_TRACK_MODIFICATIONS&#x27;</span>] = <span class="literal">True</span></span><br><span class="line"><span class="comment"># 实例化数据库对象</span></span><br><span class="line">db = SQLAlchemy(app)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义类，必须继承db.Model</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>(<span class="params">db.Model</span>):</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer,primary_key=<span class="literal">True</span>)</span><br><span class="line">    username = db.Column(db.String(<span class="number">80</span>),unique=<span class="literal">True</span>,nullable=<span class="literal">False</span>)</span><br><span class="line">    email = db.Column(db.String(<span class="number">120</span>),unique=<span class="literal">True</span>,nullable=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&#x27;user <span class="subst">&#123;self.username&#125;</span>&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># #创建数据库的所有表</span></span><br><span class="line">    db.create_all()</span><br><span class="line">    <span class="comment"># 删除数据库所有的表</span></span><br><span class="line">    <span class="comment"># db.drop_all()</span></span><br></pre></td></tr></table></figure><h6 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user1 = User(<span class="built_in">id</span>=<span class="number">1</span>,username=<span class="string">&#x27;张三&#x27;</span>,email=<span class="string">&#x27;123@123.com&#x27;</span>)</span><br><span class="line">   <span class="comment"># 将数据提交至session</span></span><br><span class="line"> db.session.add(user1)</span><br><span class="line"> db.session.commit()</span><br><span class="line"> db.session.close()</span><br></pre></td></tr></table></figure><h6 id="批量添加数据"><a href="#批量添加数据" class="headerlink" title="批量添加数据"></a>批量添加数据</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一种方式</span></span><br><span class="line">user1 = User(<span class="built_in">id</span>=<span class="number">1</span>,username=<span class="string">&#x27;张三&#x27;</span>,email=<span class="string">&#x27;123@123.com&#x27;</span>)</span><br><span class="line">user2 = User(<span class="built_in">id</span>=<span class="number">2</span>, username=<span class="string">&#x27;张四&#x27;</span>, email=<span class="string">&#x27;124@123.com&#x27;</span>)</span><br><span class="line"><span class="comment"># 将数据提交至session</span></span><br><span class="line">db.session.add(user1)</span><br><span class="line">db.session.add(user2)</span><br><span class="line">db.session.commit()</span><br><span class="line">db.session.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种方式</span></span><br><span class="line">db.session.add_all([user1,user2])</span><br><span class="line">db.session.commit()</span><br><span class="line">db.session.close()</span><br></pre></td></tr></table></figure><h6 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询全部数据</span></span><br><span class="line">res = User.query.<span class="built_in">all</span>()</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印全部数据的username，email</span></span><br><span class="line"><span class="keyword">for</span> re <span class="keyword">in</span> res:</span><br><span class="line">  <span class="built_in">print</span>(re.username,re.email)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 筛选查询</span></span><br><span class="line"><span class="comment"># usernaem为张三的全部数据</span></span><br><span class="line">res_all = User.query.filter_by(username=<span class="string">&#x27;张三&#x27;</span>).<span class="built_in">all</span>()</span><br><span class="line"><span class="comment"># usernaem为张三的第一条数据</span></span><br><span class="line">res = User.query.filter_by(username=<span class="string">&#x27;张三&#x27;</span>).first()</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure><h6 id="数据删除"><a href="#数据删除" class="headerlink" title="数据删除"></a>数据删除</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据删除</span></span><br><span class="line">User.query.filter_by(<span class="built_in">id</span>=<span class="number">1</span>).delete()</span><br><span class="line"><span class="comment"># 数据更改后，需要commit、close</span></span><br><span class="line">db.session.commit()</span><br><span class="line">db.session.close()</span><br></pre></td></tr></table></figure><h6 id="数据更新"><a href="#数据更新" class="headerlink" title="数据更新"></a>数据更新</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据修改</span></span><br><span class="line"><span class="comment"># 第一种方式</span></span><br><span class="line">res = User.query.filter_by(<span class="built_in">id</span>=<span class="number">2</span>).first()</span><br><span class="line">res.username = <span class="string">&#x27;哈哈&#x27;</span></span><br><span class="line"><span class="comment"># 数据更改后，需要commit、close</span></span><br><span class="line">db.session.commit()</span><br><span class="line">db.session.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种方式</span></span><br><span class="line">res = User.query.filter_by(<span class="built_in">id</span>=<span class="number">2</span>).update(&#123;<span class="string">&#x27;username&#x27;</span>:<span class="string">&#x27;嘻嘻&#x27;</span>&#125;)</span><br><span class="line">db.session.commit()</span><br><span class="line">db.session.close()</span><br></pre></td></tr></table></figure><h5 id="将接口与数据库连接"><a href="#将接口与数据库连接" class="headerlink" title="将接口与数据库连接"></a>将接口与数据库连接</h5>]]></content>
      
      
      <categories>
          
          <category> 测试平台开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> Vue.js </tag>
            
            <tag> flask </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker基础</title>
      <link href="/2021/12/15/docker%E5%9F%BA%E7%A1%80/"/>
      <url>/2021/12/15/docker%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h3 id="1、docker的基本概念"><a href="#1、docker的基本概念" class="headerlink" title="1、docker的基本概念"></a>1、docker的基本概念</h3><h4 id="1-1-docker原理："><a href="#1-1-docker原理：" class="headerlink" title="1.1 docker原理："></a>1.1 docker原理：</h4><blockquote><p>docker是一个开源的容器引擎，让开发者可以打包他们的应用以及依赖包（环境）到一个可移植的镜像中，然后发布到任何流行的linux或windows上，也可以实现虚拟化，容器是完全使用沙箱机制，相互之间不会有任何接口</p></blockquote><h4 id="1-2-docker三大名词"><a href="#1-2-docker三大名词" class="headerlink" title="1.2 docker三大名词"></a>1.2 docker三大名词</h4><h5 id="镜像-images"><a href="#镜像-images" class="headerlink" title="镜像(images):"></a>镜像(images):</h5><blockquote><p>通过运行镜像启动容器，一个镜像是一个可执行的包，其中包括运行应用程序所需要的所有内容-代码，运行时，库、环境变量和配置文件。</p></blockquote><h5 id="容器-container"><a href="#容器-container" class="headerlink" title="容器(container):"></a>容器(container):</h5><blockquote><p>容器时镜像运行时示例-当被执行时(即，镜像状态，或者用户进程)在内存中，可以使用命令查看正在运行容器的列表docker ps,就像在Linux中一样。</p></blockquote><h5 id="仓库-DockerHub"><a href="#仓库-DockerHub" class="headerlink" title="仓库(DockerHub):"></a>仓库(DockerHub):</h5><blockquote><p>DockerHub就相当于Maven的Repository，在Respository中存放是一个一个的jar包，而在DockerHub存放的是一个一个的镜像。</p></blockquote><h4 id="1-3-容器与虚拟机的区别"><a href="#1-3-容器与虚拟机的区别" class="headerlink" title="1.3 容器与虚拟机的区别"></a>1.3 容器与虚拟机的区别</h4><ul><li>容器中运行原生Linux和共享主机与其它容器的内核，它运行一个独立的进程，不占用任何其它可执行文件的内存，使其轻量化。</li><li>虚拟机(VM)运行一个完整的“客户”操作系统，通过虚拟机管理程序虚拟访问主机资源。虚拟机提供的环境比大多数应用程序需要的资源多。</li></ul><h2 id="2、docker安装"><a href="#2、docker安装" class="headerlink" title="2、docker安装"></a>2、docker安装</h2><h4 id="1-准备linux内核版本超过3-0，查看内核命令"><a href="#1-准备linux内核版本超过3-0，查看内核命令" class="headerlink" title="1.准备linux内核版本超过3.0，查看内核命令"></a>1.准备linux内核版本超过3.0，查看内核命令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure><h4 id="2-安装gcc"><a href="#2-安装gcc" class="headerlink" title="2.安装gcc"></a>2.安装gcc</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc</span><br><span class="line">yum -y install gcc-c++</span><br></pre></td></tr></table></figure><h4 id="3-卸载旧版本docker"><a href="#3-卸载旧版本docker" class="headerlink" title="3.卸载旧版本docker"></a>3.卸载旧版本docker</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yum remove docker \</span><br><span class="line">    docker-client \</span><br><span class="line">    docker-client-latest \</span><br><span class="line">    docker-common \</span><br><span class="line">    docker-latest \</span><br><span class="line">    docker-latest-logrotate \</span><br><span class="line">    docker-logrotate \</span><br><span class="line">    docker-engine</span><br></pre></td></tr></table></figure><h4 id="4-安装yum-utils"><a href="#4-安装yum-utils" class="headerlink" title="4.安装yum-utils"></a>4.安装yum-utils</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils</span><br></pre></td></tr></table></figure><h4 id="5-安装docker仓库"><a href="#5-安装docker仓库" class="headerlink" title="5.安装docker仓库"></a>5.安装docker仓库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用阿里云镜像地址安装：</span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="6-更新-yum-软件包索引"><a href="#6-更新-yum-软件包索引" class="headerlink" title="6.更新 yum 软件包索引"></a>6.更新 yum 软件包索引</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum makecache fast</span><br></pre></td></tr></table></figure><h4 id="7-安装-docker-ce-Docker社区版"><a href="#7-安装-docker-ce-Docker社区版" class="headerlink" title="7.安装 docker-ce Docker社区版"></a>7.安装 docker-ce Docker社区版</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure><h4 id="8-启动docker"><a href="#8-启动docker" class="headerlink" title="8.启动docker"></a>8.启动docker</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><h4 id="9-测试docker，查看版本"><a href="#9-测试docker，查看版本" class="headerlink" title="9.测试docker，查看版本"></a>9.测试docker，查看版本</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></table></figure><h4 id="10-测试docker运行hello-world"><a href="#10-测试docker运行hello-world" class="headerlink" title="10.测试docker运行hello-world"></a>10.测试docker运行hello-world</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br></pre></td></tr></table></figure><h4 id="11-查看images"><a href="#11-查看images" class="headerlink" title="11.查看images"></a>11.查看images</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><h2 id="3、卸载docker"><a href="#3、卸载docker" class="headerlink" title="3、卸载docker"></a>3、卸载docker</h2><h4 id="1、卸载docker引擎"><a href="#1、卸载docker引擎" class="headerlink" title="1、卸载docker引擎"></a>1、卸载docker引擎</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure><h4 id="2、删除docker的相关目录"><a href="#2、删除docker的相关目录" class="headerlink" title="2、删除docker的相关目录"></a>2、删除docker的相关目录</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /var/lib/docker</span><br><span class="line">rm -rf /var/lib/contained</span><br></pre></td></tr></table></figure><h2 id="4、docker常用的命令"><a href="#4、docker常用的命令" class="headerlink" title="4、docker常用的命令"></a>4、docker常用的命令</h2><h4 id="1、查看命令帮助"><a href="#1、查看命令帮助" class="headerlink" title="1、查看命令帮助"></a>1、查看命令帮助</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker 命令 --help</span><br><span class="line">docker images --help</span><br></pre></td></tr></table></figure><h4 id="2、镜像命令"><a href="#2、镜像命令" class="headerlink" title="2、镜像命令"></a>2、镜像命令</h4><h5 id="查看所有的镜像"><a href="#查看所有的镜像" class="headerlink" title="查看所有的镜像"></a>查看所有的镜像</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br><span class="line">docker images -a    展示所有镜像 </span><br><span class="line">docker images -q    只展示镜像的ID</span><br><span class="line"></span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">hello-world   latest    feb5d9fea6a5   4 weeks ago   13.3kB</span><br><span class="line"></span><br><span class="line">REPOSITORY:镜像的仓库源</span><br><span class="line">TAG：镜像的标签</span><br><span class="line">IMAGE ID：镜像ID</span><br><span class="line">CREATED：创建时间</span><br><span class="line">SIZE：大小</span><br></pre></td></tr></table></figure><h5 id="搜索镜像"><a href="#搜索镜像" class="headerlink" title="搜索镜像"></a>搜索镜像</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker search 镜像  </span><br><span class="line">docker search 镜像 --filter=starts=3000（搜索stars数在3000以上的image）</span><br></pre></td></tr></table></figure><h5 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull 镜像</span><br><span class="line">docker pull 镜像:版本</span><br></pre></td></tr></table></figure><h5 id="删除镜像"><a href="#删除镜像" class="headerlink" title="删除镜像"></a>删除镜像</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f 镜像id</span><br><span class="line">docker rmi -f $(docker images -aq)  批量删除全部镜像</span><br></pre></td></tr></table></figure><h4 id="3、容器命令"><a href="#3、容器命令" class="headerlink" title="3、容器命令"></a>3、容器命令</h4><h5 id="新建容器并启动"><a href="#新建容器并启动" class="headerlink" title="新建容器并启动"></a>新建容器并启动</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">docker run 参数 镜像</span><br><span class="line">docker run [可选参数] 镜像</span><br><span class="line">可选参数：</span><br><span class="line">--name=&quot;名称&quot;        // 设置容器名</span><br><span class="line">-d                     // 后台方式运行</span><br><span class="line">-it                 // 使用交互方式运行，可以进入容器查看内容</span><br><span class="line">-p                    //（小p）, 指定容器端口</span><br><span class="line">    -p ip:主机端口:容器端口</span><br><span class="line">    -p 主机端口:容器端口（常用）</span><br><span class="line">    -p 容器端口</span><br><span class="line">-P                    //（大P）, 随机指定容器端口</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">新建并进入容器</span><br><span class="line">docker run -it centos /bin/bash</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用root用户进入容器</span><br><span class="line">docker exec -it -u root 容器id /bin/bash</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">容器内退出并停止容器</span><br><span class="line">exit</span><br><span class="line">退出并不停止容器</span><br><span class="line">（Ctrl + P + Q）</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">查看正在运行的容器</span><br><span class="line">docker ps </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">再次进入交互模式的容器</span><br><span class="line">docker attach &#x27;container id&#x27;</span><br></pre></td></tr></table></figure><h5 id="列出运行中的容器"><a href="#列出运行中的容器" class="headerlink" title="列出运行中的容器"></a>列出运行中的容器</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker ps    查看正在运行的容器</span><br><span class="line">docker ps -a 查看运行容器的历史记录</span><br><span class="line">docker ps -a -n=2  查看最近运行的两个容器</span><br><span class="line">docker ps -aq  查看所有容器的ID</span><br></pre></td></tr></table></figure><h5 id="启动并停止容器"><a href="#启动并停止容器" class="headerlink" title="启动并停止容器"></a>启动并停止容器</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker start 容器ID    启动容器</span><br><span class="line">docker restart 容器ID  重启容器</span><br><span class="line">docker stop 容器ID     停止容器</span><br><span class="line">docker kill 容器ID     杀死容器</span><br></pre></td></tr></table></figure><h5 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker rm 容器ID    删除指定容器</span><br><span class="line">docker rm -f 容器ID  强制删除指定容器</span><br><span class="line">docker rm -f $(docker ps -aq)   删除全部容器</span><br></pre></td></tr></table></figure><h4 id="4、其他命令"><a href="#4、其他命令" class="headerlink" title="4、其他命令"></a>4、其他命令</h4><pre><code>docker run -d centos      # 后台启动docker ps中是查看不到进程的需要加上-a参数docker logs -tf --tail 5 容器ID  # 显示日志尾部的5条数据docker top 容器ID# 查看docker容器内部的进程信息docker inspect 容器ID# 查看容器中的元数据docker exec -it 容器ID 终端路径     进入容器后开启一个新的终端docker attach 容器ID     进入当前正在执行的终端# 进入当前正在运行的容器docker cp 容器ID:文件路径  本地路径# 拷贝容器内的文件到本地docker run -d -p 8088:9000 -v /var/run/docker.sock:/var/run/docker.sock  --restart=always portainer/portainer# portainer可视化面板安装</code></pre>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pytest框架</title>
      <link href="/2021/11/17/pytest%E6%A1%86%E6%9E%B6/"/>
      <url>/2021/11/17/pytest%E6%A1%86%E6%9E%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="安装以及装备"><a href="#安装以及装备" class="headerlink" title="安装以及装备"></a>安装以及装备</h2><ol><li>提前安装了python3.6以上</li><li>pip install pytest 安装pytest</li><li>pip install -U pytest 在原基础上更新安装 </li><li>或者在pychram上直接安装<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#运行第一段pytest代码</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inc</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_answer</span>():</span></span><br><span class="line">    <span class="keyword">assert</span> inc(<span class="number">4</span>) == <span class="number">5</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="pytest命名规则"><a href="#pytest命名规则" class="headerlink" title="pytest命名规则"></a>pytest命名规则</h2><ol><li>文件名：test_开头或者_test结尾</li><li>类：Test开头（==测试类中不要添加__init__函数==）</li><li>方法/函数：test_开头（==在类里面的叫方法，在类外面的叫函数==）</li></ol><h2 id="命令运行用例"><a href="#命令运行用例" class="headerlink" title="命令运行用例"></a>命令运行用例</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接执行项目下所有符合要求的测试用例（命名规范符合要求）</span></span><br><span class="line">pytest</span><br><span class="line"><span class="comment"># 指定某个测试文件执行</span></span><br><span class="line">pytest test_dome.py</span><br><span class="line"><span class="comment"># 指定文件中的类执行</span></span><br><span class="line">pytest test_dome.py::TestDome</span><br><span class="line"><span class="comment"># 指定单条测试用例执行</span></span><br><span class="line">pytest test_dome.py::TestDome::test_case1</span><br><span class="line"><span class="comment"># 显示执行过程</span></span><br><span class="line">pytest -v test_dome.py</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 命令运行常用参数</span></span><br><span class="line">-x 用例一旦执行失败，立刻停止执行</span><br><span class="line">--maxfail=num 允许用例失败num次，一旦数量达到则中断执行</span><br><span class="line">-m 标记用例</span><br><span class="line">-k 执行包含某个关键词的测试用例</span><br><span class="line">-v 展示执行过程</span><br><span class="line">-s 显执行日志</span><br><span class="line">-collect-only（测试平台，pytest，pytest自动导入功能）</span><br><span class="line">--lf 只重新运行上次失败的用例</span><br><span class="line">--ff 先运行上次失败，在运行其余的测试</span><br></pre></td></tr></table></figure><p><strong>运行结果分析</strong></p><ol><li>fail  –用例失败</li><li>error  –代码错误，不正确的断言也会</li><li>pass   –用例通过</li><li>warning  –警告，不影响运行</li><li>deselect  –没有被选中</li></ol><h2 id="pytest测试框架结构"><a href="#pytest测试框架结构" class="headerlink" title="pytest测试框架结构"></a>pytest测试框架结构</h2><table><thead><tr><th>类型</th><th>规则</th></tr></thead><tbody><tr><td>setup_module/teardown_module</td><td>全局模块级,每个测试文件前后执行一次</td></tr><tr><td>setup_class/teardown_class</td><td><strong>类级，只在类中前后运行一次（重点）</strong></td></tr><tr><td>setup_function/teardown_function</td><td>函数级，在类外的每个函数前后执行</td></tr><tr><td>setup_method/teardown_method</td><td>方法级，类中的每个方法前后执行</td></tr><tr><td>setup/teardown</td><td><strong>在类中，在每个方法的前后执行（重点）</strong></td></tr></tbody></table><p><strong>setup_method == setup，作用相同</strong></p><h2 id="标记测试用例"><a href="#标记测试用例" class="headerlink" title="标记测试用例"></a>标记测试用例</h2><p><strong>使用方法：@pytest.mark.标签名</strong></p><p><strong>pytest test_dome.py -m 标签名；只执行该标签名的用例</strong></p><ol><li>当筛选标签名执行时，pytest会报警告，需要将标签名配置在pytest.ini文件中</li><li>配置多个标签名时需要换行<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pytest.ini</span><br><span class="line">[pytest]</span><br><span class="line">markers = 标签名<span class="number">1</span></span><br><span class="line">          标签名<span class="number">2</span></span><br><span class="line">          ...</span><br></pre></td></tr></table></figure></li></ol><h2 id="设置跳过，预期失败用例"><a href="#设置跳过，预期失败用例" class="headerlink" title="设置跳过，预期失败用例"></a>设置跳过，预期失败用例</h2><p><strong>@pytest.mark.skip(reason=跳过原因)</strong> </p><ul><li>始终跳过测试用例</li><li>pytest.skip(reason= ) 代码中跳过代码</li></ul><p><strong>@pytest.mark.skipif()</strong> </p><ul><li>条件为True时跳过，False正常执行用例</li><li>条件达到则跳过用例</li></ul><p><strong>@pytest.mark.xfail</strong></p><ul><li>用例还是会执行</li><li>当用例成功时则xpass</li><li>当用例失败时则返回xfail</li></ul><h2 id="参数化"><a href="#参数化" class="headerlink" title="参数化"></a>参数化</h2><p><strong>单参数</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.参数化的名字要与方法中的参数名一一对应</span></span><br><span class="line"><span class="built_in">list</span> = [<span class="string">&#x27;appium&#x27;</span>,<span class="string">&#x27;selenium&#x27;</span>,<span class="string">&#x27;pytest&#x27;</span>]</span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&quot;name&quot;</span>,<span class="built_in">list</span></span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_para</span>(<span class="params">naem</span>):</span></span><br><span class="line">        <span class="keyword">assert</span> name <span class="keyword">in</span> <span class="built_in">list</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>多参数、用例重命名ids</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.如果传递多个参数的话，要放在列表中，类表中嵌套列表/元组</span></span><br><span class="line"><span class="comment"># 2.ids传递的个数需要与传递数据的个数一致</span></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&quot;test_input,expected&quot;</span>,[(<span class="params"><span class="string">&quot;3+3&quot;</span>,<span class="number">6</span></span>),(<span class="params"><span class="string">&quot;2+1&quot;</span>,<span class="number">3</span></span>),(<span class="params"><span class="string">&quot;4-3&quot;</span>,<span class="number">1</span></span>)],ids=[...]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_paras</span>(<span class="params">test_input,expected</span>):</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">eval</span>(test_input) == expected</span><br></pre></td></tr></table></figure><p><strong>笛卡尔积</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.全量测试，把数据全部的排列组合进行测试</span></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&quot;wd&quot;</span>,[<span class="string">&quot;appium&quot;</span>,<span class="string">&quot;selenium&quot;</span>,<span class="string">&quot;pytest&quot;</span>]</span>)</span></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&quot;code&quot;</span>,[<span class="string">&quot;utf-8&quot;</span>,<span class="string">&quot;gbk&quot;</span>,<span class="string">&quot;gb2312&quot;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_dkej</span>(<span class="params">wb,code</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;wd:<span class="subst">&#123;wd&#125;</span>,code:<span class="subst">&#123;code&#125;</span>&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="pytest异常处理"><a href="#pytest异常处理" class="headerlink" title="pytest异常处理"></a>pytest异常处理</h2><p><strong>方法1：try…except</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 捕获异常</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">name</span>(<span class="params">obj,index</span>):</span></span><br><span class="line">    <span class="keyword">return</span> obj[index]</span><br><span class="line"></span><br><span class="line">x = <span class="string">&quot;spam&quot;</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    name(x,<span class="number">9</span>)</span><br><span class="line"><span class="keyword">except</span> IndexError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不存在指定的索引位置&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用raise主动触发异常</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> IndexError</span><br><span class="line"><span class="keyword">except</span> IndexError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;主动触发异常&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自定义异常</span></span><br><span class="line"><span class="comment"># 定义一个Bad类，继承Exception</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bad</span>(<span class="params">Exception</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义一个函数，主动触发异常Bad</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">doomed</span>():</span></span><br><span class="line">    <span class="keyword">raise</span> Bad()</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    doomed()</span><br><span class="line"><span class="keyword">except</span> Bad:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;这是一个自定义异常&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># finally，无论try代码块中是否发生异常都会执行</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> IndexError</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;in finally&quot;</span>)</span><br><span class="line"><span class="comment"># 外面的代码块不会执行</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;out finally&quot;</span>)</span><br></pre></td></tr></table></figure><hr><p><strong>方法2：pytest.raise()</strong></p><p>pytest封装了try…except方法，在pytest中使用raises捕获异常</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exe</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">if</span> x == <span class="number">0</span>:</span><br><span class="line">        <span class="comment"># 定义一个预期的异常ValueError</span></span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&quot;除数不能为o&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>/x</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_raises</span>():</span></span><br><span class="line">    <span class="comment"># 将定义的异常指向变量info</span></span><br><span class="line">    <span class="keyword">with</span> pytest.raises(ValueError) <span class="keyword">as</span> info:</span><br><span class="line">        exe(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(info.<span class="built_in">type</span>)</span><br><span class="line">    <span class="built_in">print</span>(info.value.args[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">assert</span> info.<span class="built_in">type</span> == ValueError</span><br><span class="line">    <span class="keyword">assert</span> info.value.args[<span class="number">0</span>] == <span class="string">&quot;除数不能为o&quot;</span></span><br></pre></td></tr></table></figure><h2 id="数据驱动"><a href="#数据驱动" class="headerlink" title="数据驱动"></a>数据驱动</h2><p><strong>简介</strong></p><blockquote><p>数据的改变从而驱动自动化测试的执行，最终引起测试结果的改变，简单来说，就是参数化的应用</p></blockquote><p><strong>应用场景</strong></p><blockquote><p>app，web，接口自动化测试</p></blockquote><ul><li>测试步骤数据驱动</li><li>测试数据的驱动</li><li>配置文件数据驱动</li></ul><p>参数化与数据驱动的区别</p><ul><li>数据驱动：将数据进行组织，之后对数据进行整合和提炼，形成以数据为中心进行的一切行动</li><li>参数化：将用例所需要的参数变量化，然后将变量指向一系列数据，从而实现同一个测试场景使用不用测试数据进行测试</li></ul><p><strong>1、yaml</strong></p><ol><li>yaml读取数据时默认为列表格式，如果yaml文件格式为字典，则只读取key值</li><li>yaml文件格式类似时，读取时可以把key作为变量，方法传参来指定读取测试数据<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">key：value    <span class="comment">#读取时为字典格式</span></span><br><span class="line"></span><br><span class="line">- </span><br><span class="line"> key：value    <span class="comment">#读取时则为列表格式</span></span><br></pre></td></tr></table></figure></li></ol><p><strong>2、excel</strong></p><blockquote><p>读取excle的常用第三方库，xlrd、xlwings、pandas、==openpyxl==</p></blockquote><ul><li>openpyxl的安装    pip install openpyxl<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#工作簿1.xlsx的内容</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#123</span></span><br><span class="line"><span class="comment">#369</span></span><br><span class="line"><span class="comment">#100200    300</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> openpyxl</span><br><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_excel</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    解析excel的数据</span></span><br><span class="line"><span class="string">    :return: [[1,2,3],[3,6,9],[100,200,300]]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 获取工作簿</span></span><br><span class="line">    book = openpyxl.load_workbook(<span class="string">&quot;./工作簿1.xlsx&quot;</span>)</span><br><span class="line">    <span class="comment"># 获取工作表</span></span><br><span class="line">    sheet = book.active</span><br><span class="line">    <span class="comment"># 获取单元格</span></span><br><span class="line">    cells= sheet[<span class="string">&quot;A1&quot;</span>:<span class="string">&quot;C3&quot;</span>]</span><br><span class="line">    <span class="comment"># 嵌套遍历,获取excel中的测试数据</span></span><br><span class="line">    datas = []</span><br><span class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> cells:</span><br><span class="line">        cell = []</span><br><span class="line">        <span class="keyword">for</span> data <span class="keyword">in</span> value:</span><br><span class="line">            cell.append(data.value)</span><br><span class="line">        datas.append(cell)</span><br><span class="line">    <span class="keyword">return</span> datas</span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&quot;x,y,result&quot;</span>,get_excel(<span class="params"></span>)</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_case1</span>(<span class="params">x,y,result</span>):</span></span><br><span class="line">    <span class="keyword">assert</span> x + y == result</span><br></pre></td></tr></table></figure></li></ul><p><strong>3、csv</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># test.csv文件内容</span></span><br><span class="line"><span class="comment"># 1,2,3</span></span><br><span class="line"><span class="comment"># 3,6,9</span></span><br><span class="line"><span class="comment"># 100,200,300</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_csv</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    获取csv文件数据</span></span><br><span class="line"><span class="string">    :return: [[1,2,3],[3,6,9],[100,200,300]]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 使用with方法open文件后会自动关闭文件</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;../test_data/test.csv&quot;</span>) <span class="keyword">as</span> files:</span><br><span class="line">        rows = csv.reader(files)</span><br><span class="line">        datas = []</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> rows:</span><br><span class="line">            datas.append(line)</span><br><span class="line">        <span class="keyword">return</span> datas</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&quot;x,y,result&quot;</span>,get_csv(<span class="params"></span>)</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_case1</span>(<span class="params">x,y,result</span>):</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">int</span>(x) + <span class="built_in">int</span>(y) == <span class="built_in">int</span>(result)</span><br></pre></td></tr></table></figure><p><strong>4、json</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_json</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    :return: </span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;../test_data/data.json&quot;</span>,<span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> files:</span><br><span class="line">        <span class="comment"># 读取json并保存在data</span></span><br><span class="line">        data = json.loads(files.read())</span><br><span class="line">        <span class="comment"># 取出data中的value并装换成list</span></span><br><span class="line">        data_list = <span class="built_in">list</span>(data.values())</span><br><span class="line">        <span class="comment"># 返回list测试数据</span></span><br><span class="line">        <span class="keyword">return</span> data_list</span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"><span class="string">&quot;x,y,result&quot;</span>,get_json(<span class="params"></span>)</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_case1</span>(<span class="params">x,y,result</span>):</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">int</span>(x) + <span class="built_in">int</span>(y) == <span class="built_in">int</span>(result)</span><br></pre></td></tr></table></figure><h2 id="allure"><a href="#allure" class="headerlink" title="allure"></a>allure</h2><p><strong>安装</strong></p><ol><li>本机环境安装allure：brew install allure</li><li>pytest调用allure需要第三方库：pip install allure-pytest</li></ol><p><strong>添加用例描述</strong></p><ul><li>@allure.title()      测试标题</li><li>@allure.feature()    主模块描述</li><li>@allure.stroy()      子功能描述</li><li>@allure.step()       测试步骤描述<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#直接在用例中使用 </span></span><br><span class="line"><span class="keyword">with</span> allure.step():</span><br><span class="line">    <span class="keyword">assert</span> ...</span><br></pre></td></tr></table></figure></li></ul><p><strong>添加链接</strong></p><ul><li><p>@allure.link()</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用：</span></span><br><span class="line"><span class="meta">@allure.link(<span class="params"><span class="string">&quot;链接&quot;</span>,name=<span class="string">&quot;链接命名&quot;</span></span>)</span></span><br></pre></td></tr></table></figure></li><li><p>@allure.issue()</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用：</span></span><br><span class="line"><span class="meta">@allure.issue(<span class="params"><span class="string">&#x27;bug编号&#x27;</span>,name=<span class="string">&quot;链接命名&quot;</span></span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#运行用例时指向bug管理工具地址：</span></span><br><span class="line"> pytest 用例文件 --alluredir 原始报告保存路径  --clean-alluredir --allure-link-pattern=issue:bug管理工具地址&#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>@allure.testcase()</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用</span></span><br><span class="line">TESTCASELINK = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="meta">@allure.testcase(<span class="params">TESTCASELINK,name=<span class="string">&quot;用例管理平台&quot;</span></span>)</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>设置优先级 @allure.severity()</strong></p><ul><li> BLOCKER = ‘blocker’</li><li> CRITICAL = ‘critical’</li><li> NORMAL = ‘normal’</li><li> MINOR = ‘minor’</li><li> TRIVIAL = ‘trivial’<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用方法</span></span><br><span class="line"><span class="meta">@allure.severity(<span class="params">allure.severity_level.TRIVIAL</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#指定级别运行测试用例：</span></span><br><span class="line">pytest -vs 文件名 --allure-severities 级别,级别 --alluredir=路径</span><br></pre></td></tr></table></figure></li></ul><p>添加附件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用</span></span><br><span class="line">allure.attach.file(<span class="string">&quot;/Users/yanxiaokang/Downloads/chart-download.png&quot;</span>,name=<span class="string">&quot;截图&quot;</span>)</span><br><span class="line">allure.attach(body=<span class="string">&#x27;&lt;h3 class=&quot;aside-title&quot;&gt;目录&lt;/h3&gt;&#x27;</span>,attachment_type=allure.attachment_type.HTML,name=<span class="string">&quot;一段html源码&quot;</span>)</span><br></pre></td></tr></table></figure><p><strong>allure生成报告</strong></p><ul><li>1、执行用例并删除报告文件生成新的报告文件：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pytest -vs 用例文件 --alluredir=目录 --clean-alluredir</span><br></pre></td></tr></table></figure></li><li>2、在线打开报告：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">allure serve 报告目录</span><br></pre></td></tr></table></figure></li><li>3、保存报告在本地：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">allure generate 原始报告文件 -o 报告存放路径</span><br></pre></td></tr></table></figure></li><li>4、本地启动web服务并打开报告：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">allure open -h 127.0.0.1 -p 8883 ./报告文件</span><br></pre></td></tr></table></figure></li></ul><h2 id="fixture"><a href="#fixture" class="headerlink" title="fixture"></a>fixture</h2><p><strong>fixture特点以及作用</strong></p><ul><li>命令灵活：对于setup，teardown，可以不起这两个名字</li><li>数据共享，在conftest.py配置里写方法可以实现数据共享，不需要import导入</li><li>scope的层次以及yield组合相当于各种setup和teardown</li><li>实现参数化</li></ul><p><strong>fixture与setup的区别</strong>？</p><ul><li>fixture命名更灵活，不要以test_开头，与用例区分开</li><li>fixture是以参数的形式传递到测试用例中，想用就用，可以在需要fixture的测试用例中参数添加fixture，不需要就不传递</li><li>一条用例可以使用多个fixture作为前置条件</li><li>autouse 可以使fixture自动执行，自动引入不需要导入</li><li>conftest.py为fixture而生的，可以方便管理、修改和查看fixture函数</li></ul><p><strong>fixture基本用法</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 场景:一个测试类中用一些测试用例需登录才能执行，有一些不需要登录也可以执行</span></span><br><span class="line"><span class="comment"># 首先定义一个登录方法，在方法前加一个fixture装饰器，把该方法名当成参数传入需要使用这个方法的用例中，则在执行用例时就会先去执行fixture定义的方法然后再执行用例</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.fixture()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;完成登录操作&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_order</span>(<span class="params">login</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;去下单&quot;</span>)</span><br></pre></td></tr></table></figure><p><strong>fixture的作用域</strong></p><table><thead><tr><th>范围</th><th>作用说明</th></tr></thead><tbody><tr><td>function</td><td>每个函数或方法都会调用</td></tr><tr><td>class</td><td>每个测试类只运行一次</td></tr><tr><td>module</td><td>每个.py文件调用一次</td></tr><tr><td>package</td><td>每个python包调用一次（暂不支持）</td></tr><tr><td>session</td><td>每个回话只运行一次，单次运行为一个会话</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@pytest.fixture(scope=&quot;class&quot;)</span><br></pre></td></tr></table></figure><p><strong>fixture–yield</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 前面为setup操作</span></span><br><span class="line"><span class="comment"># yield</span></span><br><span class="line"><span class="comment"># 后面为teardown操作</span></span><br></pre></td></tr></table></figure><p><strong>conftest.py文件数据共享</strong></p><ul><li>conftest名字是固定的，不能改变</li><li>将项目共享的方法可以放置在conftest文件中，方便直接调用</li></ul><p><strong>fixtrue自动应用</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># autouse=True打开自动应用</span></span><br><span class="line"><span class="meta">@pytest.fixture(<span class="params">scope=<span class="string">&quot;function&quot;</span>,autouse=<span class="literal">True</span></span>)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>fixtrue实现参数化</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@pytest.fixture(<span class="params">params=[[<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>],[-<span class="number">0.01</span>,<span class="number">0.02</span>,<span class="number">0.01</span>]],ids=[<span class="string">&quot;2个整数相加&quot;</span>,<span class="string">&quot;2个浮点数相加&quot;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_fixture_data</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="keyword">return</span> request.param</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestCalculator</span>:</span></span><br><span class="line">    <span class="comment"># 使用fixture实现参数化</span></span><br><span class="line"><span class="meta">    @allure.story(<span class="params"><span class="string">&quot;加法p0用例&quot;</span></span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_p0_add</span>(<span class="params">self,get_fixture_data</span>):</span></span><br><span class="line">        <span class="keyword">assert</span> get_fixture_data[<span class="number">2</span>] == cl.add(get_fixture_data[<span class="number">0</span>],get_fixture_data[<span class="number">1</span>])</span><br></pre></td></tr></table></figure><p><strong>pytest.ini配置文件</strong></p><ul><li>可以修改用例的命名规则<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 执行check_和test_开头的所有文件</span></span><br><span class="line">python_files = check_* test_*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行所有以Check和Tset开头的类</span></span><br><span class="line">python_classes = Check* Test*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行所有check_和test_开头的函数和方法</span></span><br><span class="line">python_functions = check_* test_*</span><br></pre></td></tr></table></figure></li><li>配置日志格式，比代码配置更方便<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 日志开关 true false</span></span><br><span class="line">log_cli = true</span><br><span class="line"><span class="comment"># 日志级别</span></span><br><span class="line">log_cli_level = info</span><br><span class="line"><span class="comment"># 打印详细日志，相当于命令行加 -vs</span></span><br><span class="line">addopts = --capture=no</span><br><span class="line"><span class="comment"># 日志格式</span></span><br><span class="line">log_cli_format = %(asctime)s [%(levelname)s] %(message)s (%(filename)s:%(lineno)s)</span><br><span class="line"><span class="comment"># 日志时间格式</span></span><br><span class="line">log_cli_date_format = %Y-%m-%d %H:%M:%S</span><br><span class="line"><span class="comment"># 日志文件位置</span></span><br><span class="line"><span class="comment"># log_file = ./log/test.log</span></span><br><span class="line"><span class="comment"># 日志文件等级</span></span><br><span class="line">log_file_level = info</span><br><span class="line"><span class="comment"># 日志文件格式</span></span><br><span class="line">log_file_format = %(asctime)s [%(levelname)s] %(message)s (%(filename)s:%(lineno)s)</span><br><span class="line"><span class="comment"># 日志文件日期格式</span></span><br><span class="line">log_file_date_format = %Y-%m-%d %H:%M:%S</span><br></pre></td></tr></table></figure></li><li>添加自定义标签，防止运行过程中报警告错误<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">marks = </span><br></pre></td></tr></table></figure></li><li>指定/排除执行目录<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置执行的目录</span></span><br><span class="line">testpaths = 路径</span><br><span class="line"><span class="comment"># 忽略一些目录</span></span><br><span class="line">norecursedirs = result logs datas test_dome*</span><br></pre></td></tr></table></figure></li></ul><h2 id="pytest插件开发，hook函数"><a href="#pytest插件开发，hook函数" class="headerlink" title="pytest插件开发，hook函数"></a>pytest插件开发，hook函数</h2><h4 id="1、hook函数介绍"><a href="#1、hook函数介绍" class="headerlink" title="1、hook函数介绍"></a>1、hook函数介绍</h4><ul><li>hook函数也称钩子函数</li><li>hook函数会被系统自动调用，使用时直接在hookspec.py文件中找到对应hook函数，复制函数体进行编写</li><li>pytest执行时是会有固定的顺序，对顺序中的hook函数进行二次开发达到自己所需要的目的</li></ul><h4 id="2、pytest-hook的执行顺序"><a href="#2、pytest-hook的执行顺序" class="headerlink" title="2、pytest hook的执行顺序"></a>2、pytest hook的执行顺序</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">文字版顺序</span><br><span class="line">root</span><br><span class="line">└── pytest_cmdline_main</span><br><span class="line">├── pytest_plugin_registered</span><br><span class="line">├── pytest_configure</span><br><span class="line">│ └── pytest_plugin_registered</span><br><span class="line">├── pytest_sessionstart</span><br><span class="line">│ ├── pytest_plugin_registered</span><br><span class="line">│ └── pytest_report_header</span><br><span class="line">├── pytest_collection        <span class="comment"># 测试用例收集开始</span></span><br><span class="line">│ ├── pytest_collectstart</span><br><span class="line">│ ├── pytest_make_collect_report</span><br><span class="line">│ │ ├── pytest_collect_file</span><br><span class="line">│ │ │ └── pytest_pycollect_makemodule</span><br><span class="line">│ │ └── pytest_pycollect_makeitem</span><br><span class="line">│ │ └── pytest_generate_tests</span><br><span class="line">│ │ └── pytest_make_parametrize_id</span><br><span class="line">│ ├── pytest_collectreport</span><br><span class="line">│ ├── pytest_itemcollected</span><br><span class="line">│ ├── pytest_collection_modifyitems   <span class="comment"># 用例收集结束</span></span><br><span class="line">│ └── pytest_collection_finish</span><br><span class="line">│ └── pytest_report_collectionfinish</span><br><span class="line">├── pytest_runtestloop         <span class="comment"># 测试用例执行阶段</span></span><br><span class="line">│ └── pytest_runtest_protocol</span><br><span class="line">│ ├── pytest_runtest_logstart</span><br><span class="line">│ ├── pytest_runtest_setup    <span class="comment"># setup执行阶段</span></span><br><span class="line">│ │ └── pytest_fixture_setup</span><br><span class="line">│ ├── pytest_runtest_makereport</span><br><span class="line">│ ├── pytest_runtest_logreport</span><br><span class="line">│ │ └── pytest_report_teststatus</span><br><span class="line">│ ├── pytest_runtest_call</span><br><span class="line">│ │ └── pytest_pyfunc_call</span><br><span class="line">│ ├── pytest_runtest_teardown   <span class="comment"># teardown执行阶段</span></span><br><span class="line">│ │ └── pytest_fixture_post_finalizer</span><br><span class="line">│ └── pytest_runtest_logfinish</span><br><span class="line">├── pytest_sessionfinish</span><br><span class="line">│ └── pytest_terminal_summary</span><br><span class="line">└── pytest_unconfigure</span><br></pre></td></tr></table></figure><h4 id="3、hookspec-py文件路径"><a href="#3、hookspec-py文件路径" class="headerlink" title="3、hookspec.py文件路径"></a>3、hookspec.py文件路径</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">site_packages/_pytest/hookspec.py</span><br></pre></td></tr></table></figure><h4 id="4、编写插件"><a href="#4、编写插件" class="headerlink" title="4、编写插件"></a>4、编写插件</h4><p><strong>1、修改默认编码格式</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hook函数，在用例收集完毕之后会被调用</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pytest_collection_modifyitems</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">    session: <span class="string">&quot;Session&quot;</span>, config: <span class="string">&quot;Config&quot;</span>, items: <span class="type">List</span>[<span class="string">&quot;Item&quot;</span>]</span></span></span><br><span class="line"><span class="params"><span class="function"></span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    1、用例收集完毕后，遍历用例对象，修改name、nodeid编码格式</span></span><br><span class="line"><span class="string">    2、将python的默认编码格式unicode装换为utf-8，再装换为unicode_escape</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">        item.name = item.name.encode(<span class="string">&quot;utf-8&quot;</span>).decode(<span class="string">&quot;unicode_escape&quot;</span>)</span><br><span class="line">        item._nodeid = item._nodeid.encode(<span class="string">&quot;utf-8&quot;</span>).decode(<span class="string">&quot;unicode_escape&quot;</span>)</span><br></pre></td></tr></table></figure><p><strong>2、添加命令行参数</strong></p><p>conftest.py文件：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过添加命令行自定义参数可以达到，在执行用例时添加命令参数来指定测试数据</span></span><br><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"><span class="keyword">import</span> yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># hook函数头[pytest_addoption(parser):]为固定写法</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pytest_addoption</span>(<span class="params">parser</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    新建一个命令行组kane，命令为--env，参数默认为test</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    my_group = parser.getgroup(<span class="string">&#x27;kane&#x27;</span>)</span><br><span class="line">    my_group.addoption(<span class="string">&#x27;--env&#x27;</span>,default=<span class="string">&#x27;test&#x27;</span>,dest=<span class="string">&#x27;test env&#x27;</span>,<span class="built_in">help</span>=<span class="string">&#x27;set you run env&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.fixture(<span class="params">scope=<span class="string">&quot;session&quot;</span>,autouse=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_option</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    获取命令行参数的值，并return</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> request.config.getoption(<span class="string">&quot;--env&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.fixture(<span class="params">scope=<span class="string">&quot;session&quot;</span>,autouse=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_test_env</span>(<span class="params">get_option</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">     获取到命令行的值并对值判断</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> get_option == <span class="string">&quot;test&quot;</span>:</span><br><span class="line">        data_path = <span class="string">&#x27;./test.yaml&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> get_option == <span class="string">&quot;dev&quot;</span>:</span><br><span class="line">        data_path = <span class="string">&quot;./dev.yaml&quot;</span></span><br><span class="line">    <span class="comment"># 经过判断后得到yaml文件的路径，并解析文件返回数据</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(data_path) <span class="keyword">as</span> f:</span><br><span class="line">        get_data = yaml.safe_load(f)</span><br><span class="line">    <span class="keyword">return</span> get_data</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>test_case.py:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_dome1</span>(<span class="params">get_test_env</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(get_test_env)</span><br></pre></td></tr></table></figure><p>命令行：pytest -vs –env 环境 test_case.py,即可指定测试数据来执行</p><p>3、插件打包发布</p><p><strong>插件打包发布前提</strong>：</p><ul><li>源码包</li><li>setup.py文件配置</li><li>test测试包</li></ul><p><strong>打包</strong></p><ol><li>依赖包安装：pip install setuptools /  pip install wheel</li><li>配置好setup后，输入打包命令：python setup.py sdist bdist_wheel</li></ol><p><strong>插件上传至pypi</strong></p><ol><li>安装twine：python3 -m pip install –upgrade twine </li><li>执行：twine upload dist/*</li></ol>]]></content>
      
      
      <categories>
          
          <category> python3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pytest </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
